{"file_contents":{"components/ui/use-mobile.tsx":{"content":"import * as React from 'react'\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener('change', onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener('change', onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"components/ui/spinner.tsx":{"content":"import { Loader2Icon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Spinner({ className, ...props }: React.ComponentProps<'svg'>) {\n  return (\n    <Loader2Icon\n      role=\"status\"\n      aria-label=\"Loading\"\n      className={cn('size-4 animate-spin', className)}\n      {...props}\n    />\n  )\n}\n\nexport { Spinner }\n","size_bytes":331},"components/ui/drawer.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport { Drawer as DrawerPrimitive } from 'vaul'\n\nimport { cn } from '@/lib/utils'\n\nfunction Drawer({\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) {\n  return <DrawerPrimitive.Root data-slot=\"drawer\" {...props} />\n}\n\nfunction DrawerTrigger({\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Trigger>) {\n  return <DrawerPrimitive.Trigger data-slot=\"drawer-trigger\" {...props} />\n}\n\nfunction DrawerPortal({\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Portal>) {\n  return <DrawerPrimitive.Portal data-slot=\"drawer-portal\" {...props} />\n}\n\nfunction DrawerClose({\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Close>) {\n  return <DrawerPrimitive.Close data-slot=\"drawer-close\" {...props} />\n}\n\nfunction DrawerOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Overlay>) {\n  return (\n    <DrawerPrimitive.Overlay\n      data-slot=\"drawer-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DrawerContent({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Content>) {\n  return (\n    <DrawerPortal data-slot=\"drawer-portal\">\n      <DrawerOverlay />\n      <DrawerPrimitive.Content\n        data-slot=\"drawer-content\"\n        className={cn(\n          'group/drawer-content bg-background fixed z-50 flex h-auto flex-col',\n          'data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b',\n          'data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t',\n          'data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm',\n          'data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm',\n          className,\n        )}\n        {...props}\n      >\n        <div className=\"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block\" />\n        {children}\n      </DrawerPrimitive.Content>\n    </DrawerPortal>\n  )\n}\n\nfunction DrawerHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"drawer-header\"\n      className={cn(\n        'flex flex-col gap-0.5 p-4 group-data-[vaul-drawer-direction=bottom]/drawer-content:text-center group-data-[vaul-drawer-direction=top]/drawer-content:text-center md:gap-1.5 md:text-left',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DrawerFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"drawer-footer\"\n      className={cn('mt-auto flex flex-col gap-2 p-4', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DrawerTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Title>) {\n  return (\n    <DrawerPrimitive.Title\n      data-slot=\"drawer-title\"\n      className={cn('text-foreground font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DrawerDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Description>) {\n  return (\n    <DrawerPrimitive.Description\n      data-slot=\"drawer-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":4258},"app/api/materials/route.ts":{"content":"import { type NextRequest, NextResponse } from \"next/server\"\nimport { getDatabase } from \"@/lib/mongodb\"\nimport { getSession } from \"@/lib/auth\"\nimport type { Material } from \"@/lib/models\"\n\nexport async function GET(request: NextRequest) {\n  try {\n    const session = await getSession()\n    if (!session) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const { searchParams } = new URL(request.url)\n    const courseId = searchParams.get(\"courseId\")\n\n    if (!courseId) {\n      return NextResponse.json({ error: \"Course ID is required\" }, { status: 400 })\n    }\n\n    const db = await getDatabase()\n    const materialsCollection = db.collection<Material>(\"materials\")\n\n    const materials = await materialsCollection.find({ courseId }).sort({ createdAt: -1 }).toArray()\n\n    return NextResponse.json({ materials })\n  } catch (error) {\n    console.error(\"[v0] Get materials error:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await getSession()\n    if (!session || ![\"teacher\", \"admin\", \"head\"].includes(session.role as string)) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const body = await request.json()\n    const { courseId, title, description, tokenId, fileUrl, fileType } = body\n\n    if (!courseId || !title) {\n      return NextResponse.json({ error: \"Missing required fields\" }, { status: 400 })\n    }\n\n    const db = await getDatabase()\n    const materialsCollection = db.collection<Material>(\"materials\")\n\n    let finalFileUrl = fileUrl\n    let assetId\n\n    if (tokenId) {\n      const uploadsCollection = db.collection(\"uploads\")\n      const uploadAsset = await uploadsCollection.findOne({ tokenId })\n\n      if (!uploadAsset) {\n        return NextResponse.json({ error: \"Invalid upload token\" }, { status: 400 })\n      }\n\n      if (uploadAsset.claimed) {\n        return NextResponse.json({ error: \"Upload token already used\" }, { status: 400 })\n      }\n\n      if (uploadAsset.uploadedBy !== session.userId) {\n        return NextResponse.json({ error: \"Unauthorized to use this upload\" }, { status: 403 })\n      }\n\n      if (uploadAsset.type !== \"material\") {\n        return NextResponse.json({ error: \"Invalid upload type for material\" }, { status: 400 })\n      }\n\n      if (new Date() > new Date(uploadAsset.expiresAt)) {\n        return NextResponse.json({ error: \"Upload token expired\" }, { status: 400 })\n      }\n\n      assetId = uploadAsset._id\n      finalFileUrl = tokenId\n    } else if (!fileUrl) {\n      return NextResponse.json({ error: \"Either tokenId or fileUrl is required\" }, { status: 400 })\n    }\n\n    const newMaterial: Material = {\n      courseId,\n      title,\n      description,\n      fileUrl: finalFileUrl as string,\n      fileType: fileType || \"url\",\n      uploadedBy: session.userId as string,\n      createdAt: new Date(),\n    }\n\n    const result = await materialsCollection.insertOne(newMaterial)\n\n    if (tokenId && assetId) {\n      const uploadsCollection = db.collection(\"uploads\")\n      await uploadsCollection.updateOne(\n        { _id: assetId },\n        { $set: { claimed: true, linkedTo: result.insertedId.toString() } }\n      )\n    }\n\n    return NextResponse.json(\n      { message: \"Material uploaded successfully\", materialId: result.insertedId },\n      { status: 201 },\n    )\n  } catch (error) {\n    console.error(\"[v0] Upload material error:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n","size_bytes":3594},"app/admin/news/page.tsx":{"content":"\"use client\"\n\nimport type React from \"react\"\n\nimport { useEffect, useState } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { Plus, Trash2, Newspaper } from \"lucide-react\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\"\n\ninterface NewsItem {\n  _id: string\n  title: string\n  content: string\n  createdAt: string\n}\n\nexport default function AdminNewsPage() {\n  const [news, setNews] = useState<NewsItem[]>([])\n  const [open, setOpen] = useState(false)\n  const [formData, setFormData] = useState({\n    title: \"\",\n    content: \"\",\n  })\n  const { toast } = useToast()\n\n  useEffect(() => {\n    fetchNews()\n  }, [])\n\n  const fetchNews = async () => {\n    try {\n      const response = await fetch(\"/api/news\")\n      if (response.ok) {\n        const data = await response.json()\n        setNews(data.news)\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to load news\",\n        variant: \"destructive\",\n      })\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    try {\n      const response = await fetch(\"/api/news\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(formData),\n      })\n\n      if (response.ok) {\n        toast({\n          title: \"Success\",\n          description: \"News published successfully\",\n        })\n        fetchNews()\n        setOpen(false)\n        setFormData({ title: \"\", content: \"\" })\n      } else {\n        const data = await response.json()\n        throw new Error(data.error)\n      }\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      })\n    }\n  }\n\n  const handleDelete = async (newsId: string) => {\n    if (!confirm(\"Are you sure you want to delete this news?\")) {\n      return\n    }\n\n    try {\n      const response = await fetch(`/api/news/${newsId}`, {\n        method: \"DELETE\",\n      })\n\n      if (response.ok) {\n        toast({\n          title: \"Success\",\n          description: \"News deleted successfully\",\n        })\n        fetchNews()\n      } else {\n        throw new Error(\"Failed to delete news\")\n      }\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      })\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold mb-2\">News Management</h1>\n          <p className=\"text-muted-foreground\">Publish and manage university news</p>\n        </div>\n        <Dialog open={open} onOpenChange={setOpen}>\n          <DialogTrigger asChild>\n            <Button>\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Add News\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Publish News</DialogTitle>\n              <DialogDescription>Share important updates with the university community</DialogDescription>\n            </DialogHeader>\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"title\">Title</Label>\n                <Input\n                  id=\"title\"\n                  placeholder=\"News headline...\"\n                  value={formData.title}\n                  onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                  required\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"content\">Content</Label>\n                <Textarea\n                  id=\"content\"\n                  placeholder=\"News content...\"\n                  value={formData.content}\n                  onChange={(e) => setFormData({ ...formData, content: e.target.value })}\n                  rows={6}\n                  required\n                />\n              </div>\n\n              <Button type=\"submit\" className=\"w-full\">\n                Publish News\n              </Button>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <div className=\"grid gap-4\">\n        {news.map((item) => (\n          <Card key={item._id}>\n            <CardHeader>\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex items-start gap-3\">\n                  <div className=\"bg-primary/10 p-2 rounded\">\n                    <Newspaper className=\"h-5 w-5 text-primary\" />\n                  </div>\n                  <div>\n                    <CardTitle>{item.title}</CardTitle>\n                    <CardDescription>\n                      {new Date(item.createdAt).toLocaleDateString()} at {new Date(item.createdAt).toLocaleTimeString()}\n                    </CardDescription>\n                  </div>\n                </div>\n                <Button size=\"sm\" variant=\"ghost\" onClick={() => handleDelete(item._id)}>\n                  <Trash2 className=\"h-4 w-4 text-destructive\" />\n                </Button>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-sm text-muted-foreground leading-relaxed\">{item.content}</p>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    </div>\n  )\n}\n","size_bytes":5719},"components/ui/checkbox.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as CheckboxPrimitive from '@radix-ui/react-checkbox'\nimport { CheckIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Checkbox({\n  className,\n  ...props\n}: React.ComponentProps<typeof CheckboxPrimitive.Root>) {\n  return (\n    <CheckboxPrimitive.Root\n      data-slot=\"checkbox\"\n      className={cn(\n        'peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    >\n      <CheckboxPrimitive.Indicator\n        data-slot=\"checkbox-indicator\"\n        className=\"flex items-center justify-center text-current transition-none\"\n      >\n        <CheckIcon className=\"size-3.5\" />\n      </CheckboxPrimitive.Indicator>\n    </CheckboxPrimitive.Root>\n  )\n}\n\nexport { Checkbox }\n","size_bytes":1227},"app/login/page.tsx":{"content":"\"use client\"\n\nimport type React from \"react\"\n\nimport { useState } from \"react\"\nimport { useAuth } from \"@/components/auth-provider\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport Link from \"next/link\"\nimport { GraduationCap } from \"lucide-react\"\nimport { ThemeToggle } from \"@/components/theme-toggle\"\n\nexport default function LoginPage() {\n  const [email, setEmail] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [loading, setLoading] = useState(false)\n  const { login } = useAuth()\n  const { toast } = useToast()\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setLoading(true)\n\n    try {\n      await login(email, password)\n      toast({\n        title: \"Success\",\n        description: \"Logged in successfully\",\n      })\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Invalid email or password\",\n        variant: \"destructive\",\n      })\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-blue-50 to-white dark:from-slate-950 dark:to-slate-900 flex items-center justify-center p-4\">\n      <div className=\"absolute top-4 right-4\">\n        <ThemeToggle />\n      </div>\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <div className=\"flex justify-center mb-4\">\n            <div className=\"bg-primary/10 p-3 rounded-full\">\n              <GraduationCap className=\"h-10 w-10 text-primary\" />\n            </div>\n          </div>\n          <CardTitle className=\"text-2xl\">Welcome Back</CardTitle>\n          <CardDescription>Login to access your Woldia University E-Learning account</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">Email</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"student@wdu.edu.et\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Password</Label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"Enter your password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required\n              />\n            </div>\n            <Button type=\"submit\" className=\"w-full\" disabled={loading}>\n              {loading ? \"Logging in...\" : \"Login\"}\n            </Button>\n          </form>\n          <div className=\"mt-4 text-center text-sm text-muted-foreground\">\n            Don't have an account?{\" \"}\n            <Link href=\"/register\" className=\"text-primary hover:underline\">\n              Register here\n            </Link>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n","size_bytes":3299},"components/ui/sidebar.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, VariantProps } from 'class-variance-authority'\nimport { PanelLeftIcon } from 'lucide-react'\n\nimport { useIsMobile } from '@/hooks/use-mobile'\nimport { cn } from '@/lib/utils'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Separator } from '@/components/ui/separator'\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from '@/components/ui/sheet'\nimport { Skeleton } from '@/components/ui/skeleton'\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@/components/ui/tooltip'\n\nconst SIDEBAR_COOKIE_NAME = 'sidebar_state'\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = '16rem'\nconst SIDEBAR_WIDTH_MOBILE = '18rem'\nconst SIDEBAR_WIDTH_ICON = '3rem'\nconst SIDEBAR_KEYBOARD_SHORTCUT = 'b'\n\ntype SidebarContextProps = {\n  state: 'expanded' | 'collapsed'\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error('useSidebar must be used within a SidebarProvider.')\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<'div'> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === 'function' ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open],\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener('keydown', handleKeyDown)\n    return () => window.removeEventListener('keydown', handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? 'expanded' : 'collapsed'\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar],\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              '--sidebar-width': SIDEBAR_WIDTH,\n              '--sidebar-width-icon': SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            'group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full',\n            className,\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = 'left',\n  variant = 'sidebar',\n  collapsible = 'offcanvas',\n  className,\n  children,\n  ...props\n}: React.ComponentProps<'div'> & {\n  side?: 'left' | 'right'\n  variant?: 'sidebar' | 'floating' | 'inset'\n  collapsible?: 'offcanvas' | 'icon' | 'none'\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === 'none') {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          'bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden\"\n          style={\n            {\n              '--sidebar-width': SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === 'collapsed' ? collapsible : ''}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          'relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear',\n          'group-data-[collapsible=offcanvas]:w-0',\n          'group-data-[side=right]:rotate-180',\n          variant === 'floating' || variant === 'inset'\n            ? 'group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]'\n            : 'group-data-[collapsible=icon]:w-(--sidebar-width-icon)',\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          'fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex',\n          side === 'left'\n            ? 'left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]'\n            : 'right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]',\n          // Adjust the padding for floating and inset variants.\n          variant === 'floating' || variant === 'inset'\n            ? 'p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]'\n            : 'group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l',\n          className,\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn('size-7', className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<'button'>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        'hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex',\n        'in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize',\n        '[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize',\n        'hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full',\n        '[[data-side=left][data-collapsible=offcanvas]_&]:-right-2',\n        '[[data-side=right][data-collapsible=offcanvas]_&]:-left-2',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<'main'>) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        'bg-background relative flex w-full flex-1 flex-col',\n        'md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn('bg-background h-8 w-full shadow-none', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn('flex flex-col gap-2 p-2', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn('flex flex-col gap-2 p-2', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn('bg-sidebar-border mx-2 w-auto', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        'flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn('relative flex w-full min-w-0 flex-col p-2', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'div'> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : 'div'\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        'text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0',\n        'group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        'text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0',\n        // Increases the hit area of the button on mobile.\n        'after:absolute after:-inset-2 md:after:hidden',\n        'group-data-[collapsible=icon]:hidden',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn('w-full text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<'ul'>) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn('flex w-full min-w-0 flex-col gap-1', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<'li'>) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn('group/menu-item relative', className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  'peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0',\n  {\n    variants: {\n      variant: {\n        default: 'hover:bg-sidebar-accent hover:text-sidebar-accent-foreground',\n        outline:\n          'bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]',\n      },\n      size: {\n        default: 'h-8 text-sm',\n        sm: 'h-7 text-xs',\n        lg: 'h-12 text-sm group-data-[collapsible=icon]:p-0!',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = 'default',\n  size = 'default',\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<'button'> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : 'button'\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === 'string') {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== 'collapsed' || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<'button'> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        'text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0',\n        // Increases the hit area of the button on mobile.\n        'after:absolute after:-inset-2 md:after:hidden',\n        'peer-data-[size=sm]/menu-button:top-1',\n        'peer-data-[size=default]/menu-button:top-1.5',\n        'peer-data-[size=lg]/menu-button:top-2.5',\n        'group-data-[collapsible=icon]:hidden',\n        showOnHover &&\n          'peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        'text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none',\n        'peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground',\n        'peer-data-[size=sm]/menu-button:top-1',\n        'peer-data-[size=default]/menu-button:top-1.5',\n        'peer-data-[size=lg]/menu-button:top-2.5',\n        'group-data-[collapsible=icon]:hidden',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<'div'> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn('flex h-8 items-center gap-2 rounded-md px-2', className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-(--skeleton-width) flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            '--skeleton-width': width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<'ul'>) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        'border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5',\n        'group-data-[collapsible=icon]:hidden',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<'li'>) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn('group/menu-sub-item relative', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = 'md',\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<'a'> & {\n  asChild?: boolean\n  size?: 'sm' | 'md'\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : 'a'\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        'text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0',\n        'data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground',\n        size === 'sm' && 'text-xs',\n        size === 'md' && 'text-sm',\n        'group-data-[collapsible=icon]:hidden',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21649},"components/ui/accordion.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as AccordionPrimitive from '@radix-ui/react-accordion'\nimport { ChevronDownIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Accordion({\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Root>) {\n  return <AccordionPrimitive.Root data-slot=\"accordion\" {...props} />\n}\n\nfunction AccordionItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Item>) {\n  return (\n    <AccordionPrimitive.Item\n      data-slot=\"accordion-item\"\n      className={cn('border-b last:border-b-0', className)}\n      {...props}\n    />\n  )\n}\n\nfunction AccordionTrigger({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Trigger>) {\n  return (\n    <AccordionPrimitive.Header className=\"flex\">\n      <AccordionPrimitive.Trigger\n        data-slot=\"accordion-trigger\"\n        className={cn(\n          'focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        <ChevronDownIcon className=\"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200\" />\n      </AccordionPrimitive.Trigger>\n    </AccordionPrimitive.Header>\n  )\n}\n\nfunction AccordionContent({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Content>) {\n  return (\n    <AccordionPrimitive.Content\n      data-slot=\"accordion-content\"\n      className=\"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm\"\n      {...props}\n    >\n      <div className={cn('pt-0 pb-4', className)}>{children}</div>\n    </AccordionPrimitive.Content>\n  )\n}\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":2054},"components/ui/input-otp.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport { OTPInput, OTPInputContext } from 'input-otp'\nimport { MinusIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction InputOTP({\n  className,\n  containerClassName,\n  ...props\n}: React.ComponentProps<typeof OTPInput> & {\n  containerClassName?: string\n}) {\n  return (\n    <OTPInput\n      data-slot=\"input-otp\"\n      containerClassName={cn(\n        'flex items-center gap-2 has-disabled:opacity-50',\n        containerClassName,\n      )}\n      className={cn('disabled:cursor-not-allowed', className)}\n      {...props}\n    />\n  )\n}\n\nfunction InputOTPGroup({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"input-otp-group\"\n      className={cn('flex items-center', className)}\n      {...props}\n    />\n  )\n}\n\nfunction InputOTPSlot({\n  index,\n  className,\n  ...props\n}: React.ComponentProps<'div'> & {\n  index: number\n}) {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext?.slots[index] ?? {}\n\n  return (\n    <div\n      data-slot=\"input-otp-slot\"\n      data-active={isActive}\n      className={cn(\n        'data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]',\n        className,\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"animate-caret-blink bg-foreground h-4 w-px duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n}\n\nfunction InputOTPSeparator({ ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div data-slot=\"input-otp-separator\" role=\"separator\" {...props}>\n      <MinusIcon />\n    </div>\n  )\n}\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2256},"components/ui/sheet.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as SheetPrimitive from '@radix-ui/react-dialog'\nimport { XIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Sheet({ ...props }: React.ComponentProps<typeof SheetPrimitive.Root>) {\n  return <SheetPrimitive.Root data-slot=\"sheet\" {...props} />\n}\n\nfunction SheetTrigger({\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Trigger>) {\n  return <SheetPrimitive.Trigger data-slot=\"sheet-trigger\" {...props} />\n}\n\nfunction SheetClose({\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Close>) {\n  return <SheetPrimitive.Close data-slot=\"sheet-close\" {...props} />\n}\n\nfunction SheetPortal({\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Portal>) {\n  return <SheetPrimitive.Portal data-slot=\"sheet-portal\" {...props} />\n}\n\nfunction SheetOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Overlay>) {\n  return (\n    <SheetPrimitive.Overlay\n      data-slot=\"sheet-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SheetContent({\n  className,\n  children,\n  side = 'right',\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Content> & {\n  side?: 'top' | 'right' | 'bottom' | 'left'\n}) {\n  return (\n    <SheetPortal>\n      <SheetOverlay />\n      <SheetPrimitive.Content\n        data-slot=\"sheet-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500',\n          side === 'right' &&\n            'data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm',\n          side === 'left' &&\n            'data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm',\n          side === 'top' &&\n            'data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b',\n          side === 'bottom' &&\n            'data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        <SheetPrimitive.Close className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none\">\n          <XIcon className=\"size-4\" />\n          <span className=\"sr-only\">Close</span>\n        </SheetPrimitive.Close>\n      </SheetPrimitive.Content>\n    </SheetPortal>\n  )\n}\n\nfunction SheetHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"sheet-header\"\n      className={cn('flex flex-col gap-1.5 p-4', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SheetFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"sheet-footer\"\n      className={cn('mt-auto flex flex-col gap-2 p-4', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SheetTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Title>) {\n  return (\n    <SheetPrimitive.Title\n      data-slot=\"sheet-title\"\n      className={cn('text-foreground font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SheetDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Description>) {\n  return (\n    <SheetPrimitive.Description\n      data-slot=\"sheet-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sheet,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4092},"lib/auth.ts":{"content":"import bcrypt from \"bcryptjs\"\nimport { SignJWT, jwtVerify } from \"jose\"\nimport { cookies } from \"next/headers\"\n\nconst secret = new TextEncoder().encode(process.env.JWT_SECRET || \"your-secret-key-change-in-production\")\n\nexport async function hashPassword(password: string): Promise<string> {\n  return bcrypt.hash(password, 10)\n}\n\nexport async function verifyPassword(password: string, hashedPassword: string): Promise<boolean> {\n  return bcrypt.compare(password, hashedPassword)\n}\n\nexport async function createToken(payload: any): Promise<string> {\n  return new SignJWT(payload).setProtectedHeader({ alg: \"HS256\" }).setExpirationTime(\"7d\").sign(secret)\n}\n\nexport async function verifyToken(token: string) {\n  try {\n    const { payload } = await jwtVerify(token, secret)\n    return payload\n  } catch (error) {\n    return null\n  }\n}\n\nexport async function getSession() {\n  const cookieStore = await cookies()\n  const token = cookieStore.get(\"token\")\n\n  if (!token) return null\n\n  return verifyToken(token.value)\n}\n\nexport async function setSession(token: string) {\n  const cookieStore = await cookies()\n  cookieStore.set(\"token\", token, {\n    httpOnly: true,\n    secure: process.env.NODE_ENV === \"production\",\n    sameSite: \"lax\",\n    maxAge: 60 * 60 * 24 * 7, // 7 days\n  })\n}\n\nexport async function clearSession() {\n  const cookieStore = await cookies()\n  cookieStore.delete(\"token\")\n}\n","size_bytes":1385},"app/teacher/messages/page.tsx":{"content":"\"use client\"\n\nimport type React from \"react\"\n\nimport { useState, useEffect, useRef } from \"react\"\nimport { useAuth } from \"@/components/auth-provider\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Send, RefreshCw } from \"lucide-react\"\nimport { toast } from \"sonner\"\n\ninterface Message {\n  _id: string\n  senderId: string\n  senderName: string\n  senderRole: string\n  content: string\n  createdAt: string\n}\n\nexport default function TeacherMessagesPage() {\n  const { token, user } = useAuth()\n  const [messages, setMessages] = useState<Message[]>([])\n  const [newMessage, setNewMessage] = useState(\"\")\n  const [loading, setLoading] = useState(false)\n  const [sending, setSending] = useState(false)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\n  }\n\n  const fetchMessages = async () => {\n    try {\n      setLoading(true)\n      const response = await fetch(\"/api/messages\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        setMessages(data)\n        setTimeout(scrollToBottom, 100)\n      }\n    } catch (error) {\n      console.error(\"Error fetching messages:\", error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchMessages()\n    const interval = setInterval(fetchMessages, 10000)\n    return () => clearInterval(interval)\n  }, [token])\n\n  const handleSendMessage = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!newMessage.trim()) return\n\n    try {\n      setSending(true)\n      const response = await fetch(\"/api/messages\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({ content: newMessage }),\n      })\n\n      if (response.ok) {\n        setNewMessage(\"\")\n        fetchMessages()\n        toast.success(\"Message sent\")\n      } else {\n        toast.error(\"Failed to send message\")\n      }\n    } catch (error) {\n      console.error(\"Error sending message:\", error)\n      toast.error(\"Failed to send message\")\n    } finally {\n      setSending(false)\n    }\n  }\n\n  const getRoleBadgeColor = (role: string) => {\n    switch (role) {\n      case \"admin\":\n        return \"bg-destructive text-destructive-foreground\"\n      case \"teacher\":\n        return \"bg-primary text-primary-foreground\"\n      case \"head\":\n        return \"bg-accent text-accent-foreground\"\n      default:\n        return \"bg-muted text-muted-foreground\"\n    }\n  }\n\n  return (\n    <div className=\"container mx-auto p-6 max-w-4xl\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <h1 className=\"text-3xl font-bold\">Communication Center</h1>\n        <Button variant=\"outline\" size=\"sm\" onClick={fetchMessages} disabled={loading}>\n          <RefreshCw className={`h-4 w-4 mr-2 ${loading ? \"animate-spin\" : \"\"}`} />\n          Refresh\n        </Button>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Group Chat</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"h-[500px] overflow-y-auto mb-4 space-y-4 p-4 bg-muted/30 rounded-lg\">\n            {messages.length === 0 ? (\n              <div className=\"flex items-center justify-center h-full text-muted-foreground\">\n                No messages yet. Start the conversation!\n              </div>\n            ) : (\n              messages.map((message) => {\n                const isOwnMessage = message.senderId === user?._id\n                return (\n                  <div key={message._id} className={`flex ${isOwnMessage ? \"justify-end\" : \"justify-start\"} mb-2`}>\n                    <div className={`max-w-[70%] ${isOwnMessage ? \"items-end\" : \"items-start\"} flex flex-col gap-1`}>\n                      {!isOwnMessage && (\n                        <div className=\"flex items-center gap-2 px-1\">\n                          <span className=\"text-sm font-semibold text-primary\">\n                            {message.senderName || \"Unknown User\"}\n                          </span>\n                          <span className={`text-xs px-2 py-0.5 rounded-full ${getRoleBadgeColor(message.senderRole)}`}>\n                            {message.senderRole}\n                          </span>\n                        </div>\n                      )}\n                      <div\n                        className={`px-4 py-2 rounded-2xl shadow-sm ${\n                          isOwnMessage \n                            ? \"bg-primary text-primary-foreground rounded-tr-md\" \n                            : \"bg-card border rounded-tl-md\"\n                        }`}\n                      >\n                        <p className=\"text-sm whitespace-pre-wrap break-words\">{message.content}</p>\n                        <p\n                          className={`text-xs mt-1 ${\n                            isOwnMessage ? \"text-primary-foreground/70 text-right\" : \"text-muted-foreground\"\n                          }`}\n                        >\n                          {new Date(message.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                )\n              })\n            )}\n            <div ref={messagesEndRef} />\n          </div>\n\n          <form onSubmit={handleSendMessage} className=\"flex gap-2\">\n            <Textarea\n              placeholder=\"Type your message...\"\n              value={newMessage}\n              onChange={(e) => setNewMessage(e.target.value)}\n              className=\"min-h-[60px]\"\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\" && !e.shiftKey) {\n                  e.preventDefault()\n                  handleSendMessage(e)\n                }\n              }}\n            />\n            <Button type=\"submit\" disabled={sending || !newMessage.trim()} className=\"self-end\">\n              <Send className=\"h-4 w-4 mr-2\" />\n              Send\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n","size_bytes":6312},"app/teacher/news/page.tsx":{"content":"\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Newspaper } from \"lucide-react\"\n\ninterface NewsItem {\n  _id: string\n  title: string\n  content: string\n  createdAt: string\n}\n\nexport default function TeacherNewsPage() {\n  const [news, setNews] = useState<NewsItem[]>([])\n\n  useEffect(() => {\n    fetchNews()\n  }, [])\n\n  const fetchNews = async () => {\n    try {\n      const response = await fetch(\"/api/news\")\n      if (response.ok) {\n        const data = await response.json()\n        setNews(data.news)\n      }\n    } catch (error) {\n      console.error(\"[v0] Fetch news error:\", error)\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold mb-2\">University News</h1>\n        <p className=\"text-muted-foreground\">Latest updates and announcements</p>\n      </div>\n\n      <div className=\"grid gap-4\">\n        {news.map((item) => (\n          <Card key={item._id}>\n            <CardHeader>\n              <div className=\"flex items-start gap-3\">\n                <div className=\"bg-primary/10 p-2 rounded\">\n                  <Newspaper className=\"h-5 w-5 text-primary\" />\n                </div>\n                <div>\n                  <CardTitle>{item.title}</CardTitle>\n                  <CardDescription>\n                    {new Date(item.createdAt).toLocaleDateString()} at {new Date(item.createdAt).toLocaleTimeString()}\n                  </CardDescription>\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-sm text-muted-foreground leading-relaxed\">{item.content}</p>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    </div>\n  )\n}\n","size_bytes":1802},"app/student/layout.tsx":{"content":"\"use client\"\n\nimport type React from \"react\"\n\nimport { useAuth } from \"@/components/auth-provider\"\nimport { useRouter } from \"next/navigation\"\nimport { useEffect } from \"react\"\nimport { StudentNav } from \"@/components/student-nav\"\n\nexport default function StudentLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  const { user, loading } = useAuth()\n  const router = useRouter()\n\n  useEffect(() => {\n    if (!loading && (!user || user.role !== \"student\")) {\n      router.push(\"/login\")\n    }\n  }, [user, loading, router])\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-muted-foreground\">Loading...</div>\n      </div>\n    )\n  }\n\n  if (!user || user.role !== \"student\") {\n    return null\n  }\n\n  return (\n    <div className=\"min-h-screen bg-muted/30\">\n      <StudentNav />\n      <main className=\"container mx-auto px-4 py-8\">{children}</main>\n    </div>\n  )\n}\n","size_bytes":950},"components/ui/resizable.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport { GripVerticalIcon } from 'lucide-react'\nimport * as ResizablePrimitive from 'react-resizable-panels'\n\nimport { cn } from '@/lib/utils'\n\nfunction ResizablePanelGroup({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) {\n  return (\n    <ResizablePrimitive.PanelGroup\n      data-slot=\"resizable-panel-group\"\n      className={cn(\n        'flex h-full w-full data-[panel-group-direction=vertical]:flex-col',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ResizablePanel({\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.Panel>) {\n  return <ResizablePrimitive.Panel data-slot=\"resizable-panel\" {...props} />\n}\n\nfunction ResizableHandle({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) {\n  return (\n    <ResizablePrimitive.PanelResizeHandle\n      data-slot=\"resizable-handle\"\n      className={cn(\n        'bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:translate-x-0 data-[panel-group-direction=vertical]:after:-translate-y-1/2 [&[data-panel-group-direction=vertical]>div]:rotate-90',\n        className,\n      )}\n      {...props}\n    >\n      {withHandle && (\n        <div className=\"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border\">\n          <GripVerticalIcon className=\"size-2.5\" />\n        </div>\n      )}\n    </ResizablePrimitive.PanelResizeHandle>\n  )\n}\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":2030},"components/ui/textarea.tsx":{"content":"import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Textarea({ className, ...props }: React.ComponentProps<'textarea'>) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        'border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }\n","size_bytes":760},"components/ui/command.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport { Command as CommandPrimitive } from 'cmdk'\nimport { SearchIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\n\nfunction Command({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive>) {\n  return (\n    <CommandPrimitive\n      data-slot=\"command\"\n      className={cn(\n        'bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandDialog({\n  title = 'Command Palette',\n  description = 'Search for a command to run...',\n  children,\n  className,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof Dialog> & {\n  title?: string\n  description?: string\n  className?: string\n  showCloseButton?: boolean\n}) {\n  return (\n    <Dialog {...props}>\n      <DialogHeader className=\"sr-only\">\n        <DialogTitle>{title}</DialogTitle>\n        <DialogDescription>{description}</DialogDescription>\n      </DialogHeader>\n      <DialogContent\n        className={cn('overflow-hidden p-0', className)}\n        showCloseButton={showCloseButton}\n      >\n        <Command className=\"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nfunction CommandInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Input>) {\n  return (\n    <div\n      data-slot=\"command-input-wrapper\"\n      className=\"flex h-9 items-center gap-2 border-b px-3\"\n    >\n      <SearchIcon className=\"size-4 shrink-0 opacity-50\" />\n      <CommandPrimitive.Input\n        data-slot=\"command-input\"\n        className={cn(\n          'placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50',\n          className,\n        )}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction CommandList({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.List>) {\n  return (\n    <CommandPrimitive.List\n      data-slot=\"command-list\"\n      className={cn(\n        'max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandEmpty({\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Empty>) {\n  return (\n    <CommandPrimitive.Empty\n      data-slot=\"command-empty\"\n      className=\"py-6 text-center text-sm\"\n      {...props}\n    />\n  )\n}\n\nfunction CommandGroup({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Group>) {\n  return (\n    <CommandPrimitive.Group\n      data-slot=\"command-group\"\n      className={cn(\n        'text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Separator>) {\n  return (\n    <CommandPrimitive.Separator\n      data-slot=\"command-separator\"\n      className={cn('bg-border -mx-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CommandItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Item>) {\n  return (\n    <CommandPrimitive.Item\n      data-slot=\"command-item\"\n      className={cn(\n        \"data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandShortcut({\n  className,\n  ...props\n}: React.ComponentProps<'span'>) {\n  return (\n    <span\n      data-slot=\"command-shortcut\"\n      className={cn(\n        'text-muted-foreground ml-auto text-xs tracking-widest',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4824},"scripts/init-admin.js":{"content":"const { MongoClient } = require(\"mongodb\")\nconst bcrypt = require(\"bcryptjs\")\n\nconst MONGODB_URI = process.env.MONGODB_URI || \"mongodb://localhost:27017/wduels\"\n\nasync function initAdmin() {\n  console.log(\"Connecting to MongoDB...\")\n  const client = new MongoClient(MONGODB_URI)\n\n  try {\n    await client.connect()\n    console.log(\"Connected to MongoDB\")\n\n    const db = client.db()\n    const users = db.collection(\"users\")\n\n    // Check if admin already exists\n    const existingAdmin = await users.findOne({ email: \"admin@woldia.edu.et\" })\n\n    if (existingAdmin) {\n      console.log(\"Admin user already exists\")\n      return\n    }\n\n    // Create admin user\n    const hashedPassword = await bcrypt.hash(\"admin123\", 10)\n\n    const adminUser = {\n      email: \"admin@woldia.edu.et\",\n      password: hashedPassword,\n      role: \"admin\",\n      firstName: \"System\",\n      lastName: \"Administrator\",\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    }\n\n    await users.insertOne(adminUser)\n    console.log(\"Admin user created successfully!\")\n    console.log(\"Email: admin@woldia.edu.et\")\n    console.log(\"Password: admin123\")\n    console.log(\"  Please change the password after first login!\")\n  } catch (error) {\n    console.error(\"Error creating admin user:\", error)\n  } finally {\n    await client.close()\n    console.log(\"Connection closed\")\n  }\n}\n\ninitAdmin()\n","size_bytes":1376},"components/ui/collapsible.tsx":{"content":"'use client'\n\nimport * as CollapsiblePrimitive from '@radix-ui/react-collapsible'\n\nfunction Collapsible({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.Root>) {\n  return <CollapsiblePrimitive.Root data-slot=\"collapsible\" {...props} />\n}\n\nfunction CollapsibleTrigger({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleTrigger>) {\n  return (\n    <CollapsiblePrimitive.CollapsibleTrigger\n      data-slot=\"collapsible-trigger\"\n      {...props}\n    />\n  )\n}\n\nfunction CollapsibleContent({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleContent>) {\n  return (\n    <CollapsiblePrimitive.CollapsibleContent\n      data-slot=\"collapsible-content\"\n      {...props}\n    />\n  )\n}\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":800},"components/ui/navigation-menu.tsx":{"content":"import * as React from 'react'\nimport * as NavigationMenuPrimitive from '@radix-ui/react-navigation-menu'\nimport { cva } from 'class-variance-authority'\nimport { ChevronDownIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction NavigationMenu({\n  className,\n  children,\n  viewport = true,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Root> & {\n  viewport?: boolean\n}) {\n  return (\n    <NavigationMenuPrimitive.Root\n      data-slot=\"navigation-menu\"\n      data-viewport={viewport}\n      className={cn(\n        'group/navigation-menu relative flex max-w-max flex-1 items-center justify-center',\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      {viewport && <NavigationMenuViewport />}\n    </NavigationMenuPrimitive.Root>\n  )\n}\n\nfunction NavigationMenuList({\n  className,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.List>) {\n  return (\n    <NavigationMenuPrimitive.List\n      data-slot=\"navigation-menu-list\"\n      className={cn(\n        'group flex flex-1 list-none items-center justify-center gap-1',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction NavigationMenuItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Item>) {\n  return (\n    <NavigationMenuPrimitive.Item\n      data-slot=\"navigation-menu-item\"\n      className={cn('relative', className)}\n      {...props}\n    />\n  )\n}\n\nconst navigationMenuTriggerStyle = cva(\n  'group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=open]:hover:bg-accent data-[state=open]:text-accent-foreground data-[state=open]:focus:bg-accent data-[state=open]:bg-accent/50 focus-visible:ring-ring/50 outline-none transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1',\n)\n\nfunction NavigationMenuTrigger({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Trigger>) {\n  return (\n    <NavigationMenuPrimitive.Trigger\n      data-slot=\"navigation-menu-trigger\"\n      className={cn(navigationMenuTriggerStyle(), 'group', className)}\n      {...props}\n    >\n      {children}{' '}\n      <ChevronDownIcon\n        className=\"relative top-[1px] ml-1 size-3 transition duration-300 group-data-[state=open]:rotate-180\"\n        aria-hidden=\"true\"\n      />\n    </NavigationMenuPrimitive.Trigger>\n  )\n}\n\nfunction NavigationMenuContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Content>) {\n  return (\n    <NavigationMenuPrimitive.Content\n      data-slot=\"navigation-menu-content\"\n      className={cn(\n        'data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 top-0 left-0 w-full p-2 pr-2.5 md:absolute md:w-auto',\n        'group-data-[viewport=false]/navigation-menu:bg-popover group-data-[viewport=false]/navigation-menu:text-popover-foreground group-data-[viewport=false]/navigation-menu:data-[state=open]:animate-in group-data-[viewport=false]/navigation-menu:data-[state=closed]:animate-out group-data-[viewport=false]/navigation-menu:data-[state=closed]:zoom-out-95 group-data-[viewport=false]/navigation-menu:data-[state=open]:zoom-in-95 group-data-[viewport=false]/navigation-menu:data-[state=open]:fade-in-0 group-data-[viewport=false]/navigation-menu:data-[state=closed]:fade-out-0 group-data-[viewport=false]/navigation-menu:top-full group-data-[viewport=false]/navigation-menu:mt-1.5 group-data-[viewport=false]/navigation-menu:overflow-hidden group-data-[viewport=false]/navigation-menu:rounded-md group-data-[viewport=false]/navigation-menu:border group-data-[viewport=false]/navigation-menu:shadow group-data-[viewport=false]/navigation-menu:duration-200 **:data-[slot=navigation-menu-link]:focus:ring-0 **:data-[slot=navigation-menu-link]:focus:outline-none',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction NavigationMenuViewport({\n  className,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Viewport>) {\n  return (\n    <div\n      className={'absolute top-full left-0 isolate z-50 flex justify-center'}\n    >\n      <NavigationMenuPrimitive.Viewport\n        data-slot=\"navigation-menu-viewport\"\n        className={cn(\n          'origin-top-center bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border shadow md:w-[var(--radix-navigation-menu-viewport-width)]',\n          className,\n        )}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction NavigationMenuLink({\n  className,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Link>) {\n  return (\n    <NavigationMenuPrimitive.Link\n      data-slot=\"navigation-menu-link\"\n      className={cn(\n        \"data-[active=true]:focus:bg-accent data-[active=true]:hover:bg-accent data-[active=true]:bg-accent/50 data-[active=true]:text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus-visible:ring-ring/50 [&_svg:not([class*='text-'])]:text-muted-foreground flex flex-col gap-1 rounded-sm p-2 text-sm transition-all outline-none focus-visible:ring-[3px] focus-visible:outline-1 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction NavigationMenuIndicator({\n  className,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Indicator>) {\n  return (\n    <NavigationMenuPrimitive.Indicator\n      data-slot=\"navigation-menu-indicator\"\n      className={cn(\n        'data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden',\n        className,\n      )}\n      {...props}\n    >\n      <div className=\"bg-border relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm shadow-md\" />\n    </NavigationMenuPrimitive.Indicator>\n  )\n}\n\nexport {\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n  navigationMenuTriggerStyle,\n}\n","size_bytes":6651},"components/ui/toggle-group.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as ToggleGroupPrimitive from '@radix-ui/react-toggle-group'\nimport { type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\nimport { toggleVariants } from '@/components/ui/toggle'\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: 'default',\n  variant: 'default',\n})\n\nfunction ToggleGroup({\n  className,\n  variant,\n  size,\n  children,\n  ...props\n}: React.ComponentProps<typeof ToggleGroupPrimitive.Root> &\n  VariantProps<typeof toggleVariants>) {\n  return (\n    <ToggleGroupPrimitive.Root\n      data-slot=\"toggle-group\"\n      data-variant={variant}\n      data-size={size}\n      className={cn(\n        'group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs',\n        className,\n      )}\n      {...props}\n    >\n      <ToggleGroupContext.Provider value={{ variant, size }}>\n        {children}\n      </ToggleGroupContext.Provider>\n    </ToggleGroupPrimitive.Root>\n  )\n}\n\nfunction ToggleGroupItem({\n  className,\n  children,\n  variant,\n  size,\n  ...props\n}: React.ComponentProps<typeof ToggleGroupPrimitive.Item> &\n  VariantProps<typeof toggleVariants>) {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      data-slot=\"toggle-group-item\"\n      data-variant={context.variant || variant}\n      data-size={context.size || size}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        'min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l',\n        className,\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n}\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1927},"app/api/submissions/[id]/grade/route.ts":{"content":"import { type NextRequest, NextResponse } from \"next/server\"\nimport { getDatabase } from \"@/lib/mongodb\"\nimport { getSession } from \"@/lib/auth\"\nimport { ObjectId } from \"mongodb\"\n\nexport async function PATCH(request: NextRequest, { params }: { params: { id: string } }) {\n  try {\n    const session = await getSession()\n    if (!session || session.role !== \"teacher\") {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const body = await request.json()\n    const { grade, feedback } = body\n\n    if (grade === undefined) {\n      return NextResponse.json({ error: \"Grade is required\" }, { status: 400 })\n    }\n\n    const db = await getDatabase()\n    const submissionsCollection = db.collection(\"submissions\")\n\n    const result = await submissionsCollection.updateOne(\n      { _id: new ObjectId(params.id) },\n      {\n        $set: {\n          grade,\n          feedback: feedback || \"\",\n          gradedBy: session.userId,\n          gradedAt: new Date(),\n        },\n      },\n    )\n\n    if (result.matchedCount === 0) {\n      return NextResponse.json({ error: \"Submission not found\" }, { status: 404 })\n    }\n\n    return NextResponse.json({ message: \"Grade submitted successfully\" })\n  } catch (error) {\n    console.error(\"[v0] Grade submission error:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n","size_bytes":1381},"next-env.d.ts":{"content":"/// <reference types=\"next\" />\n/// <reference types=\"next/image-types/global\" />\nimport \"./.next/dev/types/routes.d.ts\";\n\n// NOTE: This file should not be edited\n// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.\n","size_bytes":251},"app/api/download/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { readFile } from \"fs/promises\"\nimport { join } from \"path\"\nimport { getSession } from \"@/lib/auth\"\nimport { getDb } from \"@/lib/mongodb\"\nimport { ObjectId } from \"mongodb\"\n\nconst CONTENT_TYPES: Record<string, string> = {\n  \".pdf\": \"application/pdf\",\n  \".doc\": \"application/msword\",\n  \".docx\": \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n  \".ppt\": \"application/vnd.ms-powerpoint\",\n  \".pptx\": \"application/vnd.openxmlformats-officedocument.presentationml.presentation\",\n  \".mp4\": \"video/mp4\",\n  \".mp3\": \"audio/mpeg\",\n  \".zip\": \"application/zip\"\n}\n\nexport async function GET(request: NextRequest) {\n  try {\n    const session = await getSession()\n    if (!session) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const searchParams = request.nextUrl.searchParams\n    const materialId = searchParams.get(\"materialId\")\n    const submissionId = searchParams.get(\"submissionId\")\n\n    if (!materialId && !submissionId) {\n      return NextResponse.json({ error: \"Resource ID is required\" }, { status: 400 })\n    }\n\n    const db = await getDb()\n    let tokenId: string\n    let authorized = false\n\n    if (materialId) {\n      const material = await db.collection(\"materials\").findOne({ _id: new ObjectId(materialId) })\n      if (!material) {\n        return NextResponse.json({ error: \"Material not found\" }, { status: 404 })\n      }\n\n      authorized = true\n\n      tokenId = material.fileUrl\n    } else if (submissionId) {\n      const submission = await db.collection(\"submissions\").findOne({ _id: new ObjectId(submissionId) })\n      if (!submission) {\n        return NextResponse.json({ error: \"Submission not found\" }, { status: 404 })\n      }\n\n      if ([\"teacher\", \"admin\", \"head\"].includes(session.role as string)) {\n        authorized = true\n      } else if (session.role === \"student\" && submission.studentId === session.userId) {\n        authorized = true\n      }\n\n      tokenId = submission.fileUrl\n    } else {\n      return NextResponse.json({ error: \"Invalid request\" }, { status: 400 })\n    }\n\n    if (!authorized) {\n      return NextResponse.json({ error: \"Access denied\" }, { status: 403 })\n    }\n\n    const isUUID = tokenId.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)\n    \n    if (isUUID) {\n      const uploadAsset = await db.collection(\"uploads\").findOne({ tokenId })\n      if (!uploadAsset) {\n        return NextResponse.json({ error: \"File not found\" }, { status: 404 })\n      }\n\n      const filePath = join(process.cwd(), uploadAsset.storagePath)\n      const fileBuffer = await readFile(filePath)\n      \n      const extension = `.${uploadAsset.originalName.split('.').pop()?.toLowerCase() || ''}`\n      const contentType = CONTENT_TYPES[extension] || uploadAsset.mimeType || \"application/octet-stream\"\n\n      return new NextResponse(fileBuffer, {\n        headers: {\n          \"Content-Type\": contentType,\n          \"Content-Disposition\": `attachment; filename=\"${uploadAsset.originalName}\"`,\n          \"Cache-Control\": \"no-cache, no-store, must-revalidate\",\n          \"X-Content-Type-Options\": \"nosniff\"\n        }\n      })\n    } else if (tokenId.startsWith(\"http://\") || tokenId.startsWith(\"https://\")) {\n      return NextResponse.redirect(tokenId)\n    } else if (tokenId.startsWith(\"/uploads/\") || tokenId.startsWith(\"/api/download\")) {\n      const legacyPath = tokenId.startsWith(\"/api/download\") \n        ? tokenId.split(\"file=\")[1]?.split(\"&\")[0] \n        : tokenId.replace(/^\\/uploads\\//, \"uploads/\")\n\n      if (!legacyPath) {\n        return NextResponse.json({ error: \"Invalid legacy file path\" }, { status: 400 })\n      }\n\n      const filePath = join(process.cwd(), \"public\", legacyPath.startsWith(\"uploads/\") ? legacyPath : `uploads/${legacyPath}`)\n      \n      try {\n        const fileBuffer = await readFile(filePath)\n        const fileName = legacyPath.split('/').pop() || \"download\"\n        const extension = `.${fileName.split('.').pop()?.toLowerCase() || ''}`\n        const contentType = CONTENT_TYPES[extension] || \"application/octet-stream\"\n\n        return new NextResponse(fileBuffer, {\n          headers: {\n            \"Content-Type\": contentType,\n            \"Content-Disposition\": `attachment; filename=\"${fileName}\"`,\n            \"Cache-Control\": \"no-cache, no-store, must-revalidate\",\n            \"X-Content-Type-Options\": \"nosniff\"\n          }\n        })\n      } catch (error) {\n        return NextResponse.json({ error: \"Legacy file not found\" }, { status: 404 })\n      }\n    } else {\n      return NextResponse.json({ \n        error: \"Invalid file reference\" \n      }, { status: 400 })\n    }\n  } catch (error) {\n    console.error(\"Download error:\", error)\n    return NextResponse.json({ error: \"Failed to download file\" }, { status: 500 })\n  }\n}\n","size_bytes":4841},"components/ui/separator.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as SeparatorPrimitive from '@radix-ui/react-separator'\n\nimport { cn } from '@/lib/utils'\n\nfunction Separator({\n  className,\n  orientation = 'horizontal',\n  decorative = true,\n  ...props\n}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {\n  return (\n    <SeparatorPrimitive.Root\n      data-slot=\"separator\"\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        'bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Separator }\n","size_bytes":700},"components/ui/alert-dialog.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as AlertDialogPrimitive from '@radix-ui/react-alert-dialog'\n\nimport { cn } from '@/lib/utils'\nimport { buttonVariants } from '@/components/ui/button'\n\nfunction AlertDialog({\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Root>) {\n  return <AlertDialogPrimitive.Root data-slot=\"alert-dialog\" {...props} />\n}\n\nfunction AlertDialogTrigger({\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Trigger>) {\n  return (\n    <AlertDialogPrimitive.Trigger data-slot=\"alert-dialog-trigger\" {...props} />\n  )\n}\n\nfunction AlertDialogPortal({\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Portal>) {\n  return (\n    <AlertDialogPrimitive.Portal data-slot=\"alert-dialog-portal\" {...props} />\n  )\n}\n\nfunction AlertDialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Overlay>) {\n  return (\n    <AlertDialogPrimitive.Overlay\n      data-slot=\"alert-dialog-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Content>) {\n  return (\n    <AlertDialogPortal>\n      <AlertDialogOverlay />\n      <AlertDialogPrimitive.Content\n        data-slot=\"alert-dialog-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\n          className,\n        )}\n        {...props}\n      />\n    </AlertDialogPortal>\n  )\n}\n\nfunction AlertDialogHeader({\n  className,\n  ...props\n}: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"alert-dialog-header\"\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogFooter({\n  className,\n  ...props\n}: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"alert-dialog-footer\"\n      className={cn(\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Title>) {\n  return (\n    <AlertDialogPrimitive.Title\n      data-slot=\"alert-dialog-title\"\n      className={cn('text-lg font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Description>) {\n  return (\n    <AlertDialogPrimitive.Description\n      data-slot=\"alert-dialog-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogAction({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Action>) {\n  return (\n    <AlertDialogPrimitive.Action\n      className={cn(buttonVariants(), className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogCancel({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Cancel>) {\n  return (\n    <AlertDialogPrimitive.Cancel\n      className={cn(buttonVariants({ variant: 'outline' }), className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":3867},"components/ui/button.tsx":{"content":"import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n","size_bytes":2143},"components/ui/select.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as SelectPrimitive from '@radix-ui/react-select'\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  size = 'default',\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: 'sm' | 'default'\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = 'popper',\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md',\n          position === 'popper' &&\n            'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\n          className,\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            'p-1',\n            position === 'popper' &&\n              'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1',\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn('text-muted-foreground px-2 py-1.5 text-xs', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn('bg-border pointer-events-none -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n","size_bytes":6259},"app/api/upload/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { writeFile, mkdir } from \"fs/promises\"\nimport { join } from \"path\"\nimport { getSession } from \"@/lib/auth\"\nimport { getDb } from \"@/lib/mongodb\"\nimport type { UploadAsset } from \"@/lib/models\"\nimport { randomUUID } from \"crypto\"\n\nconst MAX_FILE_SIZE = 50 * 1024 * 1024\n\nconst ALLOWED_EXTENSIONS = {\n  material: [\".pdf\", \".doc\", \".docx\", \".ppt\", \".pptx\", \".mp4\", \".mp3\", \".zip\"],\n  assignment: [\".pdf\", \".doc\", \".docx\", \".ppt\", \".pptx\", \".mp4\", \".zip\"],\n  submission: [\".pdf\", \".doc\", \".docx\", \".ppt\", \".pptx\", \".zip\"]\n}\n\nconst ALLOWED_MIME_TYPES = {\n  material: [\n    \"application/pdf\",\n    \"application/msword\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n    \"application/vnd.ms-powerpoint\",\n    \"application/vnd.openxmlformats-officedocument.presentationml.presentation\",\n    \"video/mp4\",\n    \"audio/mpeg\",\n    \"application/zip\",\n    \"application/x-zip-compressed\"\n  ],\n  assignment: [\n    \"application/pdf\",\n    \"application/msword\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n    \"application/vnd.ms-powerpoint\",\n    \"application/vnd.openxmlformats-officedocument.presentationml.presentation\",\n    \"video/mp4\",\n    \"application/zip\",\n    \"application/x-zip-compressed\"\n  ],\n  submission: [\n    \"application/pdf\",\n    \"application/msword\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n    \"application/vnd.ms-powerpoint\",\n    \"application/vnd.openxmlformats-officedocument.presentationml.presentation\",\n    \"application/zip\",\n    \"application/x-zip-compressed\"\n  ]\n}\n\nconst ROLE_PERMISSIONS = {\n  material: [\"teacher\", \"admin\", \"head\"],\n  assignment: [\"teacher\", \"admin\", \"head\"],\n  submission: [\"student\"]\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await getSession()\n    if (!session) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const formData = await request.formData()\n    const file = formData.get(\"file\") as File\n    const type = formData.get(\"type\") as string\n\n    if (!file) {\n      return NextResponse.json({ error: \"No file provided\" }, { status: 400 })\n    }\n\n    if (!type || ![\"material\", \"assignment\", \"submission\"].includes(type)) {\n      return NextResponse.json({ error: \"Invalid upload type\" }, { status: 400 })\n    }\n\n    const userRole = session.role as string\n    const allowedRoles = ROLE_PERMISSIONS[type as keyof typeof ROLE_PERMISSIONS]\n    if (!allowedRoles.includes(userRole)) {\n      return NextResponse.json({ error: \"Insufficient permissions\" }, { status: 403 })\n    }\n\n    if (file.size > MAX_FILE_SIZE) {\n      return NextResponse.json({ \n        error: `File size exceeds maximum allowed size of ${MAX_FILE_SIZE / 1024 / 1024}MB` \n      }, { status: 400 })\n    }\n\n    const fileExtension = `.${file.name.split('.').pop()?.toLowerCase() || ''}`\n    const allowedExtensions = ALLOWED_EXTENSIONS[type as keyof typeof ALLOWED_EXTENSIONS]\n    if (!allowedExtensions.includes(fileExtension)) {\n      return NextResponse.json({ \n        error: `Invalid file extension. Allowed types: ${allowedExtensions.join(', ')}` \n      }, { status: 400 })\n    }\n\n    const allowedTypes = ALLOWED_MIME_TYPES[type as keyof typeof ALLOWED_MIME_TYPES]\n    if (!allowedTypes.includes(file.type)) {\n      return NextResponse.json({ \n        error: \"Invalid file type. Please upload PDF, Word, PowerPoint, or ZIP files only.\" \n      }, { status: 400 })\n    }\n\n    const bytes = await file.arrayBuffer()\n    const buffer = Buffer.from(bytes)\n\n    const tokenId = randomUUID()\n    const timestamp = Date.now()\n    const extension = file.name.split('.').pop()?.toLowerCase() || 'bin'\n    const baseFileName = file.name.substring(0, file.name.lastIndexOf('.')) || file.name\n    const sanitizedBaseName = baseFileName.replace(/[^a-zA-Z0-9-]/g, \"_\").substring(0, 100)\n    const fileName = `${timestamp}-${tokenId}.${extension}`\n    \n    const uploadDir = join(process.cwd(), \"uploads\", `${type}s`)\n    await mkdir(uploadDir, { recursive: true })\n    \n    const filePath = join(uploadDir, fileName)\n    const storagePath = `uploads/${type}s/${fileName}`\n    await writeFile(filePath, buffer)\n\n    const db = await getDb()\n    const uploadType = type as \"material\" | \"assignment\" | \"submission\"\n    const uploadAsset = {\n      tokenId,\n      uploadedBy: session.userId as string,\n      originalName: file.name,\n      storagePath,\n      mimeType: file.type,\n      size: file.size,\n      type: uploadType,\n      claimed: false,\n      createdAt: new Date(),\n      expiresAt: new Date(Date.now() + 24 * 60 * 60 * 1000)\n    }\n    \n    await db.collection(\"uploads\").insertOne(uploadAsset)\n\n    return NextResponse.json({ \n      success: true, \n      tokenId,\n      originalName: file.name,\n      size: file.size\n    })\n  } catch (error) {\n    console.error(\"Upload error:\", error)\n    return NextResponse.json({ error: \"Failed to upload file\" }, { status: 500 })\n  }\n}\n","size_bytes":5019},"app/layout.tsx":{"content":"import type React from \"react\"\nimport type { Metadata } from \"next\"\nimport { Geist, Geist_Mono } from \"next/font/google\"\nimport { Analytics } from \"@vercel/analytics/next\"\nimport \"./globals.css\"\nimport { AuthProvider } from \"@/components/auth-provider\"\nimport { Toaster } from \"@/components/ui/toaster\"\nimport { ThemeProvider } from \"next-themes\"\n\nconst _geist = Geist({ subsets: [\"latin\"] })\nconst _geistMono = Geist_Mono({ subsets: [\"latin\"] })\n\nexport const metadata: Metadata = {\n  title: \"Woldia University E-Learning System\",\n  description: \"Modern e-learning platform for Woldia University students and faculty\",\n  generator: \"v0.app\",\n  icons: {\n    icon: [\n      {\n        url: \"/icon-light-32x32.png\",\n        media: \"(prefers-color-scheme: light)\",\n      },\n      {\n        url: \"/icon-dark-32x32.png\",\n        media: \"(prefers-color-scheme: dark)\",\n      },\n      {\n        url: \"/icon.svg\",\n        type: \"image/svg+xml\",\n      },\n    ],\n    apple: \"/apple-icon.png\",\n  },\n}\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode\n}>) {\n  return (\n    <html lang=\"en\" suppressHydrationWarning>\n      <body className={`font-sans antialiased`}>\n        <ThemeProvider attribute=\"class\" defaultTheme=\"system\" enableSystem disableTransitionOnChange>\n          <AuthProvider>\n            {children}\n            <Toaster />\n          </AuthProvider>\n        </ThemeProvider>\n        <Analytics />\n      </body>\n    </html>\n  )\n}\n","size_bytes":1472},"app/student/messages/page.tsx":{"content":"\"use client\"\n\nimport type React from \"react\"\n\nimport { useState, useEffect, useRef } from \"react\"\nimport { useAuth } from \"@/components/auth-provider\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Send, RefreshCw } from \"lucide-react\"\nimport { toast } from \"sonner\"\n\ninterface Message {\n  _id: string\n  senderId: string\n  senderName: string\n  senderRole: string\n  content: string\n  createdAt: string\n}\n\nexport default function StudentMessagesPage() {\n  const { token, user } = useAuth()\n  const [messages, setMessages] = useState<Message[]>([])\n  const [newMessage, setNewMessage] = useState(\"\")\n  const [loading, setLoading] = useState(false)\n  const [sending, setSending] = useState(false)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\n  }\n\n  const fetchMessages = async () => {\n    try {\n      setLoading(true)\n      const response = await fetch(\"/api/messages\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        setMessages(data)\n        setTimeout(scrollToBottom, 100)\n      }\n    } catch (error) {\n      console.error(\"Error fetching messages:\", error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchMessages()\n    const interval = setInterval(fetchMessages, 10000) // Refresh every 10 seconds\n    return () => clearInterval(interval)\n  }, [token])\n\n  const handleSendMessage = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!newMessage.trim()) return\n\n    try {\n      setSending(true)\n      const response = await fetch(\"/api/messages\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({ content: newMessage }),\n      })\n\n      if (response.ok) {\n        setNewMessage(\"\")\n        fetchMessages()\n        toast.success(\"Message sent\")\n      } else {\n        toast.error(\"Failed to send message\")\n      }\n    } catch (error) {\n      console.error(\"Error sending message:\", error)\n      toast.error(\"Failed to send message\")\n    } finally {\n      setSending(false)\n    }\n  }\n\n  const getRoleBadgeColor = (role: string) => {\n    switch (role) {\n      case \"admin\":\n        return \"bg-destructive text-destructive-foreground\"\n      case \"teacher\":\n        return \"bg-primary text-primary-foreground\"\n      case \"head\":\n        return \"bg-accent text-accent-foreground\"\n      default:\n        return \"bg-muted text-muted-foreground\"\n    }\n  }\n\n  return (\n    <div className=\"container mx-auto p-6 max-w-4xl\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <h1 className=\"text-3xl font-bold\">Communication Center</h1>\n        <Button variant=\"outline\" size=\"sm\" onClick={fetchMessages} disabled={loading}>\n          <RefreshCw className={`h-4 w-4 mr-2 ${loading ? \"animate-spin\" : \"\"}`} />\n          Refresh\n        </Button>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Group Chat</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {/* Messages Display */}\n          <div className=\"h-[500px] overflow-y-auto mb-4 space-y-4 p-4 bg-muted/30 rounded-lg\">\n            {messages.length === 0 ? (\n              <div className=\"flex items-center justify-center h-full text-muted-foreground\">\n                No messages yet. Start the conversation!\n              </div>\n            ) : (\n              messages.map((message) => {\n                const isOwnMessage = message.senderId === user?._id\n                return (\n                  <div key={message._id} className={`flex ${isOwnMessage ? \"justify-end\" : \"justify-start\"} mb-2`}>\n                    <div className={`max-w-[70%] ${isOwnMessage ? \"items-end\" : \"items-start\"} flex flex-col gap-1`}>\n                      {!isOwnMessage && (\n                        <div className=\"flex items-center gap-2 px-1\">\n                          <span className=\"text-sm font-semibold text-primary\">\n                            {message.senderName || \"Unknown User\"}\n                          </span>\n                          <span className={`text-xs px-2 py-0.5 rounded-full ${getRoleBadgeColor(message.senderRole)}`}>\n                            {message.senderRole}\n                          </span>\n                        </div>\n                      )}\n                      <div\n                        className={`px-4 py-2 rounded-2xl shadow-sm ${\n                          isOwnMessage \n                            ? \"bg-primary text-primary-foreground rounded-tr-md\" \n                            : \"bg-card border rounded-tl-md\"\n                        }`}\n                      >\n                        <p className=\"text-sm whitespace-pre-wrap break-words\">{message.content}</p>\n                        <p\n                          className={`text-xs mt-1 ${\n                            isOwnMessage ? \"text-primary-foreground/70 text-right\" : \"text-muted-foreground\"\n                          }`}\n                        >\n                          {new Date(message.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                )\n              })\n            )}\n            <div ref={messagesEndRef} />\n          </div>\n\n          {/* Message Input */}\n          <form onSubmit={handleSendMessage} className=\"flex gap-2\">\n            <Textarea\n              placeholder=\"Type your message...\"\n              value={newMessage}\n              onChange={(e) => setNewMessage(e.target.value)}\n              className=\"min-h-[60px]\"\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\" && !e.shiftKey) {\n                  e.preventDefault()\n                  handleSendMessage(e)\n                }\n              }}\n            />\n            <Button type=\"submit\" disabled={sending || !newMessage.trim()} className=\"self-end\">\n              <Send className=\"h-4 w-4 mr-2\" />\n              Send\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n","size_bytes":6407},"components/theme-provider.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport {\n  ThemeProvider as NextThemesProvider,\n  type ThemeProviderProps,\n} from 'next-themes'\n\nexport function ThemeProvider({ children, ...props }: ThemeProviderProps) {\n  return <NextThemesProvider {...props}>{children}</NextThemesProvider>\n}\n","size_bytes":292},"components/ui/empty.tsx":{"content":"import { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nfunction Empty({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"empty\"\n      className={cn(\n        'flex min-w-0 flex-1 flex-col items-center justify-center gap-6 rounded-lg border-dashed p-6 text-center text-balance md:p-12',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"empty-header\"\n      className={cn(\n        'flex max-w-sm flex-col items-center gap-2 text-center',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nconst emptyMediaVariants = cva(\n  'flex shrink-0 items-center justify-center mb-2 [&_svg]:pointer-events-none [&_svg]:shrink-0',\n  {\n    variants: {\n      variant: {\n        default: 'bg-transparent',\n        icon: \"bg-muted text-foreground flex size-10 shrink-0 items-center justify-center rounded-lg [&_svg:not([class*='size-'])]:size-6\",\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction EmptyMedia({\n  className,\n  variant = 'default',\n  ...props\n}: React.ComponentProps<'div'> & VariantProps<typeof emptyMediaVariants>) {\n  return (\n    <div\n      data-slot=\"empty-icon\"\n      data-variant={variant}\n      className={cn(emptyMediaVariants({ variant, className }))}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"empty-title\"\n      className={cn('text-lg font-medium tracking-tight', className)}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyDescription({ className, ...props }: React.ComponentProps<'p'>) {\n  return (\n    <div\n      data-slot=\"empty-description\"\n      className={cn(\n        'text-muted-foreground [&>a:hover]:text-primary text-sm/relaxed [&>a]:underline [&>a]:underline-offset-4',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"empty-content\"\n      className={cn(\n        'flex w-full max-w-sm min-w-0 flex-col items-center gap-4 text-sm text-balance',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Empty,\n  EmptyHeader,\n  EmptyTitle,\n  EmptyDescription,\n  EmptyContent,\n  EmptyMedia,\n}\n","size_bytes":2401},"components/ui/field.tsx":{"content":"'use client'\n\nimport { useMemo } from 'react'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\nimport { Label } from '@/components/ui/label'\nimport { Separator } from '@/components/ui/separator'\n\nfunction FieldSet({ className, ...props }: React.ComponentProps<'fieldset'>) {\n  return (\n    <fieldset\n      data-slot=\"field-set\"\n      className={cn(\n        'flex flex-col gap-6',\n        'has-[>[data-slot=checkbox-group]]:gap-3 has-[>[data-slot=radio-group]]:gap-3',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldLegend({\n  className,\n  variant = 'legend',\n  ...props\n}: React.ComponentProps<'legend'> & { variant?: 'legend' | 'label' }) {\n  return (\n    <legend\n      data-slot=\"field-legend\"\n      data-variant={variant}\n      className={cn(\n        'mb-3 font-medium',\n        'data-[variant=legend]:text-base',\n        'data-[variant=label]:text-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldGroup({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"field-group\"\n      className={cn(\n        'group/field-group @container/field-group flex w-full flex-col gap-7 data-[slot=checkbox-group]:gap-3 [&>[data-slot=field-group]]:gap-4',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nconst fieldVariants = cva(\n  'group/field flex w-full gap-3 data-[invalid=true]:text-destructive',\n  {\n    variants: {\n      orientation: {\n        vertical: ['flex-col [&>*]:w-full [&>.sr-only]:w-auto'],\n        horizontal: [\n          'flex-row items-center',\n          '[&>[data-slot=field-label]]:flex-auto',\n          'has-[>[data-slot=field-content]]:items-start has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px',\n        ],\n        responsive: [\n          'flex-col [&>*]:w-full [&>.sr-only]:w-auto @md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto',\n          '@md/field-group:[&>[data-slot=field-label]]:flex-auto',\n          '@md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px',\n        ],\n      },\n    },\n    defaultVariants: {\n      orientation: 'vertical',\n    },\n  },\n)\n\nfunction Field({\n  className,\n  orientation = 'vertical',\n  ...props\n}: React.ComponentProps<'div'> & VariantProps<typeof fieldVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"field\"\n      data-orientation={orientation}\n      className={cn(fieldVariants({ orientation }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction FieldContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"field-content\"\n      className={cn(\n        'group/field-content flex flex-1 flex-col gap-1.5 leading-snug',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof Label>) {\n  return (\n    <Label\n      data-slot=\"field-label\"\n      className={cn(\n        'group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-[disabled=true]/field:opacity-50',\n        'has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border [&>*]:data-[slot=field]:p-4',\n        'has-data-[state=checked]:bg-primary/5 has-data-[state=checked]:border-primary dark:has-data-[state=checked]:bg-primary/10',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"field-label\"\n      className={cn(\n        'flex w-fit items-center gap-2 text-sm leading-snug font-medium group-data-[disabled=true]/field:opacity-50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldDescription({ className, ...props }: React.ComponentProps<'p'>) {\n  return (\n    <p\n      data-slot=\"field-description\"\n      className={cn(\n        'text-muted-foreground text-sm leading-normal font-normal group-has-[[data-orientation=horizontal]]/field:text-balance',\n        'last:mt-0 nth-last-2:-mt-1 [[data-variant=legend]+&]:-mt-1.5',\n        '[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldSeparator({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<'div'> & {\n  children?: React.ReactNode\n}) {\n  return (\n    <div\n      data-slot=\"field-separator\"\n      data-content={!!children}\n      className={cn(\n        'relative -my-2 h-5 text-sm group-data-[variant=outline]/field-group:-mb-2',\n        className,\n      )}\n      {...props}\n    >\n      <Separator className=\"absolute inset-0 top-1/2\" />\n      {children && (\n        <span\n          className=\"bg-background text-muted-foreground relative mx-auto block w-fit px-2\"\n          data-slot=\"field-separator-content\"\n        >\n          {children}\n        </span>\n      )}\n    </div>\n  )\n}\n\nfunction FieldError({\n  className,\n  children,\n  errors,\n  ...props\n}: React.ComponentProps<'div'> & {\n  errors?: Array<{ message?: string } | undefined>\n}) {\n  const content = useMemo(() => {\n    if (children) {\n      return children\n    }\n\n    if (!errors) {\n      return null\n    }\n\n    if (errors.length === 1 && errors[0]?.message) {\n      return errors[0].message\n    }\n\n    return (\n      <ul className=\"ml-4 flex list-disc flex-col gap-1\">\n        {errors.map(\n          (error, index) =>\n            error?.message && <li key={index}>{error.message}</li>,\n        )}\n      </ul>\n    )\n  }, [children, errors])\n\n  if (!content) {\n    return null\n  }\n\n  return (\n    <div\n      role=\"alert\"\n      data-slot=\"field-error\"\n      className={cn('text-destructive text-sm font-normal', className)}\n      {...props}\n    >\n      {content}\n    </div>\n  )\n}\n\nexport {\n  Field,\n  FieldLabel,\n  FieldDescription,\n  FieldError,\n  FieldGroup,\n  FieldLegend,\n  FieldSeparator,\n  FieldSet,\n  FieldContent,\n  FieldTitle,\n}\n","size_bytes":6055},"components/ui/card.tsx":{"content":"import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1990},"components/ui/label.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as LabelPrimitive from '@radix-ui/react-label'\n\nimport { cn } from '@/lib/utils'\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        'flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n","size_bytes":612},"components/ui/switch.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as SwitchPrimitive from '@radix-ui/react-switch'\n\nimport { cn } from '@/lib/utils'\n\nfunction Switch({\n  className,\n  ...props\n}: React.ComponentProps<typeof SwitchPrimitive.Root>) {\n  return (\n    <SwitchPrimitive.Root\n      data-slot=\"switch\"\n      className={cn(\n        'peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    >\n      <SwitchPrimitive.Thumb\n        data-slot=\"switch-thumb\"\n        className={\n          'bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0'\n        }\n      />\n    </SwitchPrimitive.Root>\n  )\n}\n\nexport { Switch }\n","size_bytes":1174},"components/student-nav.tsx":{"content":"\"use client\"\n\nimport Link from \"next/link\"\nimport { usePathname } from \"next/navigation\"\nimport { useAuth } from \"@/components/auth-provider\"\nimport { Button } from \"@/components/ui/button\"\nimport { GraduationCap, BookOpen, FileText, MessageSquare, Newspaper, User, LogOut } from \"lucide-react\"\nimport { ThemeToggle } from \"@/components/theme-toggle\"\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\"\n\nexport function StudentNav() {\n  const pathname = usePathname()\n  const { user, logout } = useAuth()\n\n  const navItems = [\n    { href: \"/student\", label: \"Dashboard\", icon: GraduationCap },\n    { href: \"/student/courses\", label: \"My Courses\", icon: BookOpen },\n    { href: \"/student/assignments\", label: \"Assignments\", icon: FileText },\n    { href: \"/student/messages\", label: \"Messages\", icon: MessageSquare },\n    { href: \"/student/news\", label: \"News\", icon: Newspaper },\n  ]\n\n  return (\n    <nav className=\"bg-white dark:bg-slate-950 border-b border-border\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"flex items-center justify-between h-16\">\n          <div className=\"flex items-center gap-8\">\n            <Link href=\"/student\" className=\"flex items-center gap-2\">\n              <GraduationCap className=\"h-6 w-6 text-primary\" />\n              <span className=\"font-bold text-lg\">WDU ELS</span>\n            </Link>\n            <div className=\"hidden md:flex items-center gap-1\">\n              {navItems.map((item) => {\n                const Icon = item.icon\n                const isActive = pathname === item.href\n                return (\n                  <Link key={item.href} href={item.href}>\n                    <Button variant={isActive ? \"default\" : \"ghost\"} size=\"sm\" className=\"gap-2\">\n                      <Icon className=\"h-4 w-4\" />\n                      {item.label}\n                    </Button>\n                  </Link>\n                )\n              })}\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <ThemeToggle />\n            <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"ghost\" size=\"sm\" className=\"gap-2\">\n                <User className=\"h-4 w-4\" />\n                <span className=\"hidden md:inline\">{user?.firstName}</span>\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\" className=\"w-56\">\n              <DropdownMenuLabel>\n                <div className=\"flex flex-col\">\n                  <span className=\"font-medium\">\n                    {user?.firstName} {user?.lastName}\n                  </span>\n                  <span className=\"text-xs text-muted-foreground\">{user?.email}</span>\n                </div>\n              </DropdownMenuLabel>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem asChild>\n                <Link href=\"/student/profile\">Profile Settings</Link>\n              </DropdownMenuItem>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem onClick={() => logout()} className=\"text-destructive\">\n                <LogOut className=\"h-4 w-4 mr-2\" />\n                Logout\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n          </div>\n        </div>\n      </div>\n    </nav>\n  )\n}\n","size_bytes":3431},"app/api/auth/logout/route.ts":{"content":"import { NextResponse } from \"next/server\"\nimport { clearSession } from \"@/lib/auth\"\n\nexport async function POST() {\n  await clearSession()\n  return NextResponse.json({ message: \"Logged out successfully\" })\n}\n","size_bytes":209},"styles/globals.css":{"content":"@import 'tailwindcss';\n@import 'tw-animate-css';\n\n@custom-variant dark (&:is(.dark *));\n\n:root {\n  --background: oklch(1 0 0);\n  --foreground: oklch(0.145 0 0);\n  --card: oklch(1 0 0);\n  --card-foreground: oklch(0.145 0 0);\n  --popover: oklch(1 0 0);\n  --popover-foreground: oklch(0.145 0 0);\n  --primary: oklch(0.205 0 0);\n  --primary-foreground: oklch(0.985 0 0);\n  --secondary: oklch(0.97 0 0);\n  --secondary-foreground: oklch(0.205 0 0);\n  --muted: oklch(0.97 0 0);\n  --muted-foreground: oklch(0.556 0 0);\n  --accent: oklch(0.97 0 0);\n  --accent-foreground: oklch(0.205 0 0);\n  --destructive: oklch(0.577 0.245 27.325);\n  --destructive-foreground: oklch(0.577 0.245 27.325);\n  --border: oklch(0.922 0 0);\n  --input: oklch(0.922 0 0);\n  --ring: oklch(0.708 0 0);\n  --chart-1: oklch(0.646 0.222 41.116);\n  --chart-2: oklch(0.6 0.118 184.704);\n  --chart-3: oklch(0.398 0.07 227.392);\n  --chart-4: oklch(0.828 0.189 84.429);\n  --chart-5: oklch(0.769 0.188 70.08);\n  --radius: 0.625rem;\n  --sidebar: oklch(0.985 0 0);\n  --sidebar-foreground: oklch(0.145 0 0);\n  --sidebar-primary: oklch(0.205 0 0);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.97 0 0);\n  --sidebar-accent-foreground: oklch(0.205 0 0);\n  --sidebar-border: oklch(0.922 0 0);\n  --sidebar-ring: oklch(0.708 0 0);\n}\n\n.dark {\n  --background: oklch(0.145 0 0);\n  --foreground: oklch(0.985 0 0);\n  --card: oklch(0.145 0 0);\n  --card-foreground: oklch(0.985 0 0);\n  --popover: oklch(0.145 0 0);\n  --popover-foreground: oklch(0.985 0 0);\n  --primary: oklch(0.985 0 0);\n  --primary-foreground: oklch(0.205 0 0);\n  --secondary: oklch(0.269 0 0);\n  --secondary-foreground: oklch(0.985 0 0);\n  --muted: oklch(0.269 0 0);\n  --muted-foreground: oklch(0.708 0 0);\n  --accent: oklch(0.269 0 0);\n  --accent-foreground: oklch(0.985 0 0);\n  --destructive: oklch(0.396 0.141 25.723);\n  --destructive-foreground: oklch(0.637 0.237 25.331);\n  --border: oklch(0.269 0 0);\n  --input: oklch(0.269 0 0);\n  --ring: oklch(0.439 0 0);\n  --chart-1: oklch(0.488 0.243 264.376);\n  --chart-2: oklch(0.696 0.17 162.48);\n  --chart-3: oklch(0.769 0.188 70.08);\n  --chart-4: oklch(0.627 0.265 303.9);\n  --chart-5: oklch(0.645 0.246 16.439);\n  --sidebar: oklch(0.205 0 0);\n  --sidebar-foreground: oklch(0.985 0 0);\n  --sidebar-primary: oklch(0.488 0.243 264.376);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.269 0 0);\n  --sidebar-accent-foreground: oklch(0.985 0 0);\n  --sidebar-border: oklch(0.269 0 0);\n  --sidebar-ring: oklch(0.439 0 0);\n}\n\n@theme inline {\n  --font-sans: 'Geist', 'Geist Fallback';\n  --font-mono: 'Geist Mono', 'Geist Mono Fallback';\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --color-card: var(--card);\n  --color-card-foreground: var(--card-foreground);\n  --color-popover: var(--popover);\n  --color-popover-foreground: var(--popover-foreground);\n  --color-primary: var(--primary);\n  --color-primary-foreground: var(--primary-foreground);\n  --color-secondary: var(--secondary);\n  --color-secondary-foreground: var(--secondary-foreground);\n  --color-muted: var(--muted);\n  --color-muted-foreground: var(--muted-foreground);\n  --color-accent: var(--accent);\n  --color-accent-foreground: var(--accent-foreground);\n  --color-destructive: var(--destructive);\n  --color-destructive-foreground: var(--destructive-foreground);\n  --color-border: var(--border);\n  --color-input: var(--input);\n  --color-ring: var(--ring);\n  --color-chart-1: var(--chart-1);\n  --color-chart-2: var(--chart-2);\n  --color-chart-3: var(--chart-3);\n  --color-chart-4: var(--chart-4);\n  --color-chart-5: var(--chart-5);\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n  --color-sidebar: var(--sidebar);\n  --color-sidebar-foreground: var(--sidebar-foreground);\n  --color-sidebar-primary: var(--sidebar-primary);\n  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);\n  --color-sidebar-accent: var(--sidebar-accent);\n  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);\n  --color-sidebar-border: var(--sidebar-border);\n  --color-sidebar-ring: var(--sidebar-ring);\n}\n\n@layer base {\n  * {\n    @apply border-border outline-ring/50;\n  }\n  body {\n    @apply bg-background text-foreground;\n  }\n}\n","size_bytes":4353},"components/ui/toast.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as ToastPrimitives from '@radix-ui/react-toast'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport { X } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      'fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]',\n      className,\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  'group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full',\n  {\n    variants: {\n      variant: {\n        default: 'border bg-background text-foreground',\n        destructive:\n          'destructive group border-destructive bg-destructive text-destructive-foreground',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      'inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive',\n      className,\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      'absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600',\n      className,\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn('text-sm font-semibold', className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn('text-sm opacity-90', className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4863},"components/teacher-nav.tsx":{"content":"\"use client\"\n\nimport Link from \"next/link\"\nimport { usePathname } from \"next/navigation\"\nimport { useAuth } from \"@/components/auth-provider\"\nimport { Button } from \"@/components/ui/button\"\nimport { GraduationCap, BookOpen, FileText, MessageSquare, Newspaper, User, LogOut, Upload } from \"lucide-react\"\nimport { ThemeToggle } from \"@/components/theme-toggle\"\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\"\n\nexport function TeacherNav() {\n  const pathname = usePathname()\n  const { user, logout } = useAuth()\n\n  const navItems = [\n    { href: \"/teacher\", label: \"Dashboard\", icon: GraduationCap },\n    { href: \"/teacher/courses\", label: \"My Courses\", icon: BookOpen },\n    { href: \"/teacher/assignments\", label: \"Assignments\", icon: FileText },\n    { href: \"/teacher/materials\", label: \"Materials\", icon: Upload },\n    { href: \"/teacher/messages\", label: \"Messages\", icon: MessageSquare },\n    { href: \"/teacher/news\", label: \"News\", icon: Newspaper },\n  ]\n\n  return (\n    <nav className=\"bg-white dark:bg-slate-950 border-b border-border\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"flex items-center justify-between h-16\">\n          <div className=\"flex items-center gap-8\">\n            <Link href=\"/teacher\" className=\"flex items-center gap-2\">\n              <GraduationCap className=\"h-6 w-6 text-primary\" />\n              <span className=\"font-bold text-lg\">WDU ELS</span>\n            </Link>\n            <div className=\"hidden md:flex items-center gap-1\">\n              {navItems.map((item) => {\n                const Icon = item.icon\n                const isActive = pathname === item.href\n                return (\n                  <Link key={item.href} href={item.href}>\n                    <Button variant={isActive ? \"default\" : \"ghost\"} size=\"sm\" className=\"gap-2\">\n                      <Icon className=\"h-4 w-4\" />\n                      {item.label}\n                    </Button>\n                  </Link>\n                )\n              })}\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <ThemeToggle />\n            <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"ghost\" size=\"sm\" className=\"gap-2\">\n                <User className=\"h-4 w-4\" />\n                <span className=\"hidden md:inline\">{user?.firstName}</span>\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\" className=\"w-56\">\n              <DropdownMenuLabel>\n                <div className=\"flex flex-col\">\n                  <span className=\"font-medium\">\n                    {user?.firstName} {user?.lastName}\n                  </span>\n                  <span className=\"text-xs text-muted-foreground\">{user?.email}</span>\n                </div>\n              </DropdownMenuLabel>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem asChild>\n                <Link href=\"/teacher/profile\">Profile Settings</Link>\n              </DropdownMenuItem>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem onClick={() => logout()} className=\"text-destructive\">\n                <LogOut className=\"h-4 w-4 mr-2\" />\n                Logout\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n          </div>\n        </div>\n      </div>\n    </nav>\n  )\n}\n","size_bytes":3509},"app/teacher/layout.tsx":{"content":"\"use client\"\n\nimport type React from \"react\"\n\nimport { useAuth } from \"@/components/auth-provider\"\nimport { useRouter } from \"next/navigation\"\nimport { useEffect } from \"react\"\nimport { TeacherNav } from \"@/components/teacher-nav\"\n\nexport default function TeacherLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  const { user, loading } = useAuth()\n  const router = useRouter()\n\n  useEffect(() => {\n    if (!loading && (!user || user.role !== \"teacher\")) {\n      router.push(\"/login\")\n    }\n  }, [user, loading, router])\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-muted-foreground\">Loading...</div>\n      </div>\n    )\n  }\n\n  if (!user || user.role !== \"teacher\") {\n    return null\n  }\n\n  return (\n    <div className=\"min-h-screen bg-muted/30\">\n      <TeacherNav />\n      <main className=\"container mx-auto px-4 py-8\">{children}</main>\n    </div>\n  )\n}\n","size_bytes":950},"app/about/page.tsx":{"content":"import Link from \"next/link\"\nimport { Button } from \"@/components/ui/button\"\nimport { ArrowLeft, GraduationCap, Users, BookOpen, Target } from \"lucide-react\"\n\nexport default function AboutPage() {\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <header className=\"container mx-auto px-4 py-6 border-b border-border\">\n        <nav className=\"flex items-center justify-between\">\n          <Link href=\"/\" className=\"flex items-center gap-2\">\n            <GraduationCap className=\"h-8 w-8 text-primary\" />\n            <span className=\"text-xl font-bold text-foreground\">Woldia University ELS</span>\n          </Link>\n          <Link href=\"/\">\n            <Button variant=\"ghost\" className=\"gap-2\">\n              <ArrowLeft className=\"h-4 w-4\" />\n              Back to Home\n            </Button>\n          </Link>\n        </nav>\n      </header>\n\n      <main className=\"container mx-auto px-4 py-16 max-w-4xl\">\n        <h1 className=\"text-4xl font-bold mb-8 text-center\">About Woldia University E-Learning System</h1>\n\n        <div className=\"prose prose-lg dark:prose-invert mx-auto mb-16 text-muted-foreground\">\n          <p className=\"leading-relaxed\">\n            Woldia University E-learning System is an innovative educational platform designed to bridge the gap between\n            traditional learning and modern technology. Our system provides a comprehensive digital environment where\n            students and faculty can collaborate, share resources, and engage in the learning process efficiently.\n          </p>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-8 mb-16\">\n          <div className=\"bg-card p-8 rounded-xl border border-border\">\n            <Target className=\"h-10 w-10 text-primary mb-4\" />\n            <h3 className=\"text-xl font-bold mb-3\">Our Mission</h3>\n            <p className=\"text-muted-foreground\">\n              To enhance the quality of education by providing accessible, interactive, and user-friendly digital tools\n              that support both teaching and learning processes at Woldia University.\n            </p>\n          </div>\n          <div className=\"bg-card p-8 rounded-xl border border-border\">\n            <Users className=\"h-10 w-10 text-primary mb-4\" />\n            <h3 className=\"text-xl font-bold mb-3\">Who It's For</h3>\n            <p className=\"text-muted-foreground\">\n              Designed for the entire university community, including students seeking flexible learning options,\n              faculty members managing courses, and administrators overseeing the academic process.\n            </p>\n          </div>\n        </div>\n\n        <div className=\"space-y-12\">\n          <section>\n            <h2 className=\"text-2xl font-bold mb-6 flex items-center gap-2\">\n              <BookOpen className=\"h-6 w-6 text-primary\" />\n              Key Features\n            </h2>\n            <div className=\"grid sm:grid-cols-2 gap-4\">\n              {[\n                \"Comprehensive Course Management\",\n                \"Digital Assignment Submission\",\n                \"Real-time Communication Tools\",\n                \"Resource & Material Distribution\",\n                \"Automated Grading System\",\n                \"University News & Announcements\",\n              ].map((feature, i) => (\n                <div key={i} className=\"flex items-center gap-3 p-4 bg-muted/50 rounded-lg\">\n                  <div className=\"h-2 w-2 rounded-full bg-primary\" />\n                  <span>{feature}</span>\n                </div>\n              ))}\n            </div>\n          </section>\n\n          <section className=\"bg-primary/5 rounded-2xl p-8 text-center\">\n            <h2 className=\"text-2xl font-bold mb-4\">Ready to get started?</h2>\n            <p className=\"text-muted-foreground mb-6\">\n              Join the Woldia University E-Learning community today and transform your educational experience.\n            </p>\n            <div className=\"flex gap-4 justify-center\">\n              <Link href=\"/register\">\n                <Button size=\"lg\">Create Account</Button>\n              </Link>\n              <Link href=\"/login\">\n                <Button size=\"lg\" variant=\"outline\">\n                  Login\n                </Button>\n              </Link>\n            </div>\n          </section>\n        </div>\n      </main>\n\n      <footer className=\"border-t border-border mt-12 py-8\">\n        <div className=\"container mx-auto px-4 text-center text-muted-foreground\">\n          <p>&copy; 2023 Woldia University. All rights reserved.</p>\n        </div>\n      </footer>\n    </div>\n  )\n}\n","size_bytes":4553},"components/ui/tooltip.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as TooltipPrimitive from '@radix-ui/react-tooltip'\n\nimport { cn } from '@/lib/utils'\n\nfunction TooltipProvider({\n  delayDuration = 0,\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Provider>) {\n  return (\n    <TooltipPrimitive.Provider\n      data-slot=\"tooltip-provider\"\n      delayDuration={delayDuration}\n      {...props}\n    />\n  )\n}\n\nfunction Tooltip({\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Root>) {\n  return (\n    <TooltipProvider>\n      <TooltipPrimitive.Root data-slot=\"tooltip\" {...props} />\n    </TooltipProvider>\n  )\n}\n\nfunction TooltipTrigger({\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {\n  return <TooltipPrimitive.Trigger data-slot=\"tooltip-trigger\" {...props} />\n}\n\nfunction TooltipContent({\n  className,\n  sideOffset = 0,\n  children,\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Content>) {\n  return (\n    <TooltipPrimitive.Portal>\n      <TooltipPrimitive.Content\n        data-slot=\"tooltip-content\"\n        sideOffset={sideOffset}\n        className={cn(\n          'bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        <TooltipPrimitive.Arrow className=\"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]\" />\n      </TooltipPrimitive.Content>\n    </TooltipPrimitive.Portal>\n  )\n}\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1893},"app/teacher/profile/page.tsx":{"content":"\"use client\"\n\nimport { useAuth } from \"@/components/auth-provider\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\"\nimport { Badge } from \"@/components/ui/badge\"\n\nexport default function TeacherProfilePage() {\n  const { user } = useAuth()\n\n  if (!user) return null\n\n  return (\n    <div className=\"container mx-auto p-6 max-w-2xl\">\n      <h1 className=\"text-3xl font-bold mb-6\">My Profile</h1>\n\n      <Card>\n        <CardHeader className=\"flex flex-row items-center gap-4 pb-2\">\n          <Avatar className=\"h-20 w-20\">\n            <AvatarImage src={`https://api.dicebear.com/7.x/initials/svg?seed=${user.firstName} ${user.lastName}`} />\n            <AvatarFallback>\n              {user.firstName[0]}\n              {user.lastName[0]}\n            </AvatarFallback>\n          </Avatar>\n          <div className=\"flex flex-col\">\n            <CardTitle className=\"text-2xl\">\n              {user.firstName} {user.lastName}\n            </CardTitle>\n            <div className=\"flex gap-2 mt-2\">\n              <Badge variant=\"outline\" className=\"capitalize\">\n                {user.role}\n              </Badge>\n              {user.department && <Badge variant=\"secondary\">{user.department}</Badge>}\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent className=\"mt-6 space-y-6\">\n          <div className=\"grid gap-1\">\n            <h3 className=\"text-sm font-medium text-muted-foreground\">Email Address</h3>\n            <p className=\"text-base\">{user.email}</p>\n          </div>\n\n          <div className=\"grid gap-1\">\n            <h3 className=\"text-sm font-medium text-muted-foreground\">Department</h3>\n            <p className=\"text-base\">{user.department || \"General Faculty\"}</p>\n          </div>\n\n          <div className=\"grid gap-1\">\n            <h3 className=\"text-sm font-medium text-muted-foreground\">Account Created</h3>\n            <p className=\"text-base\">{new Date(user.createdAt).toLocaleDateString()}</p>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n","size_bytes":2118},"app/student/profile/page.tsx":{"content":"\"use client\"\n\nimport { useAuth } from \"@/components/auth-provider\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\"\nimport { Badge } from \"@/components/ui/badge\"\n\nexport default function StudentProfilePage() {\n  const { user } = useAuth()\n\n  if (!user) return null\n\n  return (\n    <div className=\"container mx-auto p-6 max-w-2xl\">\n      <h1 className=\"text-3xl font-bold mb-6\">My Profile</h1>\n\n      <Card>\n        <CardHeader className=\"flex flex-row items-center gap-4 pb-2\">\n          <Avatar className=\"h-20 w-20\">\n            <AvatarImage src={`https://api.dicebear.com/7.x/initials/svg?seed=${user.firstName} ${user.lastName}`} />\n            <AvatarFallback>\n              {user.firstName[0]}\n              {user.lastName[0]}\n            </AvatarFallback>\n          </Avatar>\n          <div className=\"flex flex-col\">\n            <CardTitle className=\"text-2xl\">\n              {user.firstName} {user.lastName}\n            </CardTitle>\n            <div className=\"flex gap-2 mt-2\">\n              <Badge variant=\"outline\" className=\"capitalize\">\n                {user.role}\n              </Badge>\n              {user.department && <Badge variant=\"secondary\">{user.department}</Badge>}\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent className=\"mt-6 space-y-6\">\n          <div className=\"grid gap-1\">\n            <h3 className=\"text-sm font-medium text-muted-foreground\">Email Address</h3>\n            <p className=\"text-base\">{user.email}</p>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-6\">\n            <div className=\"grid gap-1\">\n              <h3 className=\"text-sm font-medium text-muted-foreground\">Academic Year</h3>\n              <p className=\"text-base\">{user.year || \"Not set\"}</p>\n            </div>\n            <div className=\"grid gap-1\">\n              <h3 className=\"text-sm font-medium text-muted-foreground\">Semester</h3>\n              <p className=\"text-base\">{user.semester || \"Not set\"}</p>\n            </div>\n          </div>\n\n          <div className=\"grid gap-1\">\n            <h3 className=\"text-sm font-medium text-muted-foreground\">Account Created</h3>\n            <p className=\"text-base\">{new Date(user.createdAt).toLocaleDateString()}</p>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n","size_bytes":2401},"app/api/users/[id]/route.ts":{"content":"import { type NextRequest, NextResponse } from \"next/server\"\nimport { getDatabase } from \"@/lib/mongodb\"\nimport { getSession } from \"@/lib/auth\"\nimport { ObjectId } from \"mongodb\"\n\nexport async function DELETE(request: NextRequest, { params }: { params: { id: string } }) {\n  try {\n    const session = await getSession()\n    if (!session || session.role !== \"admin\") {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const db = await getDatabase()\n    const usersCollection = db.collection(\"users\")\n\n    const result = await usersCollection.deleteOne({\n      _id: new ObjectId(params.id),\n    })\n\n    if (result.deletedCount === 0) {\n      return NextResponse.json({ error: \"User not found\" }, { status: 404 })\n    }\n\n    return NextResponse.json({ message: \"User deleted successfully\" })\n  } catch (error) {\n    console.error(\"[v0] Delete user error:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n\nexport async function PATCH(request: NextRequest, { params }: { params: { id: string } }) {\n  try {\n    const session = await getSession()\n    if (!session || session.role !== \"admin\") {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const body = await request.json()\n    const { firstName, lastName, department, year, semester } = body\n\n    const db = await getDatabase()\n    const usersCollection = db.collection(\"users\")\n\n    const updateData: any = { updatedAt: new Date() }\n    if (firstName) updateData.firstName = firstName\n    if (lastName) updateData.lastName = lastName\n    if (department) updateData.department = department\n    if (year) updateData.year = year\n    if (semester) updateData.semester = semester\n\n    const result = await usersCollection.updateOne({ _id: new ObjectId(params.id) }, { $set: updateData })\n\n    if (result.matchedCount === 0) {\n      return NextResponse.json({ error: \"User not found\" }, { status: 404 })\n    }\n\n    return NextResponse.json({ message: \"User updated successfully\" })\n  } catch (error) {\n    console.error(\"[v0] Update user error:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n","size_bytes":2209},"app/api/news/route.ts":{"content":"import { type NextRequest, NextResponse } from \"next/server\"\nimport { getDatabase } from \"@/lib/mongodb\"\nimport { getSession } from \"@/lib/auth\"\nimport type { News } from \"@/lib/models\"\n\nexport async function GET() {\n  try {\n    const db = await getDatabase()\n    const newsCollection = db.collection<News>(\"news\")\n\n    const news = await newsCollection.find({}).sort({ createdAt: -1 }).limit(20).toArray()\n\n    return NextResponse.json({ news })\n  } catch (error) {\n    console.error(\"[v0] Get news error:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await getSession()\n    if (!session || (session.role !== \"admin\" && session.role !== \"head\")) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const body = await request.json()\n    const { title, content } = body\n\n    if (!title || !content) {\n      return NextResponse.json({ error: \"Missing required fields\" }, { status: 400 })\n    }\n\n    const db = await getDatabase()\n    const newsCollection = db.collection<News>(\"news\")\n\n    const newNews: News = {\n      title,\n      content,\n      createdBy: session.userId as string,\n      createdAt: new Date(),\n    }\n\n    const result = await newsCollection.insertOne(newNews)\n\n    return NextResponse.json({ message: \"News created successfully\", newsId: result.insertedId }, { status: 201 })\n  } catch (error) {\n    console.error(\"[v0] Create news error:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n","size_bytes":1621},"components/ui/input.tsx":{"content":"import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n","size_bytes":963},"lib/utils.ts":{"content":"import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"components/ui/use-toast.ts":{"content":"'use client'\n\n// Inspired by react-hot-toast library\nimport * as React from 'react'\n\nimport type { ToastActionElement, ToastProps } from '@/components/ui/toast'\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: 'ADD_TOAST',\n  UPDATE_TOAST: 'UPDATE_TOAST',\n  DISMISS_TOAST: 'DISMISS_TOAST',\n  REMOVE_TOAST: 'REMOVE_TOAST',\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType['ADD_TOAST']\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType['UPDATE_TOAST']\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType['DISMISS_TOAST']\n      toastId?: ToasterToast['id']\n    }\n  | {\n      type: ActionType['REMOVE_TOAST']\n      toastId?: ToasterToast['id']\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: 'REMOVE_TOAST',\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'ADD_TOAST':\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case 'UPDATE_TOAST':\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t,\n        ),\n      }\n\n    case 'DISMISS_TOAST': {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t,\n        ),\n      }\n    }\n    case 'REMOVE_TOAST':\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, 'id'>\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: 'UPDATE_TOAST',\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id })\n\n  dispatch({\n    type: 'ADD_TOAST',\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3945},"components/ui/dropdown-menu.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as DropdownMenuPrimitive from '@radix-ui/react-dropdown-menu'\nimport { CheckIcon, ChevronRightIcon, CircleIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction DropdownMenu({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {\n  return <DropdownMenuPrimitive.Root data-slot=\"dropdown-menu\" {...props} />\n}\n\nfunction DropdownMenuPortal({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {\n  return (\n    <DropdownMenuPrimitive.Portal data-slot=\"dropdown-menu-portal\" {...props} />\n  )\n}\n\nfunction DropdownMenuTrigger({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {\n  return (\n    <DropdownMenuPrimitive.Trigger\n      data-slot=\"dropdown-menu-trigger\"\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuContent({\n  className,\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {\n  return (\n    <DropdownMenuPrimitive.Portal>\n      <DropdownMenuPrimitive.Content\n        data-slot=\"dropdown-menu-content\"\n        sideOffset={sideOffset}\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md',\n          className,\n        )}\n        {...props}\n      />\n    </DropdownMenuPrimitive.Portal>\n  )\n}\n\nfunction DropdownMenuGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {\n  return (\n    <DropdownMenuPrimitive.Group data-slot=\"dropdown-menu-group\" {...props} />\n  )\n}\n\nfunction DropdownMenuItem({\n  className,\n  inset,\n  variant = 'default',\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {\n  inset?: boolean\n  variant?: 'default' | 'destructive'\n}) {\n  return (\n    <DropdownMenuPrimitive.Item\n      data-slot=\"dropdown-menu-item\"\n      data-inset={inset}\n      data-variant={variant}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuCheckboxItem({\n  className,\n  children,\n  checked,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {\n  return (\n    <DropdownMenuPrimitive.CheckboxItem\n      data-slot=\"dropdown-menu-checkbox-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.CheckboxItem>\n  )\n}\n\nfunction DropdownMenuRadioGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {\n  return (\n    <DropdownMenuPrimitive.RadioGroup\n      data-slot=\"dropdown-menu-radio-group\"\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuRadioItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {\n  return (\n    <DropdownMenuPrimitive.RadioItem\n      data-slot=\"dropdown-menu-radio-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CircleIcon className=\"size-2 fill-current\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.RadioItem>\n  )\n}\n\nfunction DropdownMenuLabel({\n  className,\n  inset,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {\n  inset?: boolean\n}) {\n  return (\n    <DropdownMenuPrimitive.Label\n      data-slot=\"dropdown-menu-label\"\n      data-inset={inset}\n      className={cn(\n        'px-2 py-1.5 text-sm font-medium data-[inset]:pl-8',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {\n  return (\n    <DropdownMenuPrimitive.Separator\n      data-slot=\"dropdown-menu-separator\"\n      className={cn('bg-border -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuShortcut({\n  className,\n  ...props\n}: React.ComponentProps<'span'>) {\n  return (\n    <span\n      data-slot=\"dropdown-menu-shortcut\"\n      className={cn(\n        'text-muted-foreground ml-auto text-xs tracking-widest',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuSub({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {\n  return <DropdownMenuPrimitive.Sub data-slot=\"dropdown-menu-sub\" {...props} />\n}\n\nfunction DropdownMenuSubTrigger({\n  className,\n  inset,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {\n  inset?: boolean\n}) {\n  return (\n    <DropdownMenuPrimitive.SubTrigger\n      data-slot=\"dropdown-menu-sub-trigger\"\n      data-inset={inset}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRightIcon className=\"ml-auto size-4\" />\n    </DropdownMenuPrimitive.SubTrigger>\n  )\n}\n\nfunction DropdownMenuSubContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {\n  return (\n    <DropdownMenuPrimitive.SubContent\n      data-slot=\"dropdown-menu-sub-content\"\n      className={cn(\n        'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  DropdownMenu,\n  DropdownMenuPortal,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuLabel,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioGroup,\n  DropdownMenuRadioItem,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuSub,\n  DropdownMenuSubTrigger,\n  DropdownMenuSubContent,\n}\n","size_bytes":8432},"lib/models.ts":{"content":"export interface User {\n  _id?: string\n  email: string\n  password: string\n  role: \"student\" | \"teacher\" | \"admin\" | \"head\"\n  firstName: string\n  lastName: string\n  department?: string\n  year?: number\n  semester?: number\n  createdAt: Date\n  updatedAt: Date\n}\n\nexport interface Course {\n  _id?: string\n  title: string\n  code: string\n  description: string\n  department: string\n  year: number\n  semester: number\n  teacherId: string\n  createdAt: Date\n  updatedAt: Date\n}\n\nexport interface Material {\n  _id?: string\n  courseId: string\n  title: string\n  description: string\n  fileUrl: string\n  fileType: string\n  uploadedBy: string\n  createdAt: Date\n}\n\nexport interface Assignment {\n  _id?: string\n  courseId: string\n  title: string\n  description: string\n  dueDate: Date\n  totalPoints: number\n  fileUrl?: string\n  createdBy: string\n  createdAt: Date\n}\n\nexport interface Submission {\n  _id?: string\n  assignmentId: string\n  studentId: string\n  fileUrl: string\n  submittedAt: Date\n  grade?: number\n  feedback?: string\n  gradedBy?: string\n  gradedAt?: Date\n}\n\nexport interface Message {\n  _id?: string\n  senderId: string\n  senderName: string\n  senderRole: string\n  content: string\n  createdAt: Date\n}\n\nexport interface News {\n  _id?: string\n  title: string\n  content: string\n  createdBy: string\n  createdAt: Date\n}\n\nexport interface UploadAsset {\n  _id?: string\n  tokenId: string\n  uploadedBy: string\n  originalName: string\n  storagePath: string\n  mimeType: string\n  size: number\n  type: \"material\" | \"assignment\" | \"submission\"\n  linkedTo?: string\n  claimed: boolean\n  createdAt: Date\n  expiresAt: Date\n}\n","size_bytes":1596},"components/ui/button-group.tsx":{"content":"import { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\nimport { Separator } from '@/components/ui/separator'\n\nconst buttonGroupVariants = cva(\n  \"flex w-fit items-stretch [&>*]:focus-visible:z-10 [&>*]:focus-visible:relative [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md has-[>[data-slot=button-group]]:gap-2\",\n  {\n    variants: {\n      orientation: {\n        horizontal:\n          '[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none',\n        vertical:\n          'flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none',\n      },\n    },\n    defaultVariants: {\n      orientation: 'horizontal',\n    },\n  },\n)\n\nfunction ButtonGroup({\n  className,\n  orientation,\n  ...props\n}: React.ComponentProps<'div'> & VariantProps<typeof buttonGroupVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"button-group\"\n      data-orientation={orientation}\n      className={cn(buttonGroupVariants({ orientation }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction ButtonGroupText({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'div'> & {\n  asChild?: boolean\n}) {\n  const Comp = asChild ? Slot : 'div'\n\n  return (\n    <Comp\n      className={cn(\n        \"bg-muted flex items-center gap-2 rounded-md border px-4 text-sm font-medium shadow-xs [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ButtonGroupSeparator({\n  className,\n  orientation = 'vertical',\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"button-group-separator\"\n      orientation={orientation}\n      className={cn(\n        'bg-input relative !m-0 self-stretch data-[orientation=vertical]:h-auto',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  ButtonGroup,\n  ButtonGroupSeparator,\n  ButtonGroupText,\n  buttonGroupVariants,\n}\n","size_bytes":2212},"components/ui/menubar.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as MenubarPrimitive from '@radix-ui/react-menubar'\nimport { CheckIcon, ChevronRightIcon, CircleIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Menubar({\n  className,\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Root>) {\n  return (\n    <MenubarPrimitive.Root\n      data-slot=\"menubar\"\n      className={cn(\n        'bg-background flex h-9 items-center gap-1 rounded-md border p-1 shadow-xs',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu data-slot=\"menubar-menu\" {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group data-slot=\"menubar-group\" {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal data-slot=\"menubar-portal\" {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return (\n    <MenubarPrimitive.RadioGroup data-slot=\"menubar-radio-group\" {...props} />\n  )\n}\n\nfunction MenubarTrigger({\n  className,\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Trigger>) {\n  return (\n    <MenubarPrimitive.Trigger\n      data-slot=\"menubar-trigger\"\n      className={cn(\n        'focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex items-center rounded-sm px-2 py-1 text-sm font-medium outline-hidden select-none',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction MenubarContent({\n  className,\n  align = 'start',\n  alignOffset = -4,\n  sideOffset = 8,\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Content>) {\n  return (\n    <MenubarPortal>\n      <MenubarPrimitive.Content\n        data-slot=\"menubar-content\"\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[12rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-md',\n          className,\n        )}\n        {...props}\n      />\n    </MenubarPortal>\n  )\n}\n\nfunction MenubarItem({\n  className,\n  inset,\n  variant = 'default',\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Item> & {\n  inset?: boolean\n  variant?: 'default' | 'destructive'\n}) {\n  return (\n    <MenubarPrimitive.Item\n      data-slot=\"menubar-item\"\n      data-inset={inset}\n      data-variant={variant}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction MenubarCheckboxItem({\n  className,\n  children,\n  checked,\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.CheckboxItem>) {\n  return (\n    <MenubarPrimitive.CheckboxItem\n      data-slot=\"menubar-checkbox-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-xs py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <MenubarPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </MenubarPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </MenubarPrimitive.CheckboxItem>\n  )\n}\n\nfunction MenubarRadioItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioItem>) {\n  return (\n    <MenubarPrimitive.RadioItem\n      data-slot=\"menubar-radio-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-xs py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <MenubarPrimitive.ItemIndicator>\n          <CircleIcon className=\"size-2 fill-current\" />\n        </MenubarPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </MenubarPrimitive.RadioItem>\n  )\n}\n\nfunction MenubarLabel({\n  className,\n  inset,\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Label> & {\n  inset?: boolean\n}) {\n  return (\n    <MenubarPrimitive.Label\n      data-slot=\"menubar-label\"\n      data-inset={inset}\n      className={cn(\n        'px-2 py-1.5 text-sm font-medium data-[inset]:pl-8',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction MenubarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Separator>) {\n  return (\n    <MenubarPrimitive.Separator\n      data-slot=\"menubar-separator\"\n      className={cn('bg-border -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction MenubarShortcut({\n  className,\n  ...props\n}: React.ComponentProps<'span'>) {\n  return (\n    <span\n      data-slot=\"menubar-shortcut\"\n      className={cn(\n        'text-muted-foreground ml-auto text-xs tracking-widest',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nfunction MenubarSubTrigger({\n  className,\n  inset,\n  children,\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.SubTrigger> & {\n  inset?: boolean\n}) {\n  return (\n    <MenubarPrimitive.SubTrigger\n      data-slot=\"menubar-sub-trigger\"\n      data-inset={inset}\n      className={cn(\n        'focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-none select-none data-[inset]:pl-8',\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRightIcon className=\"ml-auto h-4 w-4\" />\n    </MenubarPrimitive.SubTrigger>\n  )\n}\n\nfunction MenubarSubContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.SubContent>) {\n  return (\n    <MenubarPrimitive.SubContent\n      data-slot=\"menubar-sub-content\"\n      className={cn(\n        'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Menubar,\n  MenubarPortal,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarGroup,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarItem,\n  MenubarShortcut,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarSub,\n  MenubarSubTrigger,\n  MenubarSubContent,\n}\n","size_bytes":8404},"app/api/news/[id]/route.ts":{"content":"import { type NextRequest, NextResponse } from \"next/server\"\nimport { getDatabase } from \"@/lib/mongodb\"\nimport { getSession } from \"@/lib/auth\"\nimport { ObjectId } from \"mongodb\"\n\nexport async function DELETE(request: NextRequest, { params }: { params: { id: string } }) {\n  try {\n    const session = await getSession()\n    if (!session || (session.role !== \"admin\" && session.role !== \"head\")) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const db = await getDatabase()\n    const newsCollection = db.collection(\"news\")\n\n    const result = await newsCollection.deleteOne({\n      _id: new ObjectId(params.id),\n    })\n\n    if (result.deletedCount === 0) {\n      return NextResponse.json({ error: \"News not found\" }, { status: 404 })\n    }\n\n    return NextResponse.json({ message: \"News deleted successfully\" })\n  } catch (error) {\n    console.error(\"[v0] Delete news error:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n","size_bytes":1013},"components/ui/context-menu.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as ContextMenuPrimitive from '@radix-ui/react-context-menu'\nimport { CheckIcon, ChevronRightIcon, CircleIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction ContextMenu({\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.Root>) {\n  return <ContextMenuPrimitive.Root data-slot=\"context-menu\" {...props} />\n}\n\nfunction ContextMenuTrigger({\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.Trigger>) {\n  return (\n    <ContextMenuPrimitive.Trigger data-slot=\"context-menu-trigger\" {...props} />\n  )\n}\n\nfunction ContextMenuGroup({\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.Group>) {\n  return (\n    <ContextMenuPrimitive.Group data-slot=\"context-menu-group\" {...props} />\n  )\n}\n\nfunction ContextMenuPortal({\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.Portal>) {\n  return (\n    <ContextMenuPrimitive.Portal data-slot=\"context-menu-portal\" {...props} />\n  )\n}\n\nfunction ContextMenuSub({\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.Sub>) {\n  return <ContextMenuPrimitive.Sub data-slot=\"context-menu-sub\" {...props} />\n}\n\nfunction ContextMenuRadioGroup({\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.RadioGroup>) {\n  return (\n    <ContextMenuPrimitive.RadioGroup\n      data-slot=\"context-menu-radio-group\"\n      {...props}\n    />\n  )\n}\n\nfunction ContextMenuSubTrigger({\n  className,\n  inset,\n  children,\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.SubTrigger> & {\n  inset?: boolean\n}) {\n  return (\n    <ContextMenuPrimitive.SubTrigger\n      data-slot=\"context-menu-sub-trigger\"\n      data-inset={inset}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRightIcon className=\"ml-auto\" />\n    </ContextMenuPrimitive.SubTrigger>\n  )\n}\n\nfunction ContextMenuSubContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.SubContent>) {\n  return (\n    <ContextMenuPrimitive.SubContent\n      data-slot=\"context-menu-sub-content\"\n      className={cn(\n        'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ContextMenuContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.Content>) {\n  return (\n    <ContextMenuPrimitive.Portal>\n      <ContextMenuPrimitive.Content\n        data-slot=\"context-menu-content\"\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md',\n          className,\n        )}\n        {...props}\n      />\n    </ContextMenuPrimitive.Portal>\n  )\n}\n\nfunction ContextMenuItem({\n  className,\n  inset,\n  variant = 'default',\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.Item> & {\n  inset?: boolean\n  variant?: 'default' | 'destructive'\n}) {\n  return (\n    <ContextMenuPrimitive.Item\n      data-slot=\"context-menu-item\"\n      data-inset={inset}\n      data-variant={variant}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ContextMenuCheckboxItem({\n  className,\n  children,\n  checked,\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.CheckboxItem>) {\n  return (\n    <ContextMenuPrimitive.CheckboxItem\n      data-slot=\"context-menu-checkbox-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <ContextMenuPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </ContextMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </ContextMenuPrimitive.CheckboxItem>\n  )\n}\n\nfunction ContextMenuRadioItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.RadioItem>) {\n  return (\n    <ContextMenuPrimitive.RadioItem\n      data-slot=\"context-menu-radio-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <ContextMenuPrimitive.ItemIndicator>\n          <CircleIcon className=\"size-2 fill-current\" />\n        </ContextMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </ContextMenuPrimitive.RadioItem>\n  )\n}\n\nfunction ContextMenuLabel({\n  className,\n  inset,\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.Label> & {\n  inset?: boolean\n}) {\n  return (\n    <ContextMenuPrimitive.Label\n      data-slot=\"context-menu-label\"\n      data-inset={inset}\n      className={cn(\n        'text-foreground px-2 py-1.5 text-sm font-medium data-[inset]:pl-8',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ContextMenuSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.Separator>) {\n  return (\n    <ContextMenuPrimitive.Separator\n      data-slot=\"context-menu-separator\"\n      className={cn('bg-border -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction ContextMenuShortcut({\n  className,\n  ...props\n}: React.ComponentProps<'span'>) {\n  return (\n    <span\n      data-slot=\"context-menu-shortcut\"\n      className={cn(\n        'text-muted-foreground ml-auto text-xs tracking-widest',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":8282},"components/ui/dialog.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { XIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn('text-lg leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n","size_bytes":3985},"components/ui/scroll-area.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as ScrollAreaPrimitive from '@radix-ui/react-scroll-area'\n\nimport { cn } from '@/lib/utils'\n\nfunction ScrollArea({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {\n  return (\n    <ScrollAreaPrimitive.Root\n      data-slot=\"scroll-area\"\n      className={cn('relative', className)}\n      {...props}\n    >\n      <ScrollAreaPrimitive.Viewport\n        data-slot=\"scroll-area-viewport\"\n        className=\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\"\n      >\n        {children}\n      </ScrollAreaPrimitive.Viewport>\n      <ScrollBar />\n      <ScrollAreaPrimitive.Corner />\n    </ScrollAreaPrimitive.Root>\n  )\n}\n\nfunction ScrollBar({\n  className,\n  orientation = 'vertical',\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {\n  return (\n    <ScrollAreaPrimitive.ScrollAreaScrollbar\n      data-slot=\"scroll-area-scrollbar\"\n      orientation={orientation}\n      className={cn(\n        'flex touch-none p-px transition-colors select-none',\n        orientation === 'vertical' &&\n          'h-full w-2.5 border-l border-l-transparent',\n        orientation === 'horizontal' &&\n          'h-2.5 flex-col border-t border-t-transparent',\n        className,\n      )}\n      {...props}\n    >\n      <ScrollAreaPrimitive.ScrollAreaThumb\n        data-slot=\"scroll-area-thumb\"\n        className=\"bg-border relative flex-1 rounded-full\"\n      />\n    </ScrollAreaPrimitive.ScrollAreaScrollbar>\n  )\n}\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1646},"lib/mongodb.ts":{"content":"import { MongoClient, type Db } from \"mongodb\"\n\nlet client: MongoClient | null = null\nlet clientPromise: Promise<MongoClient> | null = null\n\ndeclare global {\n  var _mongoClientPromise: Promise<MongoClient> | undefined\n}\n\nfunction getClientPromise(): Promise<MongoClient> {\n  // Check for MongoDB URI only when actually connecting\n  if (!process.env.MONGODB_URI) {\n    throw new Error(\"Please add your MongoDB URI to .env.local\")\n  }\n\n  if (clientPromise) {\n    return clientPromise\n  }\n\n  const uri = process.env.MONGODB_URI\n\n  const options = {\n    // SSL/TLS options for MongoDB Atlas\n    tls: true,\n    tlsAllowInvalidCertificates: false,\n    tlsAllowInvalidHostnames: false,\n\n    // Connection timeout settings\n    serverSelectionTimeoutMS: 5000,\n    connectTimeoutMS: 10000,\n    socketTimeoutMS: 45000,\n\n    // Connection pool settings\n    maxPoolSize: 10,\n    minPoolSize: 2,\n\n    // Retry settings\n    retryWrites: true,\n    retryReads: true,\n  }\n\n  if (process.env.NODE_ENV === \"development\") {\n    if (!global._mongoClientPromise) {\n      client = new MongoClient(uri, options)\n      global._mongoClientPromise = client.connect()\n    }\n    clientPromise = global._mongoClientPromise\n  } else {\n    client = new MongoClient(uri, options)\n    clientPromise = client.connect()\n  }\n\n  return clientPromise\n}\n\nexport async function getDatabase(): Promise<Db> {\n  const client = await getClientPromise()\n  return client.db(\"woldia_els\")\n}\n\nexport const getDb = getDatabase\n\nexport default getClientPromise\n","size_bytes":1509},"components/ui/aspect-ratio.tsx":{"content":"'use client'\n\nimport * as AspectRatioPrimitive from '@radix-ui/react-aspect-ratio'\n\nfunction AspectRatio({\n  ...props\n}: React.ComponentProps<typeof AspectRatioPrimitive.Root>) {\n  return <AspectRatioPrimitive.Root data-slot=\"aspect-ratio\" {...props} />\n}\n\nexport { AspectRatio }\n","size_bytes":280},"components/theme-toggle.tsx":{"content":"\"use client\"\n\nimport { Moon, Sun } from \"lucide-react\"\nimport { useTheme } from \"next-themes\"\nimport { Button } from \"@/components/ui/button\"\nimport { useEffect, useState } from \"react\"\n\nexport function ThemeToggle() {\n  const { theme, setTheme } = useTheme()\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  if (!mounted) {\n    return <div className=\"w-9 h-9\" />\n  }\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"sm\"\n      onClick={() => setTheme(theme === \"dark\" ? \"light\" : \"dark\")}\n      className=\"gap-2\"\n      title={`Switch to ${theme === \"dark\" ? \"light\" : \"dark\"} mode`}\n    >\n      {theme === \"dark\" ? <Sun className=\"h-4 w-4\" /> : <Moon className=\"h-4 w-4\" />}\n      <span className=\"hidden md:inline text-sm\">{theme === \"dark\" ? \"Light\" : \"Dark\"}</span>\n    </Button>\n  )\n}\n","size_bytes":851},"app/api/messages/route.ts":{"content":"import { NextResponse } from \"next/server\"\nimport { getDb } from \"@/lib/mongodb\"\nimport { verifyToken } from \"@/lib/auth\"\nimport type { Message } from \"@/lib/models\"\n\nexport async function GET(request: Request) {\n  try {\n    const token = request.headers.get(\"authorization\")?.split(\" \")[1]\n    if (!token) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const user = verifyToken(token)\n    if (!user) {\n      return NextResponse.json({ error: \"Invalid token\" }, { status: 401 })\n    }\n\n    const db = await getDb()\n    const messages = await db.collection<Message>(\"messages\").find({}).sort({ createdAt: -1 }).limit(100).toArray()\n\n    return NextResponse.json(messages)\n  } catch (error) {\n    console.error(\"Error fetching messages:\", error)\n    return NextResponse.json({ error: \"Failed to fetch messages\" }, { status: 500 })\n  }\n}\n\nexport async function POST(request: Request) {\n  try {\n    const token = request.headers.get(\"authorization\")?.split(\" \")[1]\n    if (!token) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const user = verifyToken(token)\n    if (!user) {\n      return NextResponse.json({ error: \"Invalid token\" }, { status: 401 })\n    }\n\n    const { content } = await request.json()\n\n    if (!content || content.trim().length === 0) {\n      return NextResponse.json({ error: \"Message content is required\" }, { status: 400 })\n    }\n\n    const db = await getDb()\n    const senderName = user.firstName && user.lastName \n      ? `${user.firstName} ${user.lastName}` \n      : (user.email as string) || \"Unknown User\"\n    \n    const message: Message = {\n      senderId: user.userId as string,\n      senderName,\n      senderRole: user.role as string,\n      content: content.trim(),\n      createdAt: new Date(),\n    }\n\n    const result = await db.collection(\"messages\").insertOne(message)\n\n    return NextResponse.json({ ...message, _id: result.insertedId }, { status: 201 })\n  } catch (error) {\n    console.error(\"Error creating message:\", error)\n    return NextResponse.json({ error: \"Failed to send message\" }, { status: 500 })\n  }\n}\n","size_bytes":2129},"app/student/page.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { BookOpen, FileText, Clock, CheckCircle } from \"lucide-react\"\nimport Link from \"next/link\"\nimport { Button } from \"@/components/ui/button\"\n\nexport default function StudentDashboard() {\n  return (\n    <div className=\"space-y-6 sm:space-y-8\">\n      <div>\n        <h1 className=\"text-2xl sm:text-3xl font-bold mb-2\">Student Dashboard</h1>\n        <p className=\"text-sm sm:text-base text-muted-foreground\">Welcome back! Here's your learning overview.</p>\n      </div>\n\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-6\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2 space-y-0\">\n            <CardTitle className=\"text-xs sm:text-sm font-medium\">Enrolled Courses</CardTitle>\n            <BookOpen className=\"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-xl sm:text-2xl font-bold\">5</div>\n            <p className=\"text-xs text-muted-foreground\">Active this semester</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2 space-y-0\">\n            <CardTitle className=\"text-xs sm:text-sm font-medium\">Pending Assignments</CardTitle>\n            <FileText className=\"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-xl sm:text-2xl font-bold\">3</div>\n            <p className=\"text-xs text-muted-foreground\">Due this week</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2 space-y-0\">\n            <CardTitle className=\"text-xs sm:text-sm font-medium\">Completed</CardTitle>\n            <CheckCircle className=\"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-xl sm:text-2xl font-bold\">12</div>\n            <p className=\"text-xs text-muted-foreground\">Assignments submitted</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2 space-y-0\">\n            <CardTitle className=\"text-xs sm:text-sm font-medium\">Study Hours</CardTitle>\n            <Clock className=\"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-xl sm:text-2xl font-bold\">24</div>\n            <p className=\"text-xs text-muted-foreground\">This week</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Quick Actions */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg sm:text-xl\">Upcoming Assignments</CardTitle>\n            <CardDescription className=\"text-xs sm:text-sm\">Assignments due in the next 7 days</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-3 sm:space-y-4\">\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-muted rounded-lg gap-2\">\n              <div>\n                <p className=\"font-medium text-sm sm:text-base\">Database Systems - Assignment 3</p>\n                <p className=\"text-xs sm:text-sm text-muted-foreground\">Due in 2 days</p>\n              </div>\n              <Link href=\"/student/assignments\">\n                <Button size=\"sm\" className=\"w-full sm:w-auto\">\n                  View\n                </Button>\n              </Link>\n            </div>\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-muted rounded-lg gap-2\">\n              <div>\n                <p className=\"font-medium text-sm sm:text-base\">Web Development - Project Proposal</p>\n                <p className=\"text-xs sm:text-sm text-muted-foreground\">Due in 4 days</p>\n              </div>\n              <Link href=\"/student/assignments\">\n                <Button size=\"sm\" className=\"w-full sm:w-auto\">\n                  View\n                </Button>\n              </Link>\n            </div>\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-muted rounded-lg gap-2\">\n              <div>\n                <p className=\"font-medium text-sm sm:text-base\">Software Engineering - Case Study</p>\n                <p className=\"text-xs sm:text-sm text-muted-foreground\">Due in 6 days</p>\n              </div>\n              <Link href=\"/student/assignments\">\n                <Button size=\"sm\" className=\"w-full sm:w-auto\">\n                  View\n                </Button>\n              </Link>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg sm:text-xl\">Recent Course Materials</CardTitle>\n            <CardDescription className=\"text-xs sm:text-sm\">Latest materials uploaded by instructors</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-3 sm:space-y-4\">\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-muted rounded-lg gap-2\">\n              <div>\n                <p className=\"font-medium text-sm sm:text-base\">Data Structures - Lecture 10</p>\n                <p className=\"text-xs sm:text-sm text-muted-foreground\">Added 1 day ago</p>\n              </div>\n              <Link href=\"/student/courses\">\n                <Button size=\"sm\" variant=\"outline\" className=\"w-full sm:w-auto bg-transparent\">\n                  Download\n                </Button>\n              </Link>\n            </div>\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-muted rounded-lg gap-2\">\n              <div>\n                <p className=\"font-medium text-sm sm:text-base\">Algorithms - Practice Problems</p>\n                <p className=\"text-xs sm:text-sm text-muted-foreground\">Added 2 days ago</p>\n              </div>\n              <Link href=\"/student/courses\">\n                <Button size=\"sm\" variant=\"outline\" className=\"w-full sm:w-auto bg-transparent\">\n                  Download\n                </Button>\n              </Link>\n            </div>\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-muted rounded-lg gap-2\">\n              <div>\n                <p className=\"font-medium text-sm sm:text-base\">Computer Networks - Lab Manual</p>\n                <p className=\"text-xs sm:text-sm text-muted-foreground\">Added 3 days ago</p>\n              </div>\n              <Link href=\"/student/courses\">\n                <Button size=\"sm\" variant=\"outline\" className=\"w-full sm:w-auto bg-transparent\">\n                  Download\n                </Button>\n              </Link>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  )\n}\n","size_bytes":7029},"components/ui/toaster.tsx":{"content":"'use client'\n\nimport { useToast } from '@/hooks/use-toast'\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from '@/components/ui/toast'\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":786},"app/student/courses/page.tsx":{"content":"\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Download, FileText, Video, FileAudio } from \"lucide-react\"\nimport { useToast } from \"@/hooks/use-toast\"\n\ninterface Course {\n  _id: string\n  title: string\n  code: string\n  description: string\n  department: string\n}\n\ninterface Material {\n  _id: string\n  courseId: string\n  title: string\n  description: string\n  fileUrl: string\n  fileType: string\n  createdAt: string\n}\n\nexport default function StudentCoursesPage() {\n  const [courses, setCourses] = useState<Course[]>([])\n  const [selectedCourse, setSelectedCourse] = useState<string | null>(null)\n  const [materials, setMaterials] = useState<Material[]>([])\n  const [loading, setLoading] = useState(true)\n  const { toast } = useToast()\n\n  useEffect(() => {\n    fetchCourses()\n  }, [])\n\n  useEffect(() => {\n    if (selectedCourse) {\n      fetchMaterials(selectedCourse)\n    }\n  }, [selectedCourse])\n\n  const fetchCourses = async () => {\n    try {\n      const response = await fetch(\"/api/courses\")\n      if (response.ok) {\n        const data = await response.json()\n        setCourses(data.courses)\n        if (data.courses.length > 0) {\n          setSelectedCourse(data.courses[0]._id)\n        }\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to load courses\",\n        variant: \"destructive\",\n      })\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const fetchMaterials = async (courseId: string) => {\n    try {\n      const response = await fetch(`/api/materials?courseId=${courseId}`)\n      if (response.ok) {\n        const data = await response.json()\n        setMaterials(data.materials)\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to load materials\",\n        variant: \"destructive\",\n      })\n    }\n  }\n\n  const getFileIcon = (fileType: string) => {\n    if (fileType.includes(\"video\")) return <Video className=\"h-5 w-5\" />\n    if (fileType.includes(\"audio\")) return <FileAudio className=\"h-5 w-5\" />\n    return <FileText className=\"h-5 w-5\" />\n  }\n\n  const getDownloadUrl = (material: Material) => {\n    const isUUID = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(material.fileUrl)\n    if (isUUID) {\n      return `/api/download?materialId=${material._id}`\n    }\n    return material.fileUrl\n  }\n\n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"h-8 w-48 bg-muted animate-pulse rounded\" />\n        <div className=\"grid md:grid-cols-4 gap-6\">\n          <div className=\"space-y-2\">\n            {[1, 2, 3].map((i) => (\n              <div key={i} className=\"h-16 bg-muted animate-pulse rounded\" />\n            ))}\n          </div>\n          <div className=\"md:col-span-3 h-96 bg-muted animate-pulse rounded\" />\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl sm:text-3xl font-bold mb-2\">My Courses</h1>\n        <p className=\"text-sm sm:text-base text-muted-foreground\">Access course materials and resources</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 sm:gap-6\">\n        {/* Course List */}\n        <div className=\"md:col-span-1 space-y-2\">\n          <h2 className=\"font-semibold mb-4 text-sm sm:text-base\">Enrolled Courses</h2>\n          {courses.map((course) => (\n            <Button\n              key={course._id}\n              variant={selectedCourse === course._id ? \"default\" : \"outline\"}\n              className=\"w-full justify-start text-left h-auto py-3\"\n              onClick={() => setSelectedCourse(course._id)}\n            >\n              <div className=\"text-left\">\n                <div className=\"font-medium text-xs sm:text-sm\">{course.code}</div>\n                <div className=\"text-xs\">{course.title}</div>\n              </div>\n            </Button>\n          ))}\n        </div>\n\n        {/* Materials */}\n        <div className=\"md:col-span-3\">\n          {selectedCourse && (\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg sm:text-xl\">Course Materials</CardTitle>\n                <CardDescription className=\"text-xs sm:text-sm\">\n                  {courses.find((c) => c._id === selectedCourse)?.description}\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                {materials.length === 0 ? (\n                  <p className=\"text-muted-foreground text-center py-8 text-sm\">No materials available yet</p>\n                ) : (\n                  <div className=\"space-y-3\">\n                    {materials.map((material) => (\n                      <div\n                        key={material._id}\n                        className=\"flex flex-col sm:flex-row sm:items-center justify-between p-3 sm:p-4 bg-muted rounded-lg gap-3\"\n                      >\n                        <div className=\"flex items-start sm:items-center gap-3\">\n                          {getFileIcon(material.fileType)}\n                          <div className=\"flex-1 min-w-0\">\n                            <p className=\"font-medium text-sm sm:text-base truncate\">{material.title}</p>\n                            <p className=\"text-xs sm:text-sm text-muted-foreground line-clamp-1\">\n                              {material.description}\n                            </p>\n                            <p className=\"text-xs text-muted-foreground\">\n                              {new Date(material.createdAt).toLocaleDateString()}\n                            </p>\n                          </div>\n                        </div>\n                        <Button size=\"sm\" variant=\"outline\" asChild className=\"w-full sm:w-auto bg-transparent\">\n                          <a href={getDownloadUrl(material)} download>\n                            <Download className=\"h-4 w-4 mr-2\" />\n                            Download\n                          </a>\n                        </Button>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":6303},"components/ui/sonner.tsx":{"content":"'use client'\n\nimport { useTheme } from 'next-themes'\nimport { Toaster as Sonner, ToasterProps } from 'sonner'\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = 'system' } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps['theme']}\n      className=\"toaster group\"\n      style={\n        {\n          '--normal-bg': 'var(--popover)',\n          '--normal-text': 'var(--popover-foreground)',\n          '--normal-border': 'var(--border)',\n        } as React.CSSProperties\n      }\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n","size_bytes":564},"components/ui/item.tsx":{"content":"import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\nimport { Separator } from '@/components/ui/separator'\n\nfunction ItemGroup({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      role=\"list\"\n      data-slot=\"item-group\"\n      className={cn('group/item-group flex flex-col', className)}\n      {...props}\n    />\n  )\n}\n\nfunction ItemSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"item-separator\"\n      orientation=\"horizontal\"\n      className={cn('my-0', className)}\n      {...props}\n    />\n  )\n}\n\nconst itemVariants = cva(\n  'group/item flex items-center border border-transparent text-sm rounded-md transition-colors [a&]:hover:bg-accent/50 [a&]:transition-colors duration-100 flex-wrap outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n  {\n    variants: {\n      variant: {\n        default: 'bg-transparent',\n        outline: 'border-border',\n        muted: 'bg-muted/50',\n      },\n      size: {\n        default: 'p-4 gap-4 ',\n        sm: 'py-3 px-4 gap-2.5',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Item({\n  className,\n  variant = 'default',\n  size = 'default',\n  asChild = false,\n  ...props\n}: React.ComponentProps<'div'> &\n  VariantProps<typeof itemVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : 'div'\n  return (\n    <Comp\n      data-slot=\"item\"\n      data-variant={variant}\n      data-size={size}\n      className={cn(itemVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nconst itemMediaVariants = cva(\n  'flex shrink-0 items-center justify-center gap-2 group-has-[[data-slot=item-description]]/item:self-start [&_svg]:pointer-events-none group-has-[[data-slot=item-description]]/item:translate-y-0.5',\n  {\n    variants: {\n      variant: {\n        default: 'bg-transparent',\n        icon: \"size-8 border rounded-sm bg-muted [&_svg:not([class*='size-'])]:size-4\",\n        image:\n          'size-10 rounded-sm overflow-hidden [&_img]:size-full [&_img]:object-cover',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction ItemMedia({\n  className,\n  variant = 'default',\n  ...props\n}: React.ComponentProps<'div'> & VariantProps<typeof itemMediaVariants>) {\n  return (\n    <div\n      data-slot=\"item-media\"\n      data-variant={variant}\n      className={cn(itemMediaVariants({ variant, className }))}\n      {...props}\n    />\n  )\n}\n\nfunction ItemContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"item-content\"\n      className={cn(\n        'flex flex-1 flex-col gap-1 [&+[data-slot=item-content]]:flex-none',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"item-title\"\n      className={cn(\n        'flex w-fit items-center gap-2 text-sm leading-snug font-medium',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemDescription({ className, ...props }: React.ComponentProps<'p'>) {\n  return (\n    <p\n      data-slot=\"item-description\"\n      className={cn(\n        'text-muted-foreground line-clamp-2 text-sm leading-normal font-normal text-balance',\n        '[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemActions({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"item-actions\"\n      className={cn('flex items-center gap-2', className)}\n      {...props}\n    />\n  )\n}\n\nfunction ItemHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"item-header\"\n      className={cn(\n        'flex basis-full items-center justify-between gap-2',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"item-footer\"\n      className={cn(\n        'flex basis-full items-center justify-between gap-2',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Item,\n  ItemMedia,\n  ItemContent,\n  ItemActions,\n  ItemGroup,\n  ItemSeparator,\n  ItemTitle,\n  ItemDescription,\n  ItemHeader,\n  ItemFooter,\n}\n","size_bytes":4503},"app/globals.css":{"content":"@import \"tailwindcss\";\n@import \"tw-animate-css\";\n\n@custom-variant dark (&:is(.dark *));\n\n:root {\n  --background: oklch(1 0 0);\n  --foreground: oklch(0.145 0 0);\n  --card: oklch(1 0 0);\n  --card-foreground: oklch(0.145 0 0);\n  --popover: oklch(1 0 0);\n  --popover-foreground: oklch(0.145 0 0);\n  --primary: oklch(0.548 0.184 254.604);\n  --primary-foreground: oklch(0.985 0 0);\n  --secondary: oklch(0.97 0 0);\n  --secondary-foreground: oklch(0.205 0 0);\n  --muted: oklch(0.97 0 0);\n  --muted-foreground: oklch(0.556 0 0);\n  --accent: oklch(0.646 0.185 231.704);\n  --accent-foreground: oklch(0.985 0 0);\n  --destructive: oklch(0.577 0.245 27.325);\n  --destructive-foreground: oklch(0.985 0 0);\n  --success: oklch(0.646 0.16 155.824);\n  --success-foreground: oklch(0.985 0 0);\n  --warning: oklch(0.746 0.155 85.594);\n  --warning-foreground: oklch(0.985 0 0);\n  --border: oklch(0.922 0 0);\n  --input: oklch(0.922 0 0);\n  --ring: oklch(0.548 0.184 254.604);\n  --chart-1: oklch(0.646 0.222 41.116);\n  --chart-2: oklch(0.6 0.118 184.704);\n  --chart-3: oklch(0.398 0.07 227.392);\n  --chart-4: oklch(0.828 0.189 84.429);\n  --chart-5: oklch(0.769 0.188 70.08);\n  --radius: 0.5rem;\n  --sidebar: oklch(0.985 0 0);\n  --sidebar-foreground: oklch(0.145 0 0);\n  --sidebar-primary: oklch(0.205 0 0);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.97 0 0);\n  --sidebar-accent-foreground: oklch(0.205 0 0);\n  --sidebar-border: oklch(0.922 0 0);\n  --sidebar-ring: oklch(0.708 0 0);\n}\n\n.dark {\n  --background: oklch(0.145 0 0);\n  --foreground: oklch(0.985 0 0);\n  --card: oklch(0.145 0 0);\n  --card-foreground: oklch(0.985 0 0);\n  --popover: oklch(0.145 0 0);\n  --popover-foreground: oklch(0.985 0 0);\n  --primary: oklch(0.648 0.184 254.604);\n  --primary-foreground: oklch(0.985 0 0);\n  --secondary: oklch(0.269 0 0);\n  --secondary-foreground: oklch(0.985 0 0);\n  --muted: oklch(0.269 0 0);\n  --muted-foreground: oklch(0.708 0 0);\n  --accent: oklch(0.746 0.185 231.704);\n  --accent-foreground: oklch(0.985 0 0);\n  --destructive: oklch(0.396 0.141 25.723);\n  --destructive-foreground: oklch(0.985 0 0);\n  --success: oklch(0.546 0.16 155.824);\n  --success-foreground: oklch(0.985 0 0);\n  --warning: oklch(0.646 0.155 85.594);\n  --warning-foreground: oklch(0.985 0 0);\n  --border: oklch(0.269 0 0);\n  --input: oklch(0.269 0 0);\n  --ring: oklch(0.648 0.184 254.604);\n  --chart-1: oklch(0.488 0.243 264.376);\n  --chart-2: oklch(0.696 0.17 162.48);\n  --chart-3: oklch(0.769 0.188 70.08);\n  --chart-4: oklch(0.627 0.265 303.9);\n  --chart-5: oklch(0.645 0.246 16.439);\n  --sidebar: oklch(0.205 0 0);\n  --sidebar-foreground: oklch(0.985 0 0);\n  --sidebar-primary: oklch(0.488 0.243 264.376);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.269 0 0);\n  --sidebar-accent-foreground: oklch(0.985 0 0);\n  --sidebar-border: oklch(0.269 0 0);\n  --sidebar-ring: oklch(0.439 0 0);\n}\n\n@theme inline {\n  --font-sans: \"Geist\", \"Geist Fallback\";\n  --font-mono: \"Geist Mono\", \"Geist Mono Fallback\";\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --color-card: var(--card);\n  --color-card-foreground: var(--card-foreground);\n  --color-popover: var(--popover);\n  --color-popover-foreground: var(--popover-foreground);\n  --color-primary: var(--primary);\n  --color-primary-foreground: var(--primary-foreground);\n  --color-secondary: var(--secondary);\n  --color-secondary-foreground: var(--secondary-foreground);\n  --color-muted: var(--muted);\n  --color-muted-foreground: var(--muted-foreground);\n  --color-accent: var(--accent);\n  --color-accent-foreground: var(--accent-foreground);\n  --color-destructive: var(--destructive);\n  --color-destructive-foreground: var(--destructive-foreground);\n  --color-success: var(--success);\n  --color-success-foreground: var(--success-foreground);\n  --color-warning: var(--warning);\n  --color-warning-foreground: var(--warning-foreground);\n  --color-border: var(--border);\n  --color-input: var(--input);\n  --color-ring: var(--ring);\n  --color-chart-1: var(--chart-1);\n  --color-chart-2: var(--chart-2);\n  --color-chart-3: var(--chart-3);\n  --color-chart-4: var(--chart-4);\n  --color-chart-5: var(--chart-5);\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n  --color-sidebar: var(--sidebar);\n  --color-sidebar-foreground: var(--sidebar-foreground);\n  --color-sidebar-primary: var(--sidebar-primary);\n  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);\n  --color-sidebar-accent: var(--sidebar-accent);\n  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);\n  --color-sidebar-border: var(--sidebar-border);\n  --color-sidebar-ring: var(--sidebar-ring);\n}\n\n@layer base {\n  * {\n    @apply border-border outline-ring/50;\n  }\n  body {\n    @apply bg-background text-foreground;\n  }\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    @apply text-balance;\n  }\n  p {\n    @apply text-pretty;\n  }\n}\n","size_bytes":5006},"app/admin/page.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Users, BookOpen, FileText } from \"lucide-react\"\n\nexport default function AdminDashboard() {\n  return (\n    <div className=\"space-y-6 sm:space-y-8\">\n      <div>\n        <h1 className=\"text-2xl sm:text-3xl font-bold mb-2\">Admin Dashboard</h1>\n        <p className=\"text-sm sm:text-base text-muted-foreground\">System overview and management</p>\n      </div>\n\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-6\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2 space-y-0\">\n            <CardTitle className=\"text-xs sm:text-sm font-medium\">Total Students</CardTitle>\n            <Users className=\"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-xl sm:text-2xl font-bold\">1,234</div>\n            <p className=\"text-xs text-muted-foreground\">+12% from last month</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2 space-y-0\">\n            <CardTitle className=\"text-xs sm:text-sm font-medium\">Total Teachers</CardTitle>\n            <Users className=\"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-xl sm:text-2xl font-bold\">89</div>\n            <p className=\"text-xs text-muted-foreground\">+3 new this month</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2 space-y-0\">\n            <CardTitle className=\"text-xs sm:text-sm font-medium\">Total Courses</CardTitle>\n            <BookOpen className=\"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-xl sm:text-2xl font-bold\">156</div>\n            <p className=\"text-xs text-muted-foreground\">Active courses</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2 space-y-0\">\n            <CardTitle className=\"text-xs sm:text-sm font-medium\">Active Assignments</CardTitle>\n            <FileText className=\"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-xl sm:text-2xl font-bold\">423</div>\n            <p className=\"text-xs text-muted-foreground\">Across all courses</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Recent Activity */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg sm:text-xl\">Recent Registrations</CardTitle>\n            <CardDescription className=\"text-xs sm:text-sm\">Latest user registrations in the system</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-3 sm:space-y-4\">\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-muted rounded-lg gap-1\">\n              <div>\n                <p className=\"font-medium text-sm sm:text-base\">John Doe</p>\n                <p className=\"text-xs sm:text-sm text-muted-foreground\">Student - Computer Science</p>\n              </div>\n              <p className=\"text-xs text-muted-foreground\">2 hours ago</p>\n            </div>\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-muted rounded-lg gap-1\">\n              <div>\n                <p className=\"font-medium text-sm sm:text-base\">Jane Smith</p>\n                <p className=\"text-xs sm:text-sm text-muted-foreground\">Teacher - Mathematics</p>\n              </div>\n              <p className=\"text-xs text-muted-foreground\">5 hours ago</p>\n            </div>\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-muted rounded-lg gap-1\">\n              <div>\n                <p className=\"font-medium text-sm sm:text-base\">Mike Johnson</p>\n                <p className=\"text-xs sm:text-sm text-muted-foreground\">Student - Engineering</p>\n              </div>\n              <p className=\"text-xs text-muted-foreground\">1 day ago</p>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg sm:text-xl\">System Activity</CardTitle>\n            <CardDescription className=\"text-xs sm:text-sm\">Recent system events and statistics</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-3 sm:space-y-4\">\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-muted rounded-lg gap-1\">\n              <div>\n                <p className=\"font-medium text-sm sm:text-base\">New Course Created</p>\n                <p className=\"text-xs sm:text-sm text-muted-foreground\">Advanced Database Systems</p>\n              </div>\n              <p className=\"text-xs text-muted-foreground\">1 hour ago</p>\n            </div>\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-muted rounded-lg gap-1\">\n              <div>\n                <p className=\"font-medium text-sm sm:text-base\">Material Uploaded</p>\n                <p className=\"text-xs sm:text-sm text-muted-foreground\">Web Development - Lecture 5</p>\n              </div>\n              <p className=\"text-xs text-muted-foreground\">3 hours ago</p>\n            </div>\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-muted rounded-lg gap-1\">\n              <div>\n                <p className=\"font-medium text-sm sm:text-base\">Assignment Submitted</p>\n                <p className=\"text-xs sm:text-sm text-muted-foreground\">45 new submissions</p>\n              </div>\n              <p className=\"text-xs text-muted-foreground\">6 hours ago</p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  )\n}\n","size_bytes":6121},"app/admin/layout.tsx":{"content":"\"use client\"\n\nimport type React from \"react\"\n\nimport { useAuth } from \"@/components/auth-provider\"\nimport { useRouter } from \"next/navigation\"\nimport { useEffect } from \"react\"\nimport { AdminNav } from \"@/components/admin-nav\"\n\nexport default function AdminLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  const { user, loading } = useAuth()\n  const router = useRouter()\n\n  useEffect(() => {\n    if (!loading && (!user || user.role !== \"admin\")) {\n      router.push(\"/login\")\n    }\n  }, [user, loading, router])\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-muted-foreground\">Loading...</div>\n      </div>\n    )\n  }\n\n  if (!user || user.role !== \"admin\") {\n    return null\n  }\n\n  return (\n    <div className=\"min-h-screen bg-muted/30\">\n      <AdminNav />\n      <main className=\"container mx-auto px-4 py-8\">{children}</main>\n    </div>\n  )\n}\n","size_bytes":938},"app/admin/users/page.tsx":{"content":"\"use client\"\n\nimport type React from \"react\"\n\nimport { useEffect, useState } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { Plus, Trash2, Search } from \"lucide-react\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\nimport { Badge } from \"@/components/ui/badge\"\n\ninterface User {\n  _id: string\n  email: string\n  role: string\n  firstName: string\n  lastName: string\n  department?: string\n  year?: number\n  semester?: number\n}\n\nexport default function AdminUsersPage() {\n  const [users, setUsers] = useState<User[]>([])\n  const [filteredUsers, setFilteredUsers] = useState<User[]>([])\n  const [searchTerm, setSearchTerm] = useState(\"\")\n  const [roleFilter, setRoleFilter] = useState(\"all\")\n  const [open, setOpen] = useState(false)\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\",\n    role: \"student\",\n    firstName: \"\",\n    lastName: \"\",\n    department: \"\",\n    year: \"\",\n    semester: \"\",\n  })\n  const { toast } = useToast()\n\n  useEffect(() => {\n    fetchUsers()\n  }, [])\n\n  useEffect(() => {\n    filterUsers()\n  }, [users, searchTerm, roleFilter])\n\n  const fetchUsers = async () => {\n    try {\n      const response = await fetch(\"/api/users\")\n      if (response.ok) {\n        const data = await response.json()\n        setUsers(data.users)\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to load users\",\n        variant: \"destructive\",\n      })\n    }\n  }\n\n  const filterUsers = () => {\n    let filtered = users\n\n    if (roleFilter !== \"all\") {\n      filtered = filtered.filter((user) => user.role === roleFilter)\n    }\n\n    if (searchTerm) {\n      filtered = filtered.filter(\n        (user) =>\n          user.firstName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n          user.lastName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n          user.email.toLowerCase().includes(searchTerm.toLowerCase()),\n      )\n    }\n\n    setFilteredUsers(filtered)\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    try {\n      const response = await fetch(\"/api/users\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          ...formData,\n          year: formData.year ? Number.parseInt(formData.year) : undefined,\n          semester: formData.semester ? Number.parseInt(formData.semester) : undefined,\n        }),\n      })\n\n      if (response.ok) {\n        toast({\n          title: \"Success\",\n          description: \"User created successfully\",\n        })\n        fetchUsers()\n        setOpen(false)\n        setFormData({\n          email: \"\",\n          password: \"\",\n          role: \"student\",\n          firstName: \"\",\n          lastName: \"\",\n          department: \"\",\n          year: \"\",\n          semester: \"\",\n        })\n      } else {\n        const data = await response.json()\n        throw new Error(data.error)\n      }\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      })\n    }\n  }\n\n  const handleDelete = async (userId: string) => {\n    if (!confirm(\"Are you sure you want to delete this user?\")) {\n      return\n    }\n\n    try {\n      const response = await fetch(`/api/users/${userId}`, {\n        method: \"DELETE\",\n      })\n\n      if (response.ok) {\n        toast({\n          title: \"Success\",\n          description: \"User deleted successfully\",\n        })\n        fetchUsers()\n      } else {\n        throw new Error(\"Failed to delete user\")\n      }\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      })\n    }\n  }\n\n  const getRoleBadge = (role: string) => {\n    const colors: Record<string, string> = {\n      admin: \"bg-destructive\",\n      teacher: \"bg-primary\",\n      student: \"bg-accent\",\n      head: \"bg-warning\",\n    }\n    return <Badge className={`${colors[role]} text-white`}>{role}</Badge>\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold mb-2\">User Management</h1>\n          <p className=\"text-muted-foreground\">Manage system users and accounts</p>\n        </div>\n        <Dialog open={open} onOpenChange={setOpen}>\n          <DialogTrigger asChild>\n            <Button>\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Add User\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-2xl\">\n            <DialogHeader>\n              <DialogTitle>Create New User</DialogTitle>\n              <DialogDescription>Add a new user to the system</DialogDescription>\n            </DialogHeader>\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div className=\"grid md:grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"firstName\">First Name</Label>\n                  <Input\n                    id=\"firstName\"\n                    value={formData.firstName}\n                    onChange={(e) => setFormData({ ...formData, firstName: e.target.value })}\n                    required\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"lastName\">Last Name</Label>\n                  <Input\n                    id=\"lastName\"\n                    value={formData.lastName}\n                    onChange={(e) => setFormData({ ...formData, lastName: e.target.value })}\n                    required\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"email\">Email</Label>\n                <Input\n                  id=\"email\"\n                  type=\"email\"\n                  value={formData.email}\n                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                  required\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"password\">Password</Label>\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  value={formData.password}\n                  onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                  required\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"role\">Role</Label>\n                <Select value={formData.role} onValueChange={(value) => setFormData({ ...formData, role: value })}>\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"student\">Student</SelectItem>\n                    <SelectItem value=\"teacher\">Teacher</SelectItem>\n                    <SelectItem value=\"admin\">Admin</SelectItem>\n                    <SelectItem value=\"head\">Head</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {(formData.role === \"student\" || formData.role === \"teacher\") && (\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"department\">Department</Label>\n                  <Input\n                    id=\"department\"\n                    value={formData.department}\n                    onChange={(e) => setFormData({ ...formData, department: e.target.value })}\n                  />\n                </div>\n              )}\n\n              {formData.role === \"student\" && (\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"year\">Year</Label>\n                    <Select value={formData.year} onValueChange={(value) => setFormData({ ...formData, year: value })}>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select year\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"1\">1st Year</SelectItem>\n                        <SelectItem value=\"2\">2nd Year</SelectItem>\n                        <SelectItem value=\"3\">3rd Year</SelectItem>\n                        <SelectItem value=\"4\">4th Year</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"semester\">Semester</Label>\n                    <Select\n                      value={formData.semester}\n                      onValueChange={(value) => setFormData({ ...formData, semester: value })}\n                    >\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select semester\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"1\">Semester 1</SelectItem>\n                        <SelectItem value=\"2\">Semester 2</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n              )}\n\n              <Button type=\"submit\" className=\"w-full\">\n                Create User\n              </Button>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle>All Users</CardTitle>\n              <CardDescription>{filteredUsers.length} users in the system</CardDescription>\n            </div>\n            <div className=\"flex gap-2\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search users...\"\n                  className=\"pl-9 w-64\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                />\n              </div>\n              <Select value={roleFilter} onValueChange={setRoleFilter}>\n                <SelectTrigger className=\"w-32\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Roles</SelectItem>\n                  <SelectItem value=\"student\">Students</SelectItem>\n                  <SelectItem value=\"teacher\">Teachers</SelectItem>\n                  <SelectItem value=\"admin\">Admins</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Name</TableHead>\n                <TableHead>Email</TableHead>\n                <TableHead>Role</TableHead>\n                <TableHead>Department</TableHead>\n                <TableHead>Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {filteredUsers.map((user) => (\n                <TableRow key={user._id}>\n                  <TableCell className=\"font-medium\">\n                    {user.firstName} {user.lastName}\n                  </TableCell>\n                  <TableCell>{user.email}</TableCell>\n                  <TableCell>{getRoleBadge(user.role)}</TableCell>\n                  <TableCell>{user.department || \"-\"}</TableCell>\n                  <TableCell>\n                    <Button size=\"sm\" variant=\"ghost\" onClick={() => handleDelete(user._id)}>\n                      <Trash2 className=\"h-4 w-4 text-destructive\" />\n                    </Button>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n","size_bytes":12453},"components/ui/skeleton.tsx":{"content":"import { cn } from '@/lib/utils'\n\nfunction Skeleton({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"skeleton\"\n      className={cn('bg-accent animate-pulse rounded-md', className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":276},"app/api/auth/register/route.ts":{"content":"import { type NextRequest, NextResponse } from \"next/server\"\nimport { getDatabase } from \"@/lib/mongodb\"\nimport { hashPassword } from \"@/lib/auth\"\nimport type { User } from \"@/lib/models\"\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json()\n    const { email, password, role, firstName, lastName, department, year, semester } = body\n\n    if (!email || !password || !role || !firstName || !lastName) {\n      return NextResponse.json({ error: \"Missing required fields\" }, { status: 400 })\n    }\n\n    if (!process.env.MONGODB_URI) {\n      return NextResponse.json(\n        {\n          error: \"Database configuration error. Please add MONGODB_URI to environment variables.\",\n        },\n        { status: 500 },\n      )\n    }\n\n    if (!process.env.JWT_SECRET) {\n      return NextResponse.json(\n        {\n          error: \"Authentication configuration error. Please add JWT_SECRET to environment variables.\",\n        },\n        { status: 500 },\n      )\n    }\n\n    const db = await getDatabase()\n    const usersCollection = db.collection<User>(\"users\")\n\n    // Check if user already exists\n    const existingUser = await usersCollection.findOne({ email })\n    if (existingUser) {\n      return NextResponse.json({ error: \"User already exists\" }, { status: 400 })\n    }\n\n    // Hash password\n    const hashedPassword = await hashPassword(password)\n\n    // Create user\n    const newUser: User = {\n      email,\n      password: hashedPassword,\n      role,\n      firstName,\n      lastName,\n      department,\n      year,\n      semester,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    }\n\n    await usersCollection.insertOne(newUser)\n\n    return NextResponse.json({ message: \"User registered successfully\" }, { status: 201 })\n  } catch (error: any) {\n    console.error(\"[v0] Registration error:\", error.message)\n    return NextResponse.json(\n      {\n        error: `Registration failed: ${error.message}`,\n      },\n      { status: 500 },\n    )\n  }\n}\n","size_bytes":1994},"README.md":{"content":"# Woldia University E-Learning System (WDUELS)\n\nA comprehensive web-based Learning Management System (LMS) designed for Woldia University to enhance education through digital innovation. This platform enables students to access course materials, submit assignments, and communicate with instructors anytime, anywhere.\n\n## Features\n\n### For Students\n- View and enroll in courses by department\n- Download course materials and lecture notes\n- Submit assignments online\n- Track assignment deadlines and grades\n- Real-time messaging with instructors and peers\n- View university news and announcements\n- Manage personal profile\n\n### For Teachers\n- Create and manage courses\n- Upload course materials (documents, videos, etc.)\n- Create and manage assignments\n- Grade student submissions\n- View submitted assignments by course\n- Communicate with students via messaging\n- Publish course announcements\n\n### For Administrators\n- Manage user accounts (students, teachers, heads)\n- Create, update, and delete user accounts\n- Publish university-wide news and announcements\n- View system statistics and analytics\n- Manage departments and courses\n- Monitor system activity\n\n### For Department Heads\n- Oversee departmental courses\n- Manage course content within their department\n- View departmental statistics\n- Publish department-specific news\n\n## Technology Stack\n\n### Frontend\n- **Framework**: Next.js 15 (App Router)\n- **UI Library**: React 19\n- **Styling**: Tailwind CSS v4\n- **UI Components**: shadcn/ui\n- **Icons**: Lucide React\n- **State Management**: React Context API\n- **Form Handling**: React Hook Form (recommended)\n\n### Backend\n- **Runtime**: Node.js\n- **Framework**: Next.js API Routes\n- **Authentication**: JWT (JSON Web Tokens)\n- **Password Hashing**: bcryptjs\n\n### Database\n- **Database**: MongoDB\n- **ODM**: Native MongoDB Node.js Driver\n\n## Prerequisites\n\nBefore you begin, ensure you have the following installed:\n- **Node.js**: Version 18.x or higher\n- **npm** or **yarn**: Latest version\n- **MongoDB**: Version 5.x or higher (local installation or MongoDB Atlas account)\n- **Git**: For version control\n\n## Environment Setup\n\n### 1. Clone the Repository\n\n\\`\\`\\`bash\ngit clone <repository-url>\ncd woldia-university-els\n\\`\\`\\`\n\n### 2. Install Dependencies\n\n\\`\\`\\`bash\nnpm install\n# or\nyarn install\n\\`\\`\\`\n\n### 3. Configure Environment Variables\n\nCreate a `.env.local` file in the root directory of the project and add the following environment variables:\n\n\\`\\`\\`env\n# MongoDB Connection\nMONGODB_URI=mongodb://localhost:27017/wduels\n# For MongoDB Atlas, use:\n# MONGODB_URI=mongodb+srv://<username>:<password>@<cluster>.mongodb.net/wduels?retryWrites=true&w=majority\n\n# JWT Secret (generate a random string)\nJWT_SECRET=your-super-secret-jwt-key-change-this-in-production\n\n# Next.js Configuration\nNEXT_PUBLIC_APP_URL=http://localhost:3000\n\\`\\`\\`\n\n#### Generating a Secure JWT Secret\n\nTo generate a secure random JWT secret, run:\n\n\\`\\`\\`bash\nnode -e \"console.log(require('crypto').randomBytes(32).toString('hex'))\"\n\\`\\`\\`\n\n### 4. Set Up MongoDB\n\n#### Option A: Local MongoDB Installation\n\n1. Install MongoDB Community Edition from [mongodb.com](https://www.mongodb.com/try/download/community)\n2. Start the MongoDB service:\n   \\`\\`\\`bash\n   # macOS (with Homebrew)\n   brew services start mongodb-community\n   \n   # Linux (systemd)\n   sudo systemctl start mongod\n   \n   # Windows\n   # MongoDB runs as a service after installation\n   \\`\\`\\`\n3. Verify MongoDB is running:\n   \\`\\`\\`bash\n   mongosh\n   \\`\\`\\`\n\n#### Option B: MongoDB Atlas (Cloud)\n\n1. Create a free account at [mongodb.com/atlas](https://www.mongodb.com/atlas)\n2. Create a new cluster\n3. Add your IP address to the IP whitelist (or use 0.0.0.0/0 for development)\n4. Create a database user with read/write permissions\n5. Get your connection string and update `MONGODB_URI` in `.env.local`\n\n### 5. Initialize the Database\n\nThe application will automatically create the necessary collections on first run. However, you need to create an initial admin account.\n\n#### Create Initial Admin User\n\nRun the database initialization script:\n\n\\`\\`\\`bash\nnode scripts/init-admin.js\n\\`\\`\\`\n\nOr manually create an admin user through MongoDB:\n\n\\`\\`\\`javascript\n// Connect to MongoDB\nmongosh \"mongodb://localhost:27017/wduels\"\n\n// Create admin user\ndb.users.insertOne({\n  name: \"System Admin\",\n  email: \"admin@woldia.edu.et\",\n  password: \"$2a$10$X4qE.YqhpJJ7VX3g5F0Qce7KZQzQXJXxXxXxXxXxXxXxXxXxXx\", // hashed \"admin123\"\n  role: \"admin\",\n  createdAt: new Date(),\n  updatedAt: new Date()\n})\n\\`\\`\\`\n\nDefault credentials:\n- **Email**: admin@woldia.edu.et\n- **Password**: admin123 (change immediately after first login)\n\n### 6. Run the Development Server\n\n\\`\\`\\`bash\nnpm run dev\n# or\nyarn dev\n\\`\\`\\`\n\nOpen [http://localhost:3000](http://localhost:3000) in your browser.\n\n## Database Schema\n\n### Users Collection\n\\`\\`\\`javascript\n{\n  _id: ObjectId,\n  name: String,\n  email: String (unique),\n  password: String (hashed),\n  role: String (enum: \"student\", \"teacher\", \"admin\", \"head\"),\n  department: String (optional),\n  year: Number (for students),\n  semester: Number (for students),\n  createdAt: Date,\n  updatedAt: Date\n}\n\\`\\`\\`\n\n### Courses Collection\n\\`\\`\\`javascript\n{\n  _id: ObjectId,\n  title: String,\n  description: String,\n  code: String,\n  department: String,\n  teacherId: ObjectId (ref: users),\n  teacherName: String,\n  semester: Number,\n  year: Number,\n  createdAt: Date,\n  updatedAt: Date\n}\n\\`\\`\\`\n\n### Materials Collection\n\\`\\`\\`javascript\n{\n  _id: ObjectId,\n  title: String,\n  description: String,\n  courseId: ObjectId (ref: courses),\n  courseName: String,\n  fileUrl: String,\n  fileType: String,\n  uploadedBy: ObjectId (ref: users),\n  uploadedByName: String,\n  createdAt: Date\n}\n\\`\\`\\`\n\n### Assignments Collection\n\\`\\`\\`javascript\n{\n  _id: ObjectId,\n  title: String,\n  description: String,\n  courseId: ObjectId (ref: courses),\n  courseName: String,\n  dueDate: Date,\n  totalMarks: Number,\n  createdBy: ObjectId (ref: users),\n  createdByName: String,\n  createdAt: Date\n}\n\\`\\`\\`\n\n### Submissions Collection\n\\`\\`\\`javascript\n{\n  _id: ObjectId,\n  assignmentId: ObjectId (ref: assignments),\n  studentId: ObjectId (ref: users),\n  studentName: String,\n  fileUrl: String,\n  submittedAt: Date,\n  grade: Number (optional),\n  feedback: String (optional),\n  gradedBy: ObjectId (ref: users, optional),\n  gradedAt: Date (optional)\n}\n\\`\\`\\`\n\n### Messages Collection\n\\`\\`\\`javascript\n{\n  _id: ObjectId,\n  senderId: ObjectId (ref: users),\n  senderName: String,\n  senderRole: String,\n  content: String,\n  createdAt: Date\n}\n\\`\\`\\`\n\n### News Collection\n\\`\\`\\`javascript\n{\n  _id: ObjectId,\n  title: String,\n  content: String,\n  publishedBy: ObjectId (ref: users),\n  publishedByName: String,\n  createdAt: Date,\n  updatedAt: Date\n}\n\\`\\`\\`\n\n## Project Structure\n\n\\`\\`\\`\nwoldia-university-els/\n app/\n    (auth)/\n       login/\n       register/\n    student/\n       courses/\n       assignments/\n       messages/\n       news/\n       profile/\n       page.tsx\n    teacher/\n       courses/\n       materials/\n       assignments/\n       messages/\n       news/\n       profile/\n       page.tsx\n    admin/\n       users/\n       news/\n       messages/\n       page.tsx\n    api/\n       auth/\n       courses/\n       materials/\n       assignments/\n       submissions/\n       messages/\n       news/\n       users/\n    about/\n    globals.css\n    layout.tsx\n    page.tsx\n components/\n    ui/\n    auth-provider.tsx\n    student-nav.tsx\n    teacher-nav.tsx\n    admin-nav.tsx\n lib/\n    mongodb.ts\n    models.ts\n    auth.ts\n    utils.ts\n scripts/\n    init-admin.js\n .env.local\n package.json\n next.config.mjs\n tsconfig.json\n README.md\n\\`\\`\\`\n\n## API Routes\n\n### Authentication\n- `POST /api/auth/register` - Register new user\n- `POST /api/auth/login` - User login\n- `POST /api/auth/logout` - User logout\n- `GET /api/auth/me` - Get current user\n\n### Courses\n- `GET /api/courses` - Get all courses (filtered by role/department)\n- `POST /api/courses` - Create new course (teachers only)\n- `DELETE /api/courses/[id]` - Delete course (teachers/admin only)\n\n### Materials\n- `GET /api/materials` - Get all materials (filtered by course)\n- `POST /api/materials` - Upload material (teachers only)\n- `DELETE /api/materials/[id]` - Delete material (teachers only)\n\n### Assignments\n- `GET /api/assignments` - Get all assignments (filtered by course)\n- `POST /api/assignments` - Create assignment (teachers only)\n- `DELETE /api/assignments/[id]` - Delete assignment (teachers only)\n\n### Submissions\n- `GET /api/submissions` - Get submissions (filtered by assignment/student)\n- `POST /api/submissions` - Submit assignment (students only)\n- `PUT /api/submissions/[id]/grade` - Grade submission (teachers only)\n\n### Messages\n- `GET /api/messages` - Get all messages\n- `POST /api/messages` - Send message (all authenticated users)\n\n### News\n- `GET /api/news` - Get all news\n- `POST /api/news` - Publish news (admin/head only)\n- `PUT /api/news/[id]` - Update news (admin/head only)\n- `DELETE /api/news/[id]` - Delete news (admin/head only)\n\n### Users\n- `GET /api/users` - Get all users (admin only)\n- `POST /api/users` - Create user (admin only)\n- `DELETE /api/users/[id]` - Delete user (admin only)\n\n## User Roles & Permissions\n\n| Feature | Student | Teacher | Head | Admin |\n|---------|---------|---------|------|-------|\n| View Courses |  (own dept) |  |  |  |\n| Create Course |  |  |  |  |\n| Upload Material |  |  |  |  |\n| Submit Assignment |  |  |  |  |\n| Grade Submission |  |  |  |  |\n| Manage Users |  |  |  |  |\n| Publish News |  |  |  |  |\n| Send Messages |  |  |  |  |\n\n## Deployment\n\n### Deploy to Vercel\n\n1. Push your code to GitHub\n2. Import your repository in Vercel\n3. Add environment variables in Vercel dashboard:\n   - `MONGODB_URI`\n   - `JWT_SECRET`\n   - `NEXT_PUBLIC_APP_URL`\n4. Deploy\n\n### Deploy to Other Platforms\n\nThe application can be deployed to any platform that supports Next.js:\n- **Netlify**: Use the Next.js build plugin\n- **Railway**: Connect GitHub and deploy\n- **AWS/DigitalOcean**: Use Docker or PM2\n\n## Security Best Practices\n\n1. **Never commit `.env.local`** to version control\n2. **Use strong JWT secrets** in production\n3. **Enable MongoDB authentication** in production\n4. **Use HTTPS** for all production deployments\n5. **Implement rate limiting** for API routes\n6. **Regularly update dependencies** for security patches\n7. **Validate and sanitize** all user inputs\n8. **Use environment-specific** MongoDB databases\n\n## Troubleshooting\n\n### MongoDB Connection Issues\n- Ensure MongoDB is running: `mongosh`\n- Check your `MONGODB_URI` in `.env.local`\n- Verify network access if using MongoDB Atlas\n\n### Authentication Issues\n- Clear browser cookies and localStorage\n- Verify `JWT_SECRET` is set in `.env.local`\n- Check if the user exists in the database\n\n### Build Errors\n- Delete `.next` folder and `node_modules`\n- Run `npm install` again\n- Clear npm cache: `npm cache clean --force`\n\n## Contributing\n\nThis project was developed as a senior project for Woldia University Computer Science Department by:\n- Haymanot Adane (WDU1201098)\n- Muaz Umer (WDU1201536)\n- Salih Mohammed (WDU1201721)\n- Yisehak Mulugeta (WDU1202178)\n- Yitayew Ahmed (WDU1202180)\n\n## Support\n\nFor issues and questions:\n- Check the documentation above\n- Review error logs in the console\n- Contact the ICT directorate at Woldia University\n\n## License\n\nCopyright  2023 Woldia University. All rights reserved.\n","size_bytes":12204},"app/admin/messages/page.tsx":{"content":"\"use client\"\n\nimport type React from \"react\"\n\nimport { useState, useEffect, useRef } from \"react\"\nimport { useAuth } from \"@/components/auth-provider\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Send, RefreshCw } from \"lucide-react\"\nimport { toast } from \"sonner\"\n\ninterface Message {\n  _id: string\n  senderId: string\n  senderName: string\n  senderRole: string\n  content: string\n  createdAt: string\n}\n\nexport default function AdminMessagesPage() {\n  const { token, user } = useAuth()\n  const [messages, setMessages] = useState<Message[]>([])\n  const [newMessage, setNewMessage] = useState(\"\")\n  const [loading, setLoading] = useState(false)\n  const [sending, setSending] = useState(false)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\n  }\n\n  const fetchMessages = async () => {\n    try {\n      setLoading(true)\n      const response = await fetch(\"/api/messages\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        setMessages(data)\n        setTimeout(scrollToBottom, 100)\n      }\n    } catch (error) {\n      console.error(\"Error fetching messages:\", error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchMessages()\n    const interval = setInterval(fetchMessages, 10000)\n    return () => clearInterval(interval)\n  }, [token])\n\n  const handleSendMessage = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!newMessage.trim()) return\n\n    try {\n      setSending(true)\n      const response = await fetch(\"/api/messages\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({ content: newMessage }),\n      })\n\n      if (response.ok) {\n        setNewMessage(\"\")\n        fetchMessages()\n        toast.success(\"Message sent\")\n      } else {\n        toast.error(\"Failed to send message\")\n      }\n    } catch (error) {\n      console.error(\"Error sending message:\", error)\n      toast.error(\"Failed to send message\")\n    } finally {\n      setSending(false)\n    }\n  }\n\n  const getRoleBadgeColor = (role: string) => {\n    switch (role) {\n      case \"admin\":\n        return \"bg-destructive text-destructive-foreground\"\n      case \"teacher\":\n        return \"bg-primary text-primary-foreground\"\n      case \"head\":\n        return \"bg-accent text-accent-foreground\"\n      default:\n        return \"bg-muted text-muted-foreground\"\n    }\n  }\n\n  return (\n    <div className=\"container mx-auto p-6 max-w-4xl\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <h1 className=\"text-3xl font-bold\">Communication Center</h1>\n        <Button variant=\"outline\" size=\"sm\" onClick={fetchMessages} disabled={loading}>\n          <RefreshCw className={`h-4 w-4 mr-2 ${loading ? \"animate-spin\" : \"\"}`} />\n          Refresh\n        </Button>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Group Chat - Monitor & Communicate</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"h-[500px] overflow-y-auto mb-4 space-y-4 p-4 bg-muted/30 rounded-lg\">\n            {messages.length === 0 ? (\n              <div className=\"flex items-center justify-center h-full text-muted-foreground\">\n                No messages yet. Start the conversation!\n              </div>\n            ) : (\n              messages.map((message) => {\n                const isOwnMessage = message.senderId === user?._id\n                return (\n                  <div key={message._id} className={`flex ${isOwnMessage ? \"justify-end\" : \"justify-start\"}`}>\n                    <div className={`max-w-[70%] ${isOwnMessage ? \"items-end\" : \"items-start\"} flex flex-col gap-1`}>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm font-medium\">{message.senderName}</span>\n                        <span className={`text-xs px-2 py-0.5 rounded-full ${getRoleBadgeColor(message.senderRole)}`}>\n                          {message.senderRole}\n                        </span>\n                      </div>\n                      <div\n                        className={`p-3 rounded-lg ${\n                          isOwnMessage ? \"bg-primary text-primary-foreground\" : \"bg-card border\"\n                        }`}\n                      >\n                        <p className=\"text-sm whitespace-pre-wrap break-words\">{message.content}</p>\n                        <p\n                          className={`text-xs mt-1 ${\n                            isOwnMessage ? \"text-primary-foreground/70\" : \"text-muted-foreground\"\n                          }`}\n                        >\n                          {new Date(message.createdAt).toLocaleString()}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                )\n              })\n            )}\n            <div ref={messagesEndRef} />\n          </div>\n\n          <form onSubmit={handleSendMessage} className=\"flex gap-2\">\n            <Textarea\n              placeholder=\"Type your message...\"\n              value={newMessage}\n              onChange={(e) => setNewMessage(e.target.value)}\n              className=\"min-h-[60px]\"\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\" && !e.shiftKey) {\n                  e.preventDefault()\n                  handleSendMessage(e)\n                }\n              }}\n            />\n            <Button type=\"submit\" disabled={sending || !newMessage.trim()} className=\"self-end\">\n              <Send className=\"h-4 w-4 mr-2\" />\n              Send\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n","size_bytes":5996},"app/student/news/page.tsx":{"content":"\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Newspaper } from \"lucide-react\"\n\ninterface NewsItem {\n  _id: string\n  title: string\n  content: string\n  createdAt: string\n}\n\nexport default function StudentNewsPage() {\n  const [news, setNews] = useState<NewsItem[]>([])\n\n  useEffect(() => {\n    fetchNews()\n  }, [])\n\n  const fetchNews = async () => {\n    try {\n      const response = await fetch(\"/api/news\")\n      if (response.ok) {\n        const data = await response.json()\n        setNews(data.news)\n      }\n    } catch (error) {\n      console.error(\"[v0] Fetch news error:\", error)\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold mb-2\">University News</h1>\n        <p className=\"text-muted-foreground\">Latest updates and announcements</p>\n      </div>\n\n      <div className=\"grid gap-4\">\n        {news.map((item) => (\n          <Card key={item._id}>\n            <CardHeader>\n              <div className=\"flex items-start gap-3\">\n                <div className=\"bg-primary/10 p-2 rounded\">\n                  <Newspaper className=\"h-5 w-5 text-primary\" />\n                </div>\n                <div>\n                  <CardTitle>{item.title}</CardTitle>\n                  <CardDescription>\n                    {new Date(item.createdAt).toLocaleDateString()} at {new Date(item.createdAt).toLocaleTimeString()}\n                  </CardDescription>\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-sm text-muted-foreground leading-relaxed\">{item.content}</p>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    </div>\n  )\n}\n","size_bytes":1802},"app/api/assignments/route.ts":{"content":"import { type NextRequest, NextResponse } from \"next/server\"\nimport { getDatabase } from \"@/lib/mongodb\"\nimport { getSession } from \"@/lib/auth\"\nimport type { Assignment } from \"@/lib/models\"\n\nexport async function GET(request: NextRequest) {\n  try {\n    const session = await getSession()\n    if (!session) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const { searchParams } = new URL(request.url)\n    const courseId = searchParams.get(\"courseId\")\n\n    const db = await getDatabase()\n    const assignmentsCollection = db.collection<Assignment>(\"assignments\")\n\n    const query: any = {}\n    if (courseId) {\n      query.courseId = courseId\n    }\n\n    const assignments = await assignmentsCollection.find(query).sort({ dueDate: 1 }).toArray()\n\n    return NextResponse.json({ assignments })\n  } catch (error) {\n    console.error(\"[v0] Get assignments error:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await getSession()\n    if (!session || session.role !== \"teacher\") {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const body = await request.json()\n    const { courseId, title, description, dueDate, totalPoints, fileUrl } = body\n\n    if (!courseId || !title || !dueDate || !totalPoints) {\n      return NextResponse.json({ error: \"Missing required fields\" }, { status: 400 })\n    }\n\n    const db = await getDatabase()\n    const assignmentsCollection = db.collection<Assignment>(\"assignments\")\n\n    const newAssignment: Assignment = {\n      courseId,\n      title,\n      description,\n      dueDate: new Date(dueDate),\n      totalPoints,\n      fileUrl,\n      createdBy: session.userId as string,\n      createdAt: new Date(),\n    }\n\n    const result = await assignmentsCollection.insertOne(newAssignment)\n\n    return NextResponse.json(\n      { message: \"Assignment created successfully\", assignmentId: result.insertedId },\n      { status: 201 },\n    )\n  } catch (error) {\n    console.error(\"[v0] Create assignment error:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n","size_bytes":2229},"components/ui/breadcrumb.tsx":{"content":"import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { ChevronRight, MoreHorizontal } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Breadcrumb({ ...props }: React.ComponentProps<'nav'>) {\n  return <nav aria-label=\"breadcrumb\" data-slot=\"breadcrumb\" {...props} />\n}\n\nfunction BreadcrumbList({ className, ...props }: React.ComponentProps<'ol'>) {\n  return (\n    <ol\n      data-slot=\"breadcrumb-list\"\n      className={cn(\n        'text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction BreadcrumbItem({ className, ...props }: React.ComponentProps<'li'>) {\n  return (\n    <li\n      data-slot=\"breadcrumb-item\"\n      className={cn('inline-flex items-center gap-1.5', className)}\n      {...props}\n    />\n  )\n}\n\nfunction BreadcrumbLink({\n  asChild,\n  className,\n  ...props\n}: React.ComponentProps<'a'> & {\n  asChild?: boolean\n}) {\n  const Comp = asChild ? Slot : 'a'\n\n  return (\n    <Comp\n      data-slot=\"breadcrumb-link\"\n      className={cn('hover:text-foreground transition-colors', className)}\n      {...props}\n    />\n  )\n}\n\nfunction BreadcrumbPage({ className, ...props }: React.ComponentProps<'span'>) {\n  return (\n    <span\n      data-slot=\"breadcrumb-page\"\n      role=\"link\"\n      aria-disabled=\"true\"\n      aria-current=\"page\"\n      className={cn('text-foreground font-normal', className)}\n      {...props}\n    />\n  )\n}\n\nfunction BreadcrumbSeparator({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<'li'>) {\n  return (\n    <li\n      data-slot=\"breadcrumb-separator\"\n      role=\"presentation\"\n      aria-hidden=\"true\"\n      className={cn('[&>svg]:size-3.5', className)}\n      {...props}\n    >\n      {children ?? <ChevronRight />}\n    </li>\n  )\n}\n\nfunction BreadcrumbEllipsis({\n  className,\n  ...props\n}: React.ComponentProps<'span'>) {\n  return (\n    <span\n      data-slot=\"breadcrumb-ellipsis\"\n      role=\"presentation\"\n      aria-hidden=\"true\"\n      className={cn('flex size-9 items-center justify-center', className)}\n      {...props}\n    >\n      <MoreHorizontal className=\"size-4\" />\n      <span className=\"sr-only\">More</span>\n    </span>\n  )\n}\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2358},"app/api/courses/route.ts":{"content":"import { type NextRequest, NextResponse } from \"next/server\"\nimport { getDatabase } from \"@/lib/mongodb\"\nimport { getSession } from \"@/lib/auth\"\nimport type { Course } from \"@/lib/models\"\n\nexport async function GET(request: NextRequest) {\n  try {\n    const session = await getSession()\n    if (!session) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const db = await getDatabase()\n    const coursesCollection = db.collection<Course>(\"courses\")\n\n    const { searchParams } = new URL(request.url)\n    const teacherId = searchParams.get(\"teacherId\")\n    const department = searchParams.get(\"department\")\n\n    const query: any = {}\n    if (teacherId) {\n      query.teacherId = teacherId\n    }\n    if (department) {\n      query.department = department\n    }\n\n    const courses = await coursesCollection.find(query).toArray()\n\n    return NextResponse.json({ courses })\n  } catch (error) {\n    console.error(\"[v0] Get courses error:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await getSession()\n    if (!session || (session.role !== \"teacher\" && session.role !== \"admin\")) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const body = await request.json()\n    const { title, code, description, department, year, semester } = body\n\n    if (!title || !code || !department || !year || !semester) {\n      return NextResponse.json({ error: \"Missing required fields\" }, { status: 400 })\n    }\n\n    const db = await getDatabase()\n    const coursesCollection = db.collection<Course>(\"courses\")\n\n    const newCourse: Course = {\n      title,\n      code,\n      description,\n      department,\n      year,\n      semester,\n      teacherId: session.userId as string,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    }\n\n    const result = await coursesCollection.insertOne(newCourse)\n\n    return NextResponse.json({ message: \"Course created successfully\", courseId: result.insertedId }, { status: 201 })\n  } catch (error) {\n    console.error(\"[v0] Create course error:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n","size_bytes":2271},"app/page.tsx":{"content":"import Link from \"next/link\"\nimport { Button } from \"@/components/ui/button\"\nimport { BookOpen, Users, GraduationCap, Shield } from \"lucide-react\"\nimport { ThemeToggle } from \"@/components/theme-toggle\"\n\nexport default function HomePage() {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-blue-50 to-white dark:from-slate-950 dark:to-slate-900\">\n      {/* Hero Section */}\n      <header className=\"container mx-auto px-4 py-6\">\n        <nav className=\"flex flex-col sm:flex-row items-center justify-between gap-4\">\n          <div className=\"flex items-center gap-2\">\n            <GraduationCap className=\"h-8 w-8 text-primary\" />\n            <span className=\"text-lg sm:text-xl font-bold text-foreground\">Woldia University ELS</span>\n          </div>\n          <div className=\"flex gap-3 items-center\">\n            <ThemeToggle />\n            <Link href=\"/login\">\n              <Button variant=\"outline\">Login</Button>\n            </Link>\n            <Link href=\"/register\">\n              <Button>Get Started</Button>\n            </Link>\n          </div>\n        </nav>\n      </header>\n\n      <main className=\"container mx-auto px-4 py-8 sm:py-16\">\n        {/* Hero Content */}\n        <div className=\"text-center max-w-3xl mx-auto mb-12 sm:mb-16\">\n          <h1 className=\"text-3xl sm:text-4xl md:text-5xl font-bold text-foreground mb-4 sm:mb-6\">\n            Welcome to Woldia University E-Learning System\n          </h1>\n          <p className=\"text-base sm:text-lg md:text-xl text-muted-foreground mb-6 sm:mb-8 leading-relaxed\">\n            A comprehensive online learning platform designed to enhance education through digital innovation. Access\n            courses, submit assignments, and communicate with instructors anytime, anywhere.\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <Link href=\"/register\">\n              <Button size=\"lg\" className=\"text-base sm:text-lg px-6 sm:px-8 w-full sm:w-auto\">\n                Start Learning\n              </Button>\n            </Link>\n            <Link href=\"/about\">\n              <Button\n                size=\"lg\"\n                variant=\"outline\"\n                className=\"text-base sm:text-lg px-6 sm:px-8 w-full sm:w-auto bg-transparent\"\n              >\n                Learn More\n              </Button>\n            </Link>\n          </div>\n        </div>\n\n        {/* Features Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 max-w-5xl mx-auto\">\n          <div className=\"bg-card border border-border rounded-lg p-6 sm:p-8 text-center hover:shadow-lg transition-shadow\">\n            <div className=\"bg-primary/10 w-14 h-14 sm:w-16 sm:h-16 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <BookOpen className=\"h-7 w-7 sm:h-8 sm:w-8 text-primary\" />\n            </div>\n            <h3 className=\"text-lg sm:text-xl font-bold mb-2 sm:mb-3\">Course Materials</h3>\n            <p className=\"text-sm sm:text-base text-muted-foreground leading-relaxed\">\n              Access comprehensive course materials, lecture notes, and resources uploaded by your instructors in one\n              centralized location.\n            </p>\n          </div>\n\n          <div className=\"bg-card border border-border rounded-lg p-6 sm:p-8 text-center hover:shadow-lg transition-shadow\">\n            <div className=\"bg-accent/10 w-14 h-14 sm:w-16 sm:h-16 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <Users className=\"h-7 w-7 sm:h-8 sm:w-8 text-accent\" />\n            </div>\n            <h3 className=\"text-lg sm:text-xl font-bold mb-2 sm:mb-3\">Interactive Learning</h3>\n            <p className=\"text-sm sm:text-base text-muted-foreground leading-relaxed\">\n              Engage with instructors and classmates through real-time messaging and collaborative discussion forums.\n            </p>\n          </div>\n\n          <div className=\"bg-card border border-border rounded-lg p-6 sm:p-8 text-center hover:shadow-lg transition-shadow\">\n            <div className=\"bg-success/10 w-14 h-14 sm:w-16 sm:h-16 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <Shield className=\"h-7 w-7 sm:h-8 sm:w-8 text-success\" />\n            </div>\n            <h3 className=\"text-lg sm:text-xl font-bold mb-2 sm:mb-3\">Assignment Management</h3>\n            <p className=\"text-sm sm:text-base text-muted-foreground leading-relaxed\">\n              Submit assignments online, track deadlines, and receive feedback from instructors efficiently.\n            </p>\n          </div>\n        </div>\n\n        {/* Stats Section */}\n        <div className=\"mt-16 sm:mt-24 bg-primary text-primary-foreground rounded-2xl p-8 sm:p-12\">\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-6 sm:gap-8 text-center\">\n            <div>\n              <div className=\"text-3xl sm:text-4xl font-bold mb-2\">1000+</div>\n              <div className=\"text-sm sm:text-base text-primary-foreground/80\">Active Students</div>\n            </div>\n            <div>\n              <div className=\"text-3xl sm:text-4xl font-bold mb-2\">100+</div>\n              <div className=\"text-sm sm:text-base text-primary-foreground/80\">Faculty Members</div>\n            </div>\n            <div>\n              <div className=\"text-3xl sm:text-4xl font-bold mb-2\">50+</div>\n              <div className=\"text-sm sm:text-base text-primary-foreground/80\">Courses Available</div>\n            </div>\n            <div>\n              <div className=\"text-3xl sm:text-4xl font-bold mb-2\">24/7</div>\n              <div className=\"text-sm sm:text-base text-primary-foreground/80\">Platform Access</div>\n            </div>\n          </div>\n        </div>\n      </main>\n\n      {/* Footer */}\n      <footer className=\"border-t border-border mt-16 sm:mt-24 py-8\">\n        <div className=\"container mx-auto px-4 text-center text-sm sm:text-base text-muted-foreground\">\n          <p>&copy; 2023 Woldia University. All rights reserved.</p>\n        </div>\n      </footer>\n    </div>\n  )\n}\n","size_bytes":6031},"app/teacher/courses/page.tsx":{"content":"\"use client\"\n\nimport type React from \"react\"\n\nimport { useEffect, useState } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { Plus, Users, BookOpen } from \"lucide-react\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n\ninterface Course {\n  _id: string\n  title: string\n  code: string\n  description: string\n  department: string\n  year: number\n  semester: number\n}\n\nexport default function TeacherCoursesPage() {\n  const [courses, setCourses] = useState<Course[]>([])\n  const [loading, setLoading] = useState(true)\n  const [open, setOpen] = useState(false)\n  const [formData, setFormData] = useState({\n    title: \"\",\n    code: \"\",\n    description: \"\",\n    department: \"\",\n    year: \"\",\n    semester: \"\",\n  })\n  const { toast } = useToast()\n\n  useEffect(() => {\n    fetchCourses()\n  }, [])\n\n  const fetchCourses = async () => {\n    try {\n      const response = await fetch(\"/api/courses\")\n      if (response.ok) {\n        const data = await response.json()\n        setCourses(data.courses)\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to load courses\",\n        variant: \"destructive\",\n      })\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    try {\n      const response = await fetch(\"/api/courses\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          ...formData,\n          year: Number.parseInt(formData.year),\n          semester: Number.parseInt(formData.semester),\n        }),\n      })\n\n      if (response.ok) {\n        toast({\n          title: \"Success\",\n          description: \"Course created successfully\",\n        })\n        fetchCourses()\n        setOpen(false)\n        setFormData({\n          title: \"\",\n          code: \"\",\n          description: \"\",\n          department: \"\",\n          year: \"\",\n          semester: \"\",\n        })\n      } else {\n        const data = await response.json()\n        throw new Error(data.error)\n      }\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      })\n    }\n  }\n\n  if (loading) {\n    return <div>Loading courses...</div>\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold mb-2\">My Courses</h1>\n          <p className=\"text-muted-foreground\">Manage your courses and curriculum</p>\n        </div>\n        <Dialog open={open} onOpenChange={setOpen}>\n          <DialogTrigger asChild>\n            <Button>\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Create Course\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-2xl\">\n            <DialogHeader>\n              <DialogTitle>Create New Course</DialogTitle>\n              <DialogDescription>Add a new course to your teaching schedule</DialogDescription>\n            </DialogHeader>\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div className=\"grid md:grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"title\">Course Title</Label>\n                  <Input\n                    id=\"title\"\n                    placeholder=\"Introduction to Programming\"\n                    value={formData.title}\n                    onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                    required\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"code\">Course Code</Label>\n                  <Input\n                    id=\"code\"\n                    placeholder=\"CS101\"\n                    value={formData.code}\n                    onChange={(e) => setFormData({ ...formData, code: e.target.value })}\n                    required\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"description\">Description</Label>\n                <Textarea\n                  id=\"description\"\n                  placeholder=\"Course description...\"\n                  value={formData.description}\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                  rows={3}\n                />\n              </div>\n\n              <div className=\"grid md:grid-cols-3 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"department\">Department</Label>\n                  <Input\n                    id=\"department\"\n                    placeholder=\"Computer Science\"\n                    value={formData.department}\n                    onChange={(e) => setFormData({ ...formData, department: e.target.value })}\n                    required\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"year\">Year</Label>\n                  <Select value={formData.year} onValueChange={(value) => setFormData({ ...formData, year: value })}>\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Select year\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"1\">1st Year</SelectItem>\n                      <SelectItem value=\"2\">2nd Year</SelectItem>\n                      <SelectItem value=\"3\">3rd Year</SelectItem>\n                      <SelectItem value=\"4\">4th Year</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"semester\">Semester</Label>\n                  <Select\n                    value={formData.semester}\n                    onValueChange={(value) => setFormData({ ...formData, semester: value })}\n                  >\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Select semester\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"1\">Semester 1</SelectItem>\n                      <SelectItem value=\"2\">Semester 2</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n\n              <Button type=\"submit\" className=\"w-full\">\n                Create Course\n              </Button>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {courses.map((course) => (\n          <Card key={course._id} className=\"hover:shadow-lg transition-shadow\">\n            <CardHeader>\n              <div className=\"flex items-start justify-between\">\n                <div>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <BookOpen className=\"h-5 w-5 text-primary\" />\n                    {course.code}\n                  </CardTitle>\n                  <CardDescription className=\"mt-2\">{course.title}</CardDescription>\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-sm text-muted-foreground mb-4\">{course.description}</p>\n              <div className=\"flex items-center justify-between text-xs text-muted-foreground\">\n                <span>{course.department}</span>\n                <span>\n                  Year {course.year}, Sem {course.semester}\n                </span>\n              </div>\n              <div className=\"mt-4 pt-4 border-t flex items-center gap-2 text-sm\">\n                <Users className=\"h-4 w-4\" />\n                <span className=\"text-muted-foreground\">45 students</span>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    </div>\n  )\n}\n","size_bytes":8426},"components/ui/radio-group.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as RadioGroupPrimitive from '@radix-ui/react-radio-group'\nimport { CircleIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction RadioGroup({\n  className,\n  ...props\n}: React.ComponentProps<typeof RadioGroupPrimitive.Root>) {\n  return (\n    <RadioGroupPrimitive.Root\n      data-slot=\"radio-group\"\n      className={cn('grid gap-3', className)}\n      {...props}\n    />\n  )\n}\n\nfunction RadioGroupItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof RadioGroupPrimitive.Item>) {\n  return (\n    <RadioGroupPrimitive.Item\n      data-slot=\"radio-group-item\"\n      className={cn(\n        'border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator\n        data-slot=\"radio-group-indicator\"\n        className=\"relative flex items-center justify-center\"\n      >\n        <CircleIcon className=\"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n}\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"replit.md":{"content":"# Woldia University E-Learning System (WDUELS)\n\n## Project Overview\nThis is a comprehensive web-based Learning Management System (LMS) for Woldia University that enables students to access course materials, submit assignments, and communicate with instructors. The platform supports multiple user roles: students, teachers, department heads, and administrators.\n\n## Recent Changes\n**November 24, 2025 - Latest Session**\n- Implemented secure file upload system with UUID-based tokens\n- Added `uploads` collection to track file metadata\n- Updated materials and submissions APIs to support file uploads\n- Created secure download API with record-level authorization\n- Updated frontend pages to properly handle file downloads\n- Fixed messaging system to display user names correctly (firstName + lastName)\n- Implemented Telegram-like messaging UI (sender on right, receiver on left)\n- Added fallback handling for users without firstName/lastName in messaging\n- Added backwards compatibility for legacy file URLs and paths\n- Files stored outside web root for security (new uploads)\n\n**November 24, 2025 - Initial Setup**\n- Configured project for Replit environment\n- Set up Next.js dev server on port 5000 with host 0.0.0.0\n- Configured Next.js 16 to use Turbopack\n- Set up environment variables (JWT_SECRET, NEXT_PUBLIC_APP_URL)\n- Installed all npm dependencies\n- Workflow configured for development server\n\n## Technology Stack\n\n### Frontend\n- **Framework**: Next.js 15 (App Router) - upgraded to 16.0.3\n- **UI Library**: React 19\n- **Styling**: Tailwind CSS v4\n- **UI Components**: shadcn/ui with Radix UI primitives\n- **Icons**: Lucide React\n- **State Management**: React Context API\n- **Form Handling**: React Hook Form with Zod validation\n\n### Backend\n- **Runtime**: Node.js\n- **Framework**: Next.js API Routes\n- **Authentication**: JWT (JSON Web Tokens)\n- **Password Hashing**: bcryptjs\n\n### Database\n- **Database**: MongoDB (requires connection string)\n- **ODM**: Native MongoDB Node.js Driver\n\n## Project Architecture\n\n### Key Features\n1. **Student Portal**: View courses, download materials, submit assignments, messaging\n2. **Teacher Portal**: Create courses, upload materials, manage assignments, grading\n3. **Admin Dashboard**: User management, news publishing, system statistics\n4. **Department Head**: Departmental oversight and management\n\n### File Structure\n- `/app` - Next.js app router pages and API routes\n  - `/app/api/upload` - Secure file upload endpoint\n  - `/app/api/download` - Secure file download endpoint with authorization\n  - `/app/api/materials` - Course materials management\n  - `/app/api/submissions` - Assignment submissions management\n  - `/app/api/messages` - Messaging system\n- `/components` - Reusable React components and UI primitives\n- `/lib` - Utility functions, database connection, models, auth\n- `/public` - Static assets (images, icons)\n- `/uploads` - Secure file storage (outside web root, gitignored)\n- `/scripts` - Database initialization scripts\n\n## Environment Setup\n\n### Required Environment Variables\n- `MONGODB_URI` - MongoDB connection string (required, not yet configured)\n- `JWT_SECRET` - Secret key for JWT token generation (configured)\n- `NEXT_PUBLIC_APP_URL` - Public URL for the application (configured)\n\n### Database Setup\nThe application requires a MongoDB database. Once connected, run the initialization script to create the admin user:\n```bash\nMONGODB_URI=<your-connection-string> node scripts/init-admin.js\n```\n\nDefault admin credentials:\n- Email: admin@woldia.edu.et\n- Password: admin123\n\n## Development\n\n### Running the Application\nThe workflow is configured to run:\n```bash\nnpm run dev\n```\nThis starts the Next.js server on port 5000 at 0.0.0.0.\n\n### Database Collections\n- `users` - User accounts (students, teachers, admins, heads)\n- `courses` - Course information\n- `materials` - Course materials and files\n- `assignments` - Assignment details\n- `submissions` - Student assignment submissions\n- `messages` - User messages\n- `news` - University announcements\n- `uploads` - File upload metadata and tokens (new secure system)\n\n### File Upload System\nThe application uses a secure token-based file upload system:\n- Files uploaded through `/api/upload` receive unique UUID tokens\n- Upload metadata stored in `uploads` collection with expiration (24hrs)\n- Tokens are one-time use and linked to database records\n- Files stored in `/uploads` directory (outside web root)\n- Downloads require record IDs (materialId/submissionId) for authorization\n- Backwards compatible with legacy HTTP URLs and `/uploads/...` paths\n\n**Security Features:**\n- 50MB file size limit\n- MIME type validation (PDF, Word, PowerPoint, ZIP, video, audio)\n- File extension validation\n- Role-based upload permissions\n- Record-level download authorization\n- UUID-based filenames prevent file enumeration\n- Safe HTTP headers (Content-Type, Content-Disposition, nosniff)\n\n## Deployment Configuration\nConfigured for autoscale deployment suitable for the stateless Next.js application. MongoDB connection required for full functionality.\n\n## User Preferences\n- None documented yet\n\n## Notes\n- TypeScript build errors are currently ignored (ignoreBuildErrors: true)\n- Images are unoptimized for faster development\n- Using Turbopack (Next.js 16 default)\n- The application binds to 0.0.0.0:5000 to work with Replit's proxy system\n- Admin user updated with firstName=\"Admin\" and lastName=\"User\"\n- Messaging system displays sender names with fallback to email for users without firstName/lastName\n- File uploads stored in `/uploads` directory (gitignored)\n- Both new secure token system and legacy URL-based uploads supported simultaneously\n\n## Known Limitations\n- Course enrollment checking not implemented (all authenticated users can access all materials)\n- For production use, consider:\n  - Implementing course enrollment validation\n  - Adding virus scanning for uploaded files\n  - Setting up automated cleanup of expired upload tokens\n  - Implementing file versioning for materials\n  - Adding file preview functionality\n","size_bytes":6047},"hooks/use-toast.ts":{"content":"'use client'\n\n// Inspired by react-hot-toast library\nimport * as React from 'react'\n\nimport type { ToastActionElement, ToastProps } from '@/components/ui/toast'\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: 'ADD_TOAST',\n  UPDATE_TOAST: 'UPDATE_TOAST',\n  DISMISS_TOAST: 'DISMISS_TOAST',\n  REMOVE_TOAST: 'REMOVE_TOAST',\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType['ADD_TOAST']\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType['UPDATE_TOAST']\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType['DISMISS_TOAST']\n      toastId?: ToasterToast['id']\n    }\n  | {\n      type: ActionType['REMOVE_TOAST']\n      toastId?: ToasterToast['id']\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: 'REMOVE_TOAST',\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'ADD_TOAST':\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case 'UPDATE_TOAST':\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t,\n        ),\n      }\n\n    case 'DISMISS_TOAST': {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t,\n        ),\n      }\n    }\n    case 'REMOVE_TOAST':\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, 'id'>\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: 'UPDATE_TOAST',\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id })\n\n  dispatch({\n    type: 'ADD_TOAST',\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3945},"components/ui/chart.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as RechartsPrimitive from 'recharts'\n\nimport { cn } from '@/lib/utils'\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: '', dark: '.dark' } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error('useChart must be used within a <ChartContainer />')\n  }\n\n  return context\n}\n\nfunction ChartContainer({\n  id,\n  className,\n  children,\n  config,\n  ...props\n}: React.ComponentProps<'div'> & {\n  config: ChartConfig\n  children: React.ComponentProps<\n    typeof RechartsPrimitive.ResponsiveContainer\n  >['children']\n}) {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, '')}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-slot=\"chart\"\n        data-chart={chartId}\n        className={cn(\n          \"[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden\",\n          className,\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n}\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color,\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join('\\n')}\n}\n`,\n          )\n          .join('\\n'),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nfunction ChartTooltipContent({\n  active,\n  payload,\n  className,\n  indicator = 'dot',\n  hideLabel = false,\n  hideIndicator = false,\n  label,\n  labelFormatter,\n  labelClassName,\n  formatter,\n  color,\n  nameKey,\n  labelKey,\n}: React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n  React.ComponentProps<'div'> & {\n    hideLabel?: boolean\n    hideIndicator?: boolean\n    indicator?: 'line' | 'dot' | 'dashed'\n    nameKey?: string\n    labelKey?: string\n  }) {\n  const { config } = useChart()\n\n  const tooltipLabel = React.useMemo(() => {\n    if (hideLabel || !payload?.length) {\n      return null\n    }\n\n    const [item] = payload\n    const key = `${labelKey || item?.dataKey || item?.name || 'value'}`\n    const itemConfig = getPayloadConfigFromPayload(config, item, key)\n    const value =\n      !labelKey && typeof label === 'string'\n        ? config[label as keyof typeof config]?.label || label\n        : itemConfig?.label\n\n    if (labelFormatter) {\n      return (\n        <div className={cn('font-medium', labelClassName)}>\n          {labelFormatter(value, payload)}\n        </div>\n      )\n    }\n\n    if (!value) {\n      return null\n    }\n\n    return <div className={cn('font-medium', labelClassName)}>{value}</div>\n  }, [\n    label,\n    labelFormatter,\n    payload,\n    hideLabel,\n    labelClassName,\n    config,\n    labelKey,\n  ])\n\n  if (!active || !payload?.length) {\n    return null\n  }\n\n  const nestLabel = payload.length === 1 && indicator !== 'dot'\n\n  return (\n    <div\n      className={cn(\n        'border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl',\n        className,\n      )}\n    >\n      {!nestLabel ? tooltipLabel : null}\n      <div className=\"grid gap-1.5\">\n        {payload.map((item, index) => {\n          const key = `${nameKey || item.name || item.dataKey || 'value'}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n          const indicatorColor = color || item.payload.fill || item.color\n\n          return (\n            <div\n              key={item.dataKey}\n              className={cn(\n                '[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5',\n                indicator === 'dot' && 'items-center',\n              )}\n            >\n              {formatter && item?.value !== undefined && item.name ? (\n                formatter(item.value, item.name, item, index, item.payload)\n              ) : (\n                <>\n                  {itemConfig?.icon ? (\n                    <itemConfig.icon />\n                  ) : (\n                    !hideIndicator && (\n                      <div\n                        className={cn(\n                          'shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)',\n                          {\n                            'h-2.5 w-2.5': indicator === 'dot',\n                            'w-1': indicator === 'line',\n                            'w-0 border-[1.5px] border-dashed bg-transparent':\n                              indicator === 'dashed',\n                            'my-0.5': nestLabel && indicator === 'dashed',\n                          },\n                        )}\n                        style={\n                          {\n                            '--color-bg': indicatorColor,\n                            '--color-border': indicatorColor,\n                          } as React.CSSProperties\n                        }\n                      />\n                    )\n                  )}\n                  <div\n                    className={cn(\n                      'flex flex-1 justify-between leading-none',\n                      nestLabel ? 'items-end' : 'items-center',\n                    )}\n                  >\n                    <div className=\"grid gap-1.5\">\n                      {nestLabel ? tooltipLabel : null}\n                      <span className=\"text-muted-foreground\">\n                        {itemConfig?.label || item.name}\n                      </span>\n                    </div>\n                    {item.value && (\n                      <span className=\"text-foreground font-mono font-medium tabular-nums\">\n                        {item.value.toLocaleString()}\n                      </span>\n                    )}\n                  </div>\n                </>\n              )}\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nfunction ChartLegendContent({\n  className,\n  hideIcon = false,\n  payload,\n  verticalAlign = 'bottom',\n  nameKey,\n}: React.ComponentProps<'div'> &\n  Pick<RechartsPrimitive.LegendProps, 'payload' | 'verticalAlign'> & {\n    hideIcon?: boolean\n    nameKey?: string\n  }) {\n  const { config } = useChart()\n\n  if (!payload?.length) {\n    return null\n  }\n\n  return (\n    <div\n      className={cn(\n        'flex items-center justify-center gap-4',\n        verticalAlign === 'top' ? 'pb-3' : 'pt-3',\n        className,\n      )}\n    >\n      {payload.map((item) => {\n        const key = `${nameKey || item.dataKey || 'value'}`\n        const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n        return (\n          <div\n            key={item.value}\n            className={\n              '[&>svg]:text-muted-foreground flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3'\n            }\n          >\n            {itemConfig?.icon && !hideIcon ? (\n              <itemConfig.icon />\n            ) : (\n              <div\n                className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                style={{\n                  backgroundColor: item.color,\n                }}\n              />\n            )}\n            {itemConfig?.label}\n          </div>\n        )\n      })}\n    </div>\n  )\n}\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string,\n) {\n  if (typeof payload !== 'object' || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    'payload' in payload &&\n    typeof payload.payload === 'object' &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === 'string'\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === 'string'\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":9786},"app/api/auth/me/route.ts":{"content":"import { NextResponse } from \"next/server\"\nimport { getSession } from \"@/lib/auth\"\nimport { getDatabase } from \"@/lib/mongodb\"\nimport { ObjectId } from \"mongodb\"\n\nexport async function GET() {\n  try {\n    const session = await getSession()\n\n    if (!session) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const db = await getDatabase()\n    const usersCollection = db.collection(\"users\")\n\n    const user = await usersCollection.findOne(\n      { _id: new ObjectId(session.userId as string) },\n      { projection: { password: 0 } },\n    )\n\n    if (!user) {\n      return NextResponse.json({ error: \"User not found\" }, { status: 404 })\n    }\n\n    return NextResponse.json({ user })\n  } catch (error) {\n    console.error(\"[v0] Get user error:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n","size_bytes":876},"components/ui/calendar.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport {\n  ChevronDownIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n} from 'lucide-react'\nimport { DayButton, DayPicker, getDefaultClassNames } from 'react-day-picker'\n\nimport { cn } from '@/lib/utils'\nimport { Button, buttonVariants } from '@/components/ui/button'\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  captionLayout = 'label',\n  buttonVariant = 'ghost',\n  formatters,\n  components,\n  ...props\n}: React.ComponentProps<typeof DayPicker> & {\n  buttonVariant?: React.ComponentProps<typeof Button>['variant']\n}) {\n  const defaultClassNames = getDefaultClassNames()\n\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\n        'bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent',\n        String.raw`rtl:**:[.rdp-button\\_next>svg]:rotate-180`,\n        String.raw`rtl:**:[.rdp-button\\_previous>svg]:rotate-180`,\n        className,\n      )}\n      captionLayout={captionLayout}\n      formatters={{\n        formatMonthDropdown: (date) =>\n          date.toLocaleString('default', { month: 'short' }),\n        ...formatters,\n      }}\n      classNames={{\n        root: cn('w-fit', defaultClassNames.root),\n        months: cn(\n          'flex gap-4 flex-col md:flex-row relative',\n          defaultClassNames.months,\n        ),\n        month: cn('flex flex-col w-full gap-4', defaultClassNames.month),\n        nav: cn(\n          'flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between',\n          defaultClassNames.nav,\n        ),\n        button_previous: cn(\n          buttonVariants({ variant: buttonVariant }),\n          'size-(--cell-size) aria-disabled:opacity-50 p-0 select-none',\n          defaultClassNames.button_previous,\n        ),\n        button_next: cn(\n          buttonVariants({ variant: buttonVariant }),\n          'size-(--cell-size) aria-disabled:opacity-50 p-0 select-none',\n          defaultClassNames.button_next,\n        ),\n        month_caption: cn(\n          'flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)',\n          defaultClassNames.month_caption,\n        ),\n        dropdowns: cn(\n          'w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5',\n          defaultClassNames.dropdowns,\n        ),\n        dropdown_root: cn(\n          'relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md',\n          defaultClassNames.dropdown_root,\n        ),\n        dropdown: cn(\n          'absolute bg-popover inset-0 opacity-0',\n          defaultClassNames.dropdown,\n        ),\n        caption_label: cn(\n          'select-none font-medium',\n          captionLayout === 'label'\n            ? 'text-sm'\n            : 'rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5',\n          defaultClassNames.caption_label,\n        ),\n        table: 'w-full border-collapse',\n        weekdays: cn('flex', defaultClassNames.weekdays),\n        weekday: cn(\n          'text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none',\n          defaultClassNames.weekday,\n        ),\n        week: cn('flex w-full mt-2', defaultClassNames.week),\n        week_number_header: cn(\n          'select-none w-(--cell-size)',\n          defaultClassNames.week_number_header,\n        ),\n        week_number: cn(\n          'text-[0.8rem] select-none text-muted-foreground',\n          defaultClassNames.week_number,\n        ),\n        day: cn(\n          'relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none',\n          defaultClassNames.day,\n        ),\n        range_start: cn(\n          'rounded-l-md bg-accent',\n          defaultClassNames.range_start,\n        ),\n        range_middle: cn('rounded-none', defaultClassNames.range_middle),\n        range_end: cn('rounded-r-md bg-accent', defaultClassNames.range_end),\n        today: cn(\n          'bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none',\n          defaultClassNames.today,\n        ),\n        outside: cn(\n          'text-muted-foreground aria-selected:text-muted-foreground',\n          defaultClassNames.outside,\n        ),\n        disabled: cn(\n          'text-muted-foreground opacity-50',\n          defaultClassNames.disabled,\n        ),\n        hidden: cn('invisible', defaultClassNames.hidden),\n        ...classNames,\n      }}\n      components={{\n        Root: ({ className, rootRef, ...props }) => {\n          return (\n            <div\n              data-slot=\"calendar\"\n              ref={rootRef}\n              className={cn(className)}\n              {...props}\n            />\n          )\n        },\n        Chevron: ({ className, orientation, ...props }) => {\n          if (orientation === 'left') {\n            return (\n              <ChevronLeftIcon className={cn('size-4', className)} {...props} />\n            )\n          }\n\n          if (orientation === 'right') {\n            return (\n              <ChevronRightIcon\n                className={cn('size-4', className)}\n                {...props}\n              />\n            )\n          }\n\n          return (\n            <ChevronDownIcon className={cn('size-4', className)} {...props} />\n          )\n        },\n        DayButton: CalendarDayButton,\n        WeekNumber: ({ children, ...props }) => {\n          return (\n            <td {...props}>\n              <div className=\"flex size-(--cell-size) items-center justify-center text-center\">\n                {children}\n              </div>\n            </td>\n          )\n        },\n        ...components,\n      }}\n      {...props}\n    />\n  )\n}\n\nfunction CalendarDayButton({\n  className,\n  day,\n  modifiers,\n  ...props\n}: React.ComponentProps<typeof DayButton>) {\n  const defaultClassNames = getDefaultClassNames()\n\n  const ref = React.useRef<HTMLButtonElement>(null)\n  React.useEffect(() => {\n    if (modifiers.focused) ref.current?.focus()\n  }, [modifiers.focused])\n\n  return (\n    <Button\n      ref={ref}\n      variant=\"ghost\"\n      size=\"icon\"\n      data-day={day.date.toLocaleDateString()}\n      data-selected-single={\n        modifiers.selected &&\n        !modifiers.range_start &&\n        !modifiers.range_end &&\n        !modifiers.range_middle\n      }\n      data-range-start={modifiers.range_start}\n      data-range-end={modifiers.range_end}\n      data-range-middle={modifiers.range_middle}\n      className={cn(\n        'data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70',\n        defaultClassNames.day,\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Calendar, CalendarDayButton }\n","size_bytes":7679},"app/api/auth/login/route.ts":{"content":"import { type NextRequest, NextResponse } from \"next/server\"\nimport { getDatabase } from \"@/lib/mongodb\"\nimport { verifyPassword, createToken, setSession } from \"@/lib/auth\"\nimport type { User } from \"@/lib/models\"\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json()\n    const { email, password } = body\n\n    if (!email || !password) {\n      return NextResponse.json({ error: \"Email and password are required\" }, { status: 400 })\n    }\n\n    if (!process.env.MONGODB_URI) {\n      return NextResponse.json({ error: \"Database configuration error\" }, { status: 500 })\n    }\n\n    if (!process.env.JWT_SECRET) {\n      return NextResponse.json({ error: \"Authentication configuration error\" }, { status: 500 })\n    }\n\n    const db = await getDatabase()\n    const usersCollection = db.collection<User>(\"users\")\n\n    // Find user\n    const user = await usersCollection.findOne({ email })\n    if (!user) {\n      return NextResponse.json({ error: \"Invalid email or password\" }, { status: 401 })\n    }\n\n    // Verify password\n    const isValid = await verifyPassword(password, user.password)\n    if (!isValid) {\n      return NextResponse.json({ error: \"Invalid email or password\" }, { status: 401 })\n    }\n\n    // Create token\n    const token = await createToken({\n      userId: user._id,\n      email: user.email,\n      role: user.role,\n      firstName: user.firstName,\n      lastName: user.lastName,\n    })\n\n    // Set session\n    await setSession(token)\n\n    return NextResponse.json({\n      user: {\n        id: user._id,\n        email: user.email,\n        role: user.role,\n        firstName: user.firstName,\n        lastName: user.lastName,\n        department: user.department,\n        year: user.year,\n        semester: user.semester,\n      },\n    })\n  } catch (error: any) {\n    console.error(\"[v0] Login error:\", error.message)\n    return NextResponse.json({ error: `Login failed: ${error.message}` }, { status: 500 })\n  }\n}\n","size_bytes":1964},"components/ui/toggle.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as TogglePrimitive from '@radix-ui/react-toggle'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-transparent',\n        outline:\n          'border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground',\n      },\n      size: {\n        default: 'h-9 px-2 min-w-9',\n        sm: 'h-8 px-1.5 min-w-8',\n        lg: 'h-10 px-2.5 min-w-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Toggle({\n  className,\n  variant,\n  size,\n  ...props\n}: React.ComponentProps<typeof TogglePrimitive.Root> &\n  VariantProps<typeof toggleVariants>) {\n  return (\n    <TogglePrimitive.Root\n      data-slot=\"toggle\"\n      className={cn(toggleVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Toggle, toggleVariants }\n","size_bytes":1571},"components/ui/slider.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as SliderPrimitive from '@radix-ui/react-slider'\n\nimport { cn } from '@/lib/utils'\n\nfunction Slider({\n  className,\n  defaultValue,\n  value,\n  min = 0,\n  max = 100,\n  ...props\n}: React.ComponentProps<typeof SliderPrimitive.Root>) {\n  const _values = React.useMemo(\n    () =>\n      Array.isArray(value)\n        ? value\n        : Array.isArray(defaultValue)\n          ? defaultValue\n          : [min, max],\n    [value, defaultValue, min, max],\n  )\n\n  return (\n    <SliderPrimitive.Root\n      data-slot=\"slider\"\n      defaultValue={defaultValue}\n      value={value}\n      min={min}\n      max={max}\n      className={cn(\n        'relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col',\n        className,\n      )}\n      {...props}\n    >\n      <SliderPrimitive.Track\n        data-slot=\"slider-track\"\n        className={\n          'bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5'\n        }\n      >\n        <SliderPrimitive.Range\n          data-slot=\"slider-range\"\n          className={\n            'bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full'\n          }\n        />\n      </SliderPrimitive.Track>\n      {Array.from({ length: _values.length }, (_, index) => (\n        <SliderPrimitive.Thumb\n          data-slot=\"slider-thumb\"\n          key={index}\n          className=\"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50\"\n        />\n      ))}\n    </SliderPrimitive.Root>\n  )\n}\n\nexport { Slider }\n","size_bytes":1990},"pnpm-lock.yaml":{"content":"lockfileVersion: '9.0'\n\nsettings:\n  autoInstallPeers: true\n  excludeLinksFromLockfile: false","size_bytes":92},"app/teacher/page.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { BookOpen, FileText, Users, CheckCircle } from \"lucide-react\"\nimport Link from \"next/link\"\nimport { Button } from \"@/components/ui/button\"\n\nexport default function TeacherDashboard() {\n  return (\n    <div className=\"space-y-6 sm:space-y-8\">\n      <div>\n        <h1 className=\"text-2xl sm:text-3xl font-bold mb-2\">Teacher Dashboard</h1>\n        <p className=\"text-sm sm:text-base text-muted-foreground\">\n          Manage your courses, assignments, and student progress.\n        </p>\n      </div>\n\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-6\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2 space-y-0\">\n            <CardTitle className=\"text-xs sm:text-sm font-medium\">Total Courses</CardTitle>\n            <BookOpen className=\"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-xl sm:text-2xl font-bold\">4</div>\n            <p className=\"text-xs text-muted-foreground\">Active this semester</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2 space-y-0\">\n            <CardTitle className=\"text-xs sm:text-sm font-medium\">Total Students</CardTitle>\n            <Users className=\"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-xl sm:text-2xl font-bold\">156</div>\n            <p className=\"text-xs text-muted-foreground\">Across all courses</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2 space-y-0\">\n            <CardTitle className=\"text-xs sm:text-sm font-medium\">Assignments</CardTitle>\n            <FileText className=\"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-xl sm:text-2xl font-bold\">12</div>\n            <p className=\"text-xs text-muted-foreground\">Active assignments</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2 space-y-0\">\n            <CardTitle className=\"text-xs sm:text-sm font-medium\">To Grade</CardTitle>\n            <CheckCircle className=\"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-xl sm:text-2xl font-bold\">23</div>\n            <p className=\"text-xs text-muted-foreground\">Pending submissions</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Quick Actions */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg sm:text-xl\">Recent Submissions</CardTitle>\n            <CardDescription className=\"text-xs sm:text-sm\">\n              Latest assignment submissions requiring grading\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-3 sm:space-y-4\">\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-muted rounded-lg gap-2\">\n              <div>\n                <p className=\"font-medium text-sm sm:text-base\">Database Systems - Assignment 3</p>\n                <p className=\"text-xs sm:text-sm text-muted-foreground\">5 new submissions</p>\n              </div>\n              <Link href=\"/teacher/assignments\">\n                <Button size=\"sm\" className=\"w-full sm:w-auto\">\n                  Grade\n                </Button>\n              </Link>\n            </div>\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-muted rounded-lg gap-2\">\n              <div>\n                <p className=\"font-medium text-sm sm:text-base\">Web Development - Project Proposal</p>\n                <p className=\"text-xs sm:text-sm text-muted-foreground\">8 new submissions</p>\n              </div>\n              <Link href=\"/teacher/assignments\">\n                <Button size=\"sm\" className=\"w-full sm:w-auto\">\n                  Grade\n                </Button>\n              </Link>\n            </div>\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-muted rounded-lg gap-2\">\n              <div>\n                <p className=\"font-medium text-sm sm:text-base\">Software Engineering - Case Study</p>\n                <p className=\"text-xs sm:text-sm text-muted-foreground\">10 new submissions</p>\n              </div>\n              <Link href=\"/teacher/assignments\">\n                <Button size=\"sm\" className=\"w-full sm:w-auto\">\n                  Grade\n                </Button>\n              </Link>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg sm:text-xl\">Quick Actions</CardTitle>\n            <CardDescription className=\"text-xs sm:text-sm\">Common tasks and shortcuts</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-2 sm:space-y-3\">\n            <Link href=\"/teacher/courses\">\n              <Button className=\"w-full justify-start bg-transparent text-sm\" variant=\"outline\">\n                <BookOpen className=\"h-4 w-4 mr-2\" />\n                Create New Course\n              </Button>\n            </Link>\n            <Link href=\"/teacher/assignments\">\n              <Button className=\"w-full justify-start bg-transparent text-sm\" variant=\"outline\">\n                <FileText className=\"h-4 w-4 mr-2\" />\n                Create Assignment\n              </Button>\n            </Link>\n            <Link href=\"/teacher/materials\">\n              <Button className=\"w-full justify-start bg-transparent text-sm\" variant=\"outline\">\n                <FileText className=\"h-4 w-4 mr-2\" />\n                Upload Course Material\n              </Button>\n            </Link>\n            <Link href=\"/teacher/messages\">\n              <Button className=\"w-full justify-start bg-transparent text-sm\" variant=\"outline\">\n                <Users className=\"h-4 w-4 mr-2\" />\n                Message Students\n              </Button>\n            </Link>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  )\n}\n","size_bytes":6434},"app/teacher/materials/page.tsx":{"content":"\"use client\"\n\nimport type React from \"react\"\n\nimport { useEffect, useState } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { Plus, UploadIcon } from \"lucide-react\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n\ninterface Course {\n  _id: string\n  title: string\n  code: string\n}\n\nexport default function TeacherMaterialsPage() {\n  const [courses, setCourses] = useState<Course[]>([])\n  const [open, setOpen] = useState(false)\n  const [uploadMethod, setUploadMethod] = useState<\"file\" | \"url\">(\"file\")\n  const [selectedFile, setSelectedFile] = useState<File | null>(null)\n  const [uploading, setUploading] = useState(false)\n  const [formData, setFormData] = useState({\n    courseId: \"\",\n    title: \"\",\n    description: \"\",\n    fileUrl: \"\",\n    fileType: \"application/pdf\",\n  })\n  const { toast } = useToast()\n\n  useEffect(() => {\n    fetchCourses()\n  }, [])\n\n  const fetchCourses = async () => {\n    try {\n      const response = await fetch(\"/api/courses\")\n      if (response.ok) {\n        const data = await response.json()\n        setCourses(data.courses)\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to load courses\",\n        variant: \"destructive\",\n      })\n    }\n  }\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      setSelectedFile(e.target.files[0])\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setUploading(true)\n\n    try {\n      let tokenId: string | undefined\n      let fileUrl = uploadMethod === \"url\" ? formData.fileUrl : undefined\n\n      if (uploadMethod === \"file\") {\n        if (!selectedFile) {\n          throw new Error(\"Please select a file\")\n        }\n\n        const uploadFormData = new FormData()\n        uploadFormData.append(\"file\", selectedFile)\n        uploadFormData.append(\"type\", \"material\")\n\n        const uploadResponse = await fetch(\"/api/upload\", {\n          method: \"POST\",\n          body: uploadFormData,\n        })\n\n        if (!uploadResponse.ok) {\n          const errorData = await uploadResponse.json()\n          throw new Error(errorData.error || \"Failed to upload file\")\n        }\n\n        const uploadData = await uploadResponse.json()\n        tokenId = uploadData.tokenId\n      }\n\n      const response = await fetch(\"/api/materials\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          courseId: formData.courseId,\n          title: formData.title,\n          description: formData.description,\n          tokenId,\n          fileUrl,\n          fileType: formData.fileType,\n        }),\n      })\n\n      if (response.ok) {\n        toast({\n          title: \"Success\",\n          description: \"Material uploaded successfully\",\n        })\n        setOpen(false)\n        setSelectedFile(null)\n        setFormData({\n          courseId: \"\",\n          title: \"\",\n          description: \"\",\n          fileUrl: \"\",\n          fileType: \"application/pdf\",\n        })\n      } else {\n        const data = await response.json()\n        throw new Error(data.error || \"Failed to create material\")\n      }\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      })\n    } finally {\n      setUploading(false)\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold mb-2\">Course Materials</h1>\n          <p className=\"text-muted-foreground\">Upload and manage course materials</p>\n        </div>\n        <Dialog open={open} onOpenChange={setOpen}>\n          <DialogTrigger asChild>\n            <Button>\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Upload Material\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Upload Course Material</DialogTitle>\n              <DialogDescription>Add learning resources for your students</DialogDescription>\n            </DialogHeader>\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"courseId\">Course</Label>\n                <Select\n                  value={formData.courseId}\n                  onValueChange={(value) => setFormData({ ...formData, courseId: value })}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select a course\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {courses.map((course) => (\n                      <SelectItem key={course._id} value={course._id}>\n                        {course.code} - {course.title}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"title\">Material Title</Label>\n                <Input\n                  id=\"title\"\n                  placeholder=\"Lecture 1: Introduction\"\n                  value={formData.title}\n                  onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                  required\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"description\">Description</Label>\n                <Textarea\n                  id=\"description\"\n                  placeholder=\"Brief description of the material...\"\n                  value={formData.description}\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                  rows={3}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"fileType\">File Type</Label>\n                <Select\n                  value={formData.fileType}\n                  onValueChange={(value) => setFormData({ ...formData, fileType: value })}\n                >\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"application/pdf\">PDF Document</SelectItem>\n                    <SelectItem value=\"application/msword\">Word Document</SelectItem>\n                    <SelectItem value=\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\">Word Document (DOCX)</SelectItem>\n                    <SelectItem value=\"video/mp4\">Video (MP4)</SelectItem>\n                    <SelectItem value=\"audio/mpeg\">Audio (MP3)</SelectItem>\n                    <SelectItem value=\"application/zip\">ZIP Archive</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label>Upload Method</Label>\n                <div className=\"flex gap-2\">\n                  <Button\n                    type=\"button\"\n                    variant={uploadMethod === \"file\" ? \"default\" : \"outline\"}\n                    onClick={() => setUploadMethod(\"file\")}\n                    className=\"flex-1\"\n                  >\n                    Upload File\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant={uploadMethod === \"url\" ? \"default\" : \"outline\"}\n                    onClick={() => setUploadMethod(\"url\")}\n                    className=\"flex-1\"\n                  >\n                    Provide URL\n                  </Button>\n                </div>\n              </div>\n\n              {uploadMethod === \"file\" ? (\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"file\">Select File</Label>\n                  <Input\n                    id=\"file\"\n                    type=\"file\"\n                    onChange={handleFileChange}\n                    accept=\".pdf,.doc,.docx,.ppt,.pptx,.mp4,.mp3,.zip\"\n                    required\n                  />\n                  {selectedFile && (\n                    <p className=\"text-xs text-muted-foreground\">\n                      Selected: {selectedFile.name} ({(selectedFile.size / 1024 / 1024).toFixed(2)} MB)\n                    </p>\n                  )}\n                </div>\n              ) : (\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"fileUrl\">File URL</Label>\n                  <Input\n                    id=\"fileUrl\"\n                    placeholder=\"https://example.com/lecture1.pdf\"\n                    value={formData.fileUrl}\n                    onChange={(e) => setFormData({ ...formData, fileUrl: e.target.value })}\n                    required\n                  />\n                  <p className=\"text-xs text-muted-foreground\">\n                    Upload your file to cloud storage and paste the URL here\n                  </p>\n                </div>\n              )}\n\n              <Button type=\"submit\" className=\"w-full\" disabled={uploading}>\n                <UploadIcon className=\"h-4 w-4 mr-2\" />\n                {uploading ? \"Uploading...\" : \"Upload Material\"}\n              </Button>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Recent Uploads</CardTitle>\n          <CardDescription>Materials uploaded in the last 30 days</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-center text-muted-foreground py-8\">Upload your first course material to get started</p>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n","size_bytes":10167},"components/ui/carousel.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from 'embla-carousel-react'\nimport { ArrowLeft, ArrowRight } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\nimport { Button } from '@/components/ui/button'\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: 'horizontal' | 'vertical'\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error('useCarousel must be used within a <Carousel />')\n  }\n\n  return context\n}\n\nfunction Carousel({\n  orientation = 'horizontal',\n  opts,\n  setApi,\n  plugins,\n  className,\n  children,\n  ...props\n}: React.ComponentProps<'div'> & CarouselProps) {\n  const [carouselRef, api] = useEmblaCarousel(\n    {\n      ...opts,\n      axis: orientation === 'horizontal' ? 'x' : 'y',\n    },\n    plugins,\n  )\n  const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n  const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n  const onSelect = React.useCallback((api: CarouselApi) => {\n    if (!api) return\n    setCanScrollPrev(api.canScrollPrev())\n    setCanScrollNext(api.canScrollNext())\n  }, [])\n\n  const scrollPrev = React.useCallback(() => {\n    api?.scrollPrev()\n  }, [api])\n\n  const scrollNext = React.useCallback(() => {\n    api?.scrollNext()\n  }, [api])\n\n  const handleKeyDown = React.useCallback(\n    (event: React.KeyboardEvent<HTMLDivElement>) => {\n      if (event.key === 'ArrowLeft') {\n        event.preventDefault()\n        scrollPrev()\n      } else if (event.key === 'ArrowRight') {\n        event.preventDefault()\n        scrollNext()\n      }\n    },\n    [scrollPrev, scrollNext],\n  )\n\n  React.useEffect(() => {\n    if (!api || !setApi) return\n    setApi(api)\n  }, [api, setApi])\n\n  React.useEffect(() => {\n    if (!api) return\n    onSelect(api)\n    api.on('reInit', onSelect)\n    api.on('select', onSelect)\n\n    return () => {\n      api?.off('select', onSelect)\n    }\n  }, [api, onSelect])\n\n  return (\n    <CarouselContext.Provider\n      value={{\n        carouselRef,\n        api: api,\n        opts,\n        orientation:\n          orientation || (opts?.axis === 'y' ? 'vertical' : 'horizontal'),\n        scrollPrev,\n        scrollNext,\n        canScrollPrev,\n        canScrollNext,\n      }}\n    >\n      <div\n        onKeyDownCapture={handleKeyDown}\n        className={cn('relative', className)}\n        role=\"region\"\n        aria-roledescription=\"carousel\"\n        data-slot=\"carousel\"\n        {...props}\n      >\n        {children}\n      </div>\n    </CarouselContext.Provider>\n  )\n}\n\nfunction CarouselContent({ className, ...props }: React.ComponentProps<'div'>) {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div\n      ref={carouselRef}\n      className=\"overflow-hidden\"\n      data-slot=\"carousel-content\"\n    >\n      <div\n        className={cn(\n          'flex',\n          orientation === 'horizontal' ? '-ml-4' : '-mt-4 flex-col',\n          className,\n        )}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction CarouselItem({ className, ...props }: React.ComponentProps<'div'>) {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      data-slot=\"carousel-item\"\n      className={cn(\n        'min-w-0 shrink-0 grow-0 basis-full',\n        orientation === 'horizontal' ? 'pl-4' : 'pt-4',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CarouselPrevious({\n  className,\n  variant = 'outline',\n  size = 'icon',\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      data-slot=\"carousel-previous\"\n      variant={variant}\n      size={size}\n      className={cn(\n        'absolute size-8 rounded-full',\n        orientation === 'horizontal'\n          ? 'top-1/2 -left-12 -translate-y-1/2'\n          : '-top-12 left-1/2 -translate-x-1/2 rotate-90',\n        className,\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n}\n\nfunction CarouselNext({\n  className,\n  variant = 'outline',\n  size = 'icon',\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      data-slot=\"carousel-next\"\n      variant={variant}\n      size={size}\n      className={cn(\n        'absolute size-8 rounded-full',\n        orientation === 'horizontal'\n          ? 'top-1/2 -right-12 -translate-y-1/2'\n          : '-bottom-12 left-1/2 -translate-x-1/2 rotate-90',\n        className,\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n}\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":5562},"hooks/use-mobile.ts":{"content":"import * as React from 'react'\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener('change', onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener('change', onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"components/ui/kbd.tsx":{"content":"import { cn } from '@/lib/utils'\n\nfunction Kbd({ className, ...props }: React.ComponentProps<'kbd'>) {\n  return (\n    <kbd\n      data-slot=\"kbd\"\n      className={cn(\n        'bg-muted w-fit text-muted-foreground pointer-events-none inline-flex h-5 min-w-5 items-center justify-center gap-1 rounded-sm px-1 font-sans text-xs font-medium select-none',\n        \"[&_svg:not([class*='size-'])]:size-3\",\n        '[[data-slot=tooltip-content]_&]:bg-background/20 [[data-slot=tooltip-content]_&]:text-background dark:[[data-slot=tooltip-content]_&]:bg-background/10',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction KbdGroup({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <kbd\n      data-slot=\"kbd-group\"\n      className={cn('inline-flex items-center gap-1', className)}\n      {...props}\n    />\n  )\n}\n\nexport { Kbd, KbdGroup }\n","size_bytes":863},"app/teacher/assignments/page.tsx":{"content":"\"use client\"\n\nimport type React from \"react\"\n\nimport { useEffect, useState } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { Plus, Eye } from \"lucide-react\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n\ninterface Course {\n  _id: string\n  title: string\n  code: string\n}\n\ninterface Assignment {\n  _id: string\n  title: string\n  description: string\n  dueDate: string\n  totalPoints: number\n  courseId: string\n}\n\ninterface Submission {\n  _id: string\n  assignmentId: string\n  studentId: string\n  fileUrl: string\n  submittedAt: string\n  grade?: number\n}\n\nexport default function TeacherAssignmentsPage() {\n  const [courses, setCourses] = useState<Course[]>([])\n  const [assignments, setAssignments] = useState<Assignment[]>([])\n  const [submissions, setSubmissions] = useState<Submission[]>([])\n  const [open, setOpen] = useState(false)\n  const [viewOpen, setViewOpen] = useState(false)\n  const [selectedAssignment, setSelectedAssignment] = useState<string | null>(null)\n  const [formData, setFormData] = useState({\n    courseId: \"\",\n    title: \"\",\n    description: \"\",\n    dueDate: \"\",\n    totalPoints: \"\",\n    fileUrl: \"\",\n  })\n  const { toast } = useToast()\n\n  useEffect(() => {\n    fetchCourses()\n    fetchAssignments()\n  }, [])\n\n  const fetchCourses = async () => {\n    try {\n      const response = await fetch(\"/api/courses\")\n      if (response.ok) {\n        const data = await response.json()\n        setCourses(data.courses)\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to load courses\",\n        variant: \"destructive\",\n      })\n    }\n  }\n\n  const fetchAssignments = async () => {\n    try {\n      const response = await fetch(\"/api/assignments\")\n      if (response.ok) {\n        const data = await response.json()\n        setAssignments(data.assignments)\n      }\n    } catch (error) {\n      console.error(\"[v0] Fetch assignments error:\", error)\n    }\n  }\n\n  const fetchSubmissions = async (assignmentId: string) => {\n    try {\n      const response = await fetch(`/api/submissions?assignmentId=${assignmentId}`)\n      if (response.ok) {\n        const data = await response.json()\n        setSubmissions(data.submissions)\n      }\n    } catch (error) {\n      console.error(\"[v0] Fetch submissions error:\", error)\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    try {\n      const response = await fetch(\"/api/assignments\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          ...formData,\n          totalPoints: Number.parseInt(formData.totalPoints),\n        }),\n      })\n\n      if (response.ok) {\n        toast({\n          title: \"Success\",\n          description: \"Assignment created successfully\",\n        })\n        fetchAssignments()\n        setOpen(false)\n        setFormData({\n          courseId: \"\",\n          title: \"\",\n          description: \"\",\n          dueDate: \"\",\n          totalPoints: \"\",\n          fileUrl: \"\",\n        })\n      } else {\n        const data = await response.json()\n        throw new Error(data.error)\n      }\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      })\n    }\n  }\n\n  const handleViewSubmissions = (assignmentId: string) => {\n    setSelectedAssignment(assignmentId)\n    fetchSubmissions(assignmentId)\n    setViewOpen(true)\n  }\n\n  const handleGrade = async (submissionId: string, grade: number, feedback: string) => {\n    try {\n      const response = await fetch(`/api/submissions/${submissionId}/grade`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ grade, feedback }),\n      })\n\n      if (response.ok) {\n        toast({\n          title: \"Success\",\n          description: \"Grade submitted successfully\",\n        })\n        if (selectedAssignment) {\n          fetchSubmissions(selectedAssignment)\n        }\n      } else {\n        throw new Error(\"Failed to submit grade\")\n      }\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      })\n    }\n  }\n\n  const getDownloadUrl = (submission: Submission) => {\n    const isUUID = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(submission.fileUrl)\n    if (isUUID) {\n      return `/api/download?submissionId=${submission._id}`\n    }\n    return submission.fileUrl\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold mb-2\">Assignments</h1>\n          <p className=\"text-muted-foreground\">Create and manage course assignments</p>\n        </div>\n        <Dialog open={open} onOpenChange={setOpen}>\n          <DialogTrigger asChild>\n            <Button>\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Create Assignment\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-2xl\">\n            <DialogHeader>\n              <DialogTitle>Create New Assignment</DialogTitle>\n              <DialogDescription>Add a new assignment for your students</DialogDescription>\n            </DialogHeader>\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"courseId\">Course</Label>\n                <Select\n                  value={formData.courseId}\n                  onValueChange={(value) => setFormData({ ...formData, courseId: value })}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select a course\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {courses.map((course) => (\n                      <SelectItem key={course._id} value={course._id}>\n                        {course.code} - {course.title}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"title\">Assignment Title</Label>\n                <Input\n                  id=\"title\"\n                  placeholder=\"Assignment 1: Introduction to Programming\"\n                  value={formData.title}\n                  onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                  required\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"description\">Description</Label>\n                <Textarea\n                  id=\"description\"\n                  placeholder=\"Assignment instructions and requirements...\"\n                  value={formData.description}\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                  rows={4}\n                />\n              </div>\n\n              <div className=\"grid md:grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"dueDate\">Due Date</Label>\n                  <Input\n                    id=\"dueDate\"\n                    type=\"datetime-local\"\n                    value={formData.dueDate}\n                    onChange={(e) => setFormData({ ...formData, dueDate: e.target.value })}\n                    required\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"totalPoints\">Total Points</Label>\n                  <Input\n                    id=\"totalPoints\"\n                    type=\"number\"\n                    placeholder=\"100\"\n                    value={formData.totalPoints}\n                    onChange={(e) => setFormData({ ...formData, totalPoints: e.target.value })}\n                    required\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"fileUrl\">Attachment URL (Optional)</Label>\n                <Input\n                  id=\"fileUrl\"\n                  placeholder=\"https://example.com/assignment1.pdf\"\n                  value={formData.fileUrl}\n                  onChange={(e) => setFormData({ ...formData, fileUrl: e.target.value })}\n                />\n              </div>\n\n              <Button type=\"submit\" className=\"w-full\">\n                Create Assignment\n              </Button>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <div className=\"grid gap-4\">\n        {assignments.map((assignment) => {\n          const course = courses.find((c) => c._id === assignment.courseId)\n          return (\n            <Card key={assignment._id}>\n              <CardHeader>\n                <div className=\"flex items-start justify-between\">\n                  <div>\n                    <CardTitle>{assignment.title}</CardTitle>\n                    <CardDescription>\n                      {course?.code} - Due: {new Date(assignment.dueDate).toLocaleDateString()}\n                    </CardDescription>\n                  </div>\n                  <Button size=\"sm\" onClick={() => handleViewSubmissions(assignment._id)}>\n                    <Eye className=\"h-4 w-4 mr-2\" />\n                    View Submissions\n                  </Button>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-sm text-muted-foreground mb-2\">{assignment.description}</p>\n                <p className=\"text-sm\">\n                  <strong>Points:</strong> {assignment.totalPoints}\n                </p>\n              </CardContent>\n            </Card>\n          )\n        })}\n      </div>\n\n      {/* View Submissions Dialog */}\n      <Dialog open={viewOpen} onOpenChange={setViewOpen}>\n        <DialogContent className=\"max-w-3xl\">\n          <DialogHeader>\n            <DialogTitle>Assignment Submissions</DialogTitle>\n            <DialogDescription>Review and grade student submissions</DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4 max-h-96 overflow-y-auto\">\n            {submissions.length === 0 ? (\n              <p className=\"text-center text-muted-foreground py-8\">No submissions yet</p>\n            ) : (\n              submissions.map((submission) => (\n                <Card key={submission._id}>\n                  <CardContent className=\"pt-6\">\n                    <div className=\"space-y-3\">\n                      <div className=\"flex items-center justify-between\">\n                        <p className=\"text-sm\">\n                          <strong>Student ID:</strong> {submission.studentId}\n                        </p>\n                        <p className=\"text-xs text-muted-foreground\">\n                          {new Date(submission.submittedAt).toLocaleString()}\n                        </p>\n                      </div>\n                      <Button size=\"sm\" variant=\"outline\" asChild>\n                        <a href={getDownloadUrl(submission)} target=\"_blank\" rel=\"noopener noreferrer\">\n                          View Submission\n                        </a>\n                      </Button>\n                      {submission.grade !== undefined ? (\n                        <div className=\"p-3 bg-muted rounded\">\n                          <p className=\"text-sm\">\n                            <strong>Grade:</strong> {submission.grade}\n                          </p>\n                        </div>\n                      ) : (\n                        <div className=\"flex gap-2\">\n                          <Input type=\"number\" placeholder=\"Grade\" className=\"w-24\" id={`grade-${submission._id}`} />\n                          <Input placeholder=\"Feedback (optional)\" id={`feedback-${submission._id}`} />\n                          <Button\n                            size=\"sm\"\n                            onClick={() => {\n                              const gradeInput = document.getElementById(`grade-${submission._id}`) as HTMLInputElement\n                              const feedbackInput = document.getElementById(\n                                `feedback-${submission._id}`,\n                              ) as HTMLInputElement\n                              handleGrade(submission._id, Number.parseInt(gradeInput.value), feedbackInput.value)\n                            }}\n                          >\n                            Submit Grade\n                          </Button>\n                        </div>\n                      )}\n                    </div>\n                  </CardContent>\n                </Card>\n              ))\n            )}\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}\n","size_bytes":13209},"components/auth-provider.tsx":{"content":"\"use client\"\n\nimport type React from \"react\"\n\nimport { createContext, useContext, useEffect, useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\n\ninterface User {\n  id: string\n  email: string\n  role: \"student\" | \"teacher\" | \"admin\" | \"head\"\n  firstName: string\n  lastName: string\n  department?: string\n  year?: number\n  semester?: number\n}\n\ninterface AuthContextType {\n  user: User | null\n  loading: boolean\n  login: (email: string, password: string) => Promise<void>\n  logout: () => Promise<void>\n  refreshUser: () => Promise<void>\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null)\n  const [loading, setLoading] = useState(true)\n  const router = useRouter()\n\n  const fetchUser = async () => {\n    try {\n      const response = await fetch(\"/api/auth/me\")\n      if (response.ok) {\n        const data = await response.json()\n        setUser(data.user)\n      } else {\n        setUser(null)\n      }\n    } catch (error) {\n      console.error(\"[v0] Fetch user error:\", error)\n      setUser(null)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchUser()\n  }, [])\n\n  const login = async (email: string, password: string) => {\n    const response = await fetch(\"/api/auth/login\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ email, password }),\n    })\n\n    if (!response.ok) {\n      const data = await response.json()\n      throw new Error(data.error || \"Login failed\")\n    }\n\n    const data = await response.json()\n    setUser(data.user)\n\n    // Redirect based on role\n    switch (data.user.role) {\n      case \"student\":\n        router.push(\"/student\")\n        break\n      case \"teacher\":\n        router.push(\"/teacher\")\n        break\n      case \"admin\":\n        router.push(\"/admin\")\n        break\n      case \"head\":\n        router.push(\"/head\")\n        break\n    }\n  }\n\n  const logout = async () => {\n    await fetch(\"/api/auth/logout\", { method: \"POST\" })\n    setUser(null)\n    router.push(\"/\")\n  }\n\n  const refreshUser = async () => {\n    await fetchUser()\n  }\n\n  return <AuthContext.Provider value={{ user, loading, login, logout, refreshUser }}>{children}</AuthContext.Provider>\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\")\n  }\n  return context\n}\n","size_bytes":2537},"components/ui/hover-card.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as HoverCardPrimitive from '@radix-ui/react-hover-card'\n\nimport { cn } from '@/lib/utils'\n\nfunction HoverCard({\n  ...props\n}: React.ComponentProps<typeof HoverCardPrimitive.Root>) {\n  return <HoverCardPrimitive.Root data-slot=\"hover-card\" {...props} />\n}\n\nfunction HoverCardTrigger({\n  ...props\n}: React.ComponentProps<typeof HoverCardPrimitive.Trigger>) {\n  return (\n    <HoverCardPrimitive.Trigger data-slot=\"hover-card-trigger\" {...props} />\n  )\n}\n\nfunction HoverCardContent({\n  className,\n  align = 'center',\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof HoverCardPrimitive.Content>) {\n  return (\n    <HoverCardPrimitive.Portal data-slot=\"hover-card-portal\">\n      <HoverCardPrimitive.Content\n        data-slot=\"hover-card-content\"\n        align={align}\n        sideOffset={sideOffset}\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-64 origin-(--radix-hover-card-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden',\n          className,\n        )}\n        {...props}\n      />\n    </HoverCardPrimitive.Portal>\n  )\n}\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1533},"components/ui/form.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as LabelPrimitive from '@radix-ui/react-label'\nimport { Slot } from '@radix-ui/react-slot'\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  useFormState,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from 'react-hook-form'\n\nimport { cn } from '@/lib/utils'\nimport { Label } from '@/components/ui/label'\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue,\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState } = useFormContext()\n  const formState = useFormState({ name: fieldContext.name })\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error('useFormField should be used within <FormField>')\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue,\n)\n\nfunction FormItem({ className, ...props }: React.ComponentProps<'div'>) {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div\n        data-slot=\"form-item\"\n        className={cn('grid gap-2', className)}\n        {...props}\n      />\n    </FormItemContext.Provider>\n  )\n}\n\nfunction FormLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      data-slot=\"form-label\"\n      data-error={!!error}\n      className={cn('data-[error=true]:text-destructive', className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n}\n\nfunction FormControl({ ...props }: React.ComponentProps<typeof Slot>) {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      data-slot=\"form-control\"\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n}\n\nfunction FormDescription({ className, ...props }: React.ComponentProps<'p'>) {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      data-slot=\"form-description\"\n      id={formDescriptionId}\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction FormMessage({ className, ...props }: React.ComponentProps<'p'>) {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? '') : props.children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      data-slot=\"form-message\"\n      id={formMessageId}\n      className={cn('text-destructive text-sm', className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n}\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":3761},"components/ui/badge.tsx":{"content":"import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst badgeVariants = cva(\n  'inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden',\n  {\n    variants: {\n      variant: {\n        default:\n          'border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90',\n        secondary:\n          'border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90',\n        destructive:\n          'border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'span'> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : 'span'\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1632},"components/ui/avatar.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as AvatarPrimitive from '@radix-ui/react-avatar'\n\nimport { cn } from '@/lib/utils'\n\nfunction Avatar({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Root>) {\n  return (\n    <AvatarPrimitive.Root\n      data-slot=\"avatar\"\n      className={cn(\n        'relative flex size-8 shrink-0 overflow-hidden rounded-full',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarImage({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Image>) {\n  return (\n    <AvatarPrimitive.Image\n      data-slot=\"avatar-image\"\n      className={cn('aspect-square size-full', className)}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarFallback({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {\n  return (\n    <AvatarPrimitive.Fallback\n      data-slot=\"avatar-fallback\"\n      className={cn(\n        'bg-muted flex size-full items-center justify-center rounded-full',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1099},"app/admin/users/loading.tsx":{"content":"export default function Loading() {\n  return null\n}\n","size_bytes":52},"app/student/assignments/page.tsx":{"content":"\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { Clock, CheckCircle, AlertCircle, Upload } from \"lucide-react\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\"\nimport { Label } from \"@/components/ui/label\"\n\ninterface Assignment {\n  _id: string\n  title: string\n  description: string\n  dueDate: string\n  totalPoints: number\n  fileUrl?: string\n}\n\ninterface Submission {\n  assignmentId: string\n  submittedAt: string\n  grade?: number\n  feedback?: string\n}\n\nexport default function StudentAssignmentsPage() {\n  const [assignments, setAssignments] = useState<Assignment[]>([])\n  const [submissions, setSubmissions] = useState<Submission[]>([])\n  const [selectedFileUrl, setSelectedFileUrl] = useState<string>(\"\")\n  const [selectedFile, setSelectedFile] = useState<File | null>(null)\n  const [uploadMethod, setUploadMethod] = useState<\"file\" | \"url\">(\"file\")\n  const [submitting, setSubmitting] = useState(false)\n  const { toast } = useToast()\n\n  useEffect(() => {\n    fetchAssignments()\n    fetchSubmissions()\n  }, [])\n\n  const fetchAssignments = async () => {\n    try {\n      const response = await fetch(\"/api/assignments\")\n      if (response.ok) {\n        const data = await response.json()\n        setAssignments(data.assignments)\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to load assignments\",\n        variant: \"destructive\",\n      })\n    }\n  }\n\n  const fetchSubmissions = async () => {\n    try {\n      const response = await fetch(\"/api/submissions\")\n      if (response.ok) {\n        const data = await response.json()\n        setSubmissions(data.submissions)\n      }\n    } catch (error) {\n      console.error(\"[v0] Fetch submissions error:\", error)\n    }\n  }\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      setSelectedFile(e.target.files[0])\n    }\n  }\n\n  const handleSubmit = async (assignmentId: string) => {\n    if (uploadMethod === \"file\" && !selectedFile) {\n      toast({\n        title: \"Error\",\n        description: \"Please select a file\",\n        variant: \"destructive\",\n      })\n      return\n    }\n\n    if (uploadMethod === \"url\" && !selectedFileUrl) {\n      toast({\n        title: \"Error\",\n        description: \"Please provide a file URL\",\n        variant: \"destructive\",\n      })\n      return\n    }\n\n    setSubmitting(true)\n    try {\n      let tokenId: string | undefined\n      let fileUrl = uploadMethod === \"url\" ? selectedFileUrl : undefined\n\n      if (uploadMethod === \"file\" && selectedFile) {\n        const uploadFormData = new FormData()\n        uploadFormData.append(\"file\", selectedFile)\n        uploadFormData.append(\"type\", \"submission\")\n\n        const uploadResponse = await fetch(\"/api/upload\", {\n          method: \"POST\",\n          body: uploadFormData,\n        })\n\n        if (!uploadResponse.ok) {\n          const errorData = await uploadResponse.json()\n          throw new Error(errorData.error || \"Failed to upload file\")\n        }\n\n        const uploadData = await uploadResponse.json()\n        tokenId = uploadData.tokenId\n      }\n\n      const response = await fetch(\"/api/submissions\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ assignmentId, tokenId, fileUrl }),\n      })\n\n      if (response.ok) {\n        toast({\n          title: \"Success\",\n          description: \"Assignment submitted successfully\",\n        })\n        fetchSubmissions()\n        setSelectedFileUrl(\"\")\n        setSelectedFile(null)\n      } else {\n        const data = await response.json()\n        throw new Error(data.error || \"Failed to submit assignment\")\n      }\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      })\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  const getStatus = (assignment: Assignment) => {\n    const submission = submissions.find((s) => s.assignmentId === assignment._id)\n    const dueDate = new Date(assignment.dueDate)\n    const now = new Date()\n\n    if (submission) {\n      if (submission.grade !== undefined) {\n        return { label: \"Graded\", color: \"bg-success\", icon: <CheckCircle className=\"h-4 w-4\" /> }\n      }\n      return { label: \"Submitted\", color: \"bg-accent\", icon: <CheckCircle className=\"h-4 w-4\" /> }\n    }\n\n    if (now > dueDate) {\n      return { label: \"Overdue\", color: \"bg-destructive\", icon: <AlertCircle className=\"h-4 w-4\" /> }\n    }\n\n    return { label: \"Pending\", color: \"bg-warning\", icon: <Clock className=\"h-4 w-4\" /> }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold mb-2\">Assignments</h1>\n        <p className=\"text-muted-foreground\">View and submit your assignments</p>\n      </div>\n\n      <div className=\"grid gap-4\">\n        {assignments.map((assignment) => {\n          const status = getStatus(assignment)\n          const submission = submissions.find((s) => s.assignmentId === assignment._id)\n\n          return (\n            <Card key={assignment._id}>\n              <CardHeader>\n                <div className=\"flex items-start justify-between\">\n                  <div>\n                    <CardTitle>{assignment.title}</CardTitle>\n                    <CardDescription>{assignment.description}</CardDescription>\n                  </div>\n                  <Badge className={`${status.color} text-white`}>\n                    <span className=\"flex items-center gap-1\">\n                      {status.icon}\n                      {status.label}\n                    </span>\n                  </Badge>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"space-y-1 text-sm\">\n                    <p className=\"text-muted-foreground\">\n                      <strong>Due Date:</strong> {new Date(assignment.dueDate).toLocaleDateString()}\n                    </p>\n                    <p className=\"text-muted-foreground\">\n                      <strong>Points:</strong> {assignment.totalPoints}\n                    </p>\n                    {submission?.grade !== undefined && (\n                      <p className=\"text-muted-foreground\">\n                        <strong>Grade:</strong> {submission.grade}/{assignment.totalPoints}\n                      </p>\n                    )}\n                    {submission?.feedback && (\n                      <p className=\"text-muted-foreground\">\n                        <strong>Feedback:</strong> {submission.feedback}\n                      </p>\n                    )}\n                  </div>\n                  <div className=\"flex gap-2\">\n                    {assignment.fileUrl && (\n                      <Button size=\"sm\" variant=\"outline\" asChild>\n                        <a href={assignment.fileUrl} download>\n                          Download\n                        </a>\n                      </Button>\n                    )}\n                    {!submission && (\n                      <Dialog>\n                        <DialogTrigger asChild>\n                          <Button size=\"sm\">\n                            <Upload className=\"h-4 w-4 mr-2\" />\n                            Submit\n                          </Button>\n                        </DialogTrigger>\n                        <DialogContent>\n                          <DialogHeader>\n                            <DialogTitle>Submit Assignment</DialogTitle>\n                            <DialogDescription>Upload your assignment file for {assignment.title}</DialogDescription>\n                          </DialogHeader>\n                          <div className=\"space-y-4\">\n                            <div className=\"space-y-2\">\n                              <Label>Upload Method</Label>\n                              <div className=\"flex gap-2\">\n                                <Button\n                                  type=\"button\"\n                                  variant={uploadMethod === \"file\" ? \"default\" : \"outline\"}\n                                  onClick={() => setUploadMethod(\"file\")}\n                                  className=\"flex-1\"\n                                >\n                                  Upload File\n                                </Button>\n                                <Button\n                                  type=\"button\"\n                                  variant={uploadMethod === \"url\" ? \"default\" : \"outline\"}\n                                  onClick={() => setUploadMethod(\"url\")}\n                                  className=\"flex-1\"\n                                >\n                                  Provide URL\n                                </Button>\n                              </div>\n                            </div>\n\n                            {uploadMethod === \"file\" ? (\n                              <div className=\"space-y-2\">\n                                <Label htmlFor=\"file\">Select File</Label>\n                                <Input\n                                  id=\"file\"\n                                  type=\"file\"\n                                  onChange={handleFileChange}\n                                  accept=\".pdf,.doc,.docx,.ppt,.pptx,.zip\"\n                                />\n                                {selectedFile && (\n                                  <p className=\"text-xs text-muted-foreground\">\n                                    Selected: {selectedFile.name} ({(selectedFile.size / 1024 / 1024).toFixed(2)} MB)\n                                  </p>\n                                )}\n                              </div>\n                            ) : (\n                              <div className=\"space-y-2\">\n                                <Label htmlFor=\"fileUrl\">File URL</Label>\n                                <Input\n                                  id=\"fileUrl\"\n                                  placeholder=\"https://example.com/my-assignment.pdf\"\n                                  value={selectedFileUrl}\n                                  onChange={(e) => setSelectedFileUrl(e.target.value)}\n                                />\n                                <p className=\"text-xs text-muted-foreground\">\n                                  Upload your file to cloud storage and paste the URL here\n                                </p>\n                              </div>\n                            )}\n\n                            <Button\n                              onClick={() => handleSubmit(assignment._id)}\n                              disabled={submitting}\n                              className=\"w-full\"\n                            >\n                              {submitting ? \"Submitting...\" : \"Submit Assignment\"}\n                            </Button>\n                          </div>\n                        </DialogContent>\n                      </Dialog>\n                    )}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n","size_bytes":11496},"components/ui/pagination.tsx":{"content":"import * as React from 'react'\nimport {\n  ChevronLeftIcon,\n  ChevronRightIcon,\n  MoreHorizontalIcon,\n} from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\nimport { Button, buttonVariants } from '@/components/ui/button'\n\nfunction Pagination({ className, ...props }: React.ComponentProps<'nav'>) {\n  return (\n    <nav\n      role=\"navigation\"\n      aria-label=\"pagination\"\n      data-slot=\"pagination\"\n      className={cn('mx-auto flex w-full justify-center', className)}\n      {...props}\n    />\n  )\n}\n\nfunction PaginationContent({\n  className,\n  ...props\n}: React.ComponentProps<'ul'>) {\n  return (\n    <ul\n      data-slot=\"pagination-content\"\n      className={cn('flex flex-row items-center gap-1', className)}\n      {...props}\n    />\n  )\n}\n\nfunction PaginationItem({ ...props }: React.ComponentProps<'li'>) {\n  return <li data-slot=\"pagination-item\" {...props} />\n}\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<React.ComponentProps<typeof Button>, 'size'> &\n  React.ComponentProps<'a'>\n\nfunction PaginationLink({\n  className,\n  isActive,\n  size = 'icon',\n  ...props\n}: PaginationLinkProps) {\n  return (\n    <a\n      aria-current={isActive ? 'page' : undefined}\n      data-slot=\"pagination-link\"\n      data-active={isActive}\n      className={cn(\n        buttonVariants({\n          variant: isActive ? 'outline' : 'ghost',\n          size,\n        }),\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction PaginationPrevious({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) {\n  return (\n    <PaginationLink\n      aria-label=\"Go to previous page\"\n      size=\"default\"\n      className={cn('gap-1 px-2.5 sm:pl-2.5', className)}\n      {...props}\n    >\n      <ChevronLeftIcon />\n      <span className=\"hidden sm:block\">Previous</span>\n    </PaginationLink>\n  )\n}\n\nfunction PaginationNext({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) {\n  return (\n    <PaginationLink\n      aria-label=\"Go to next page\"\n      size=\"default\"\n      className={cn('gap-1 px-2.5 sm:pr-2.5', className)}\n      {...props}\n    >\n      <span className=\"hidden sm:block\">Next</span>\n      <ChevronRightIcon />\n    </PaginationLink>\n  )\n}\n\nfunction PaginationEllipsis({\n  className,\n  ...props\n}: React.ComponentProps<'span'>) {\n  return (\n    <span\n      aria-hidden\n      data-slot=\"pagination-ellipsis\"\n      className={cn('flex size-9 items-center justify-center', className)}\n      {...props}\n    >\n      <MoreHorizontalIcon className=\"size-4\" />\n      <span className=\"sr-only\">More pages</span>\n    </span>\n  )\n}\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationLink,\n  PaginationItem,\n  PaginationPrevious,\n  PaginationNext,\n  PaginationEllipsis,\n}\n","size_bytes":2713},"app/api/submissions/route.ts":{"content":"import { type NextRequest, NextResponse } from \"next/server\"\nimport { getDatabase } from \"@/lib/mongodb\"\nimport { getSession } from \"@/lib/auth\"\nimport type { Submission } from \"@/lib/models\"\n\nexport async function GET(request: NextRequest) {\n  try {\n    const session = await getSession()\n    if (!session) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const { searchParams } = new URL(request.url)\n    const assignmentId = searchParams.get(\"assignmentId\")\n    const studentId = searchParams.get(\"studentId\") || session.userId\n\n    const db = await getDatabase()\n    const submissionsCollection = db.collection<Submission>(\"submissions\")\n\n    const query: any = {}\n    if (assignmentId) {\n      query.assignmentId = assignmentId\n    }\n    if (session.role === \"student\") {\n      query.studentId = session.userId\n    } else if (studentId) {\n      query.studentId = studentId\n    }\n\n    const submissions = await submissionsCollection.find(query).sort({ submittedAt: -1 }).toArray()\n\n    return NextResponse.json({ submissions })\n  } catch (error) {\n    console.error(\"[v0] Get submissions error:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await getSession()\n    if (!session || session.role !== \"student\") {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const body = await request.json()\n    const { assignmentId, tokenId, fileUrl } = body\n\n    if (!assignmentId) {\n      return NextResponse.json({ error: \"Assignment ID is required\" }, { status: 400 })\n    }\n\n    const db = await getDatabase()\n    const submissionsCollection = db.collection<Submission>(\"submissions\")\n\n    const existing = await submissionsCollection.findOne({\n      assignmentId,\n      studentId: session.userId as string,\n    })\n\n    if (existing) {\n      return NextResponse.json({ error: \"Assignment already submitted\" }, { status: 400 })\n    }\n\n    let finalFileUrl = fileUrl\n    let assetId\n\n    if (tokenId) {\n      const uploadsCollection = db.collection(\"uploads\")\n      const uploadAsset = await uploadsCollection.findOne({ tokenId })\n\n      if (!uploadAsset) {\n        return NextResponse.json({ error: \"Invalid upload token\" }, { status: 400 })\n      }\n\n      if (uploadAsset.claimed) {\n        return NextResponse.json({ error: \"Upload token already used\" }, { status: 400 })\n      }\n\n      if (uploadAsset.uploadedBy !== session.userId) {\n        return NextResponse.json({ error: \"Unauthorized to use this upload\" }, { status: 403 })\n      }\n\n      if (uploadAsset.type !== \"submission\") {\n        return NextResponse.json({ error: \"Invalid upload type for submission\" }, { status: 400 })\n      }\n\n      if (new Date() > new Date(uploadAsset.expiresAt)) {\n        return NextResponse.json({ error: \"Upload token expired\" }, { status: 400 })\n      }\n\n      assetId = uploadAsset._id\n      finalFileUrl = tokenId\n    } else if (!fileUrl) {\n      return NextResponse.json({ error: \"Either tokenId or fileUrl is required\" }, { status: 400 })\n    }\n\n    const newSubmission: Submission = {\n      assignmentId,\n      studentId: session.userId as string,\n      fileUrl: finalFileUrl as string,\n      submittedAt: new Date(),\n    }\n\n    const result = await submissionsCollection.insertOne(newSubmission)\n\n    if (tokenId && assetId) {\n      const uploadsCollection = db.collection(\"uploads\")\n      await uploadsCollection.updateOne(\n        { _id: assetId },\n        { $set: { claimed: true, linkedTo: result.insertedId.toString() } }\n      )\n    }\n\n    return NextResponse.json(\n      { message: \"Assignment submitted successfully\", submissionId: result.insertedId },\n      { status: 201 },\n    )\n  } catch (error) {\n    console.error(\"[v0] Submit assignment error:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n","size_bytes":3958},"components/ui/popover.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as PopoverPrimitive from '@radix-ui/react-popover'\n\nimport { cn } from '@/lib/utils'\n\nfunction Popover({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Root>) {\n  return <PopoverPrimitive.Root data-slot=\"popover\" {...props} />\n}\n\nfunction PopoverTrigger({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {\n  return <PopoverPrimitive.Trigger data-slot=\"popover-trigger\" {...props} />\n}\n\nfunction PopoverContent({\n  className,\n  align = 'center',\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Content>) {\n  return (\n    <PopoverPrimitive.Portal>\n      <PopoverPrimitive.Content\n        data-slot=\"popover-content\"\n        align={align}\n        sideOffset={sideOffset}\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden',\n          className,\n        )}\n        {...props}\n      />\n    </PopoverPrimitive.Portal>\n  )\n}\n\nfunction PopoverAnchor({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) {\n  return <PopoverPrimitive.Anchor data-slot=\"popover-anchor\" {...props} />\n}\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n","size_bytes":1636},"components/ui/alert.tsx":{"content":"import * as React from 'react'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst alertVariants = cva(\n  'relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current',\n  {\n    variants: {\n      variant: {\n        default: 'bg-card text-card-foreground',\n        destructive:\n          'text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction Alert({\n  className,\n  variant,\n  ...props\n}: React.ComponentProps<'div'> & VariantProps<typeof alertVariants>) {\n  return (\n    <div\n      data-slot=\"alert\"\n      role=\"alert\"\n      className={cn(alertVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"alert-title\"\n      className={cn(\n        'col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDescription({\n  className,\n  ...props\n}: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"alert-description\"\n      className={cn(\n        'text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1617},"components/ui/progress.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as ProgressPrimitive from '@radix-ui/react-progress'\n\nimport { cn } from '@/lib/utils'\n\nfunction Progress({\n  className,\n  value,\n  ...props\n}: React.ComponentProps<typeof ProgressPrimitive.Root>) {\n  return (\n    <ProgressPrimitive.Root\n      data-slot=\"progress\"\n      className={cn(\n        'bg-primary/20 relative h-2 w-full overflow-hidden rounded-full',\n        className,\n      )}\n      {...props}\n    >\n      <ProgressPrimitive.Indicator\n        data-slot=\"progress-indicator\"\n        className=\"bg-primary h-full w-full flex-1 transition-all\"\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n      />\n    </ProgressPrimitive.Root>\n  )\n}\n\nexport { Progress }\n","size_bytes":741},"components/ui/table.tsx":{"content":"'use client'\n\nimport * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Table({ className, ...props }: React.ComponentProps<'table'>) {\n  return (\n    <div\n      data-slot=\"table-container\"\n      className=\"relative w-full overflow-x-auto\"\n    >\n      <table\n        data-slot=\"table\"\n        className={cn('w-full caption-bottom text-sm', className)}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction TableHeader({ className, ...props }: React.ComponentProps<'thead'>) {\n  return (\n    <thead\n      data-slot=\"table-header\"\n      className={cn('[&_tr]:border-b', className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableBody({ className, ...props }: React.ComponentProps<'tbody'>) {\n  return (\n    <tbody\n      data-slot=\"table-body\"\n      className={cn('[&_tr:last-child]:border-0', className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableFooter({ className, ...props }: React.ComponentProps<'tfoot'>) {\n  return (\n    <tfoot\n      data-slot=\"table-footer\"\n      className={cn(\n        'bg-muted/50 border-t font-medium [&>tr]:last:border-b-0',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableRow({ className, ...props }: React.ComponentProps<'tr'>) {\n  return (\n    <tr\n      data-slot=\"table-row\"\n      className={cn(\n        'hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableHead({ className, ...props }: React.ComponentProps<'th'>) {\n  return (\n    <th\n      data-slot=\"table-head\"\n      className={cn(\n        'text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCell({ className, ...props }: React.ComponentProps<'td'>) {\n  return (\n    <td\n      data-slot=\"table-cell\"\n      className={cn(\n        'p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCaption({\n  className,\n  ...props\n}: React.ComponentProps<'caption'>) {\n  return (\n    <caption\n      data-slot=\"table-caption\"\n      className={cn('text-muted-foreground mt-4 text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2452},"app/register/page.tsx":{"content":"\"use client\"\n\nimport type React from \"react\"\n\nimport { useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport Link from \"next/link\"\nimport { GraduationCap } from \"lucide-react\"\n\nexport default function RegisterPage() {\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    firstName: \"\",\n    lastName: \"\",\n    role: \"student\",\n    department: \"\",\n    year: \"\",\n    semester: \"\",\n  })\n  const [loading, setLoading] = useState(false)\n  const router = useRouter()\n  const { toast } = useToast()\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (formData.password !== formData.confirmPassword) {\n      toast({\n        title: \"Error\",\n        description: \"Passwords do not match\",\n        variant: \"destructive\",\n      })\n      return\n    }\n\n    setLoading(true)\n\n    try {\n      const response = await fetch(\"/api/auth/register\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          email: formData.email,\n          password: formData.password,\n          role: formData.role,\n          firstName: formData.firstName,\n          lastName: formData.lastName,\n          department: formData.department || undefined,\n          year: formData.year ? Number.parseInt(formData.year) : undefined,\n          semester: formData.semester ? Number.parseInt(formData.semester) : undefined,\n        }),\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || \"Registration failed\")\n      }\n\n      toast({\n        title: \"Success\",\n        description: \"Account created successfully. Please login.\",\n      })\n      router.push(\"/login\")\n    } catch (error: any) {\n      console.error(\"Registration error:\", error)\n      toast({\n        title: \"Error\",\n        description: error.message || \"An unexpected error occurred\",\n        variant: \"destructive\",\n      })\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-blue-50 to-white flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-2xl\">\n        <CardHeader className=\"text-center\">\n          <div className=\"flex justify-center mb-4\">\n            <div className=\"bg-primary/10 p-3 rounded-full\">\n              <GraduationCap className=\"h-10 w-10 text-primary\" />\n            </div>\n          </div>\n          <CardTitle className=\"text-2xl\">Create Account</CardTitle>\n          <CardDescription>Register for Woldia University E-Learning System</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"grid md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"firstName\">First Name</Label>\n                <Input\n                  id=\"firstName\"\n                  placeholder=\"John\"\n                  value={formData.firstName}\n                  onChange={(e) => setFormData({ ...formData, firstName: e.target.value })}\n                  required\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"lastName\">Last Name</Label>\n                <Input\n                  id=\"lastName\"\n                  placeholder=\"Doe\"\n                  value={formData.lastName}\n                  onChange={(e) => setFormData({ ...formData, lastName: e.target.value })}\n                  required\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">Email</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"student@wdu.edu.et\"\n                value={formData.email}\n                onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"role\">Role</Label>\n              <Select value={formData.role} onValueChange={(value) => setFormData({ ...formData, role: value })}>\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"student\">Student</SelectItem>\n                  <SelectItem value=\"teacher\">Teacher</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            {formData.role === \"student\" && (\n              <>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"department\">Department</Label>\n                  <Input\n                    id=\"department\"\n                    placeholder=\"Computer Science\"\n                    value={formData.department}\n                    onChange={(e) => setFormData({ ...formData, department: e.target.value })}\n                  />\n                </div>\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"year\">Year</Label>\n                    <Select value={formData.year} onValueChange={(value) => setFormData({ ...formData, year: value })}>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select year\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"1\">1st Year</SelectItem>\n                        <SelectItem value=\"2\">2nd Year</SelectItem>\n                        <SelectItem value=\"3\">3rd Year</SelectItem>\n                        <SelectItem value=\"4\">4th Year</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"semester\">Semester</Label>\n                    <Select\n                      value={formData.semester}\n                      onValueChange={(value) => setFormData({ ...formData, semester: value })}\n                    >\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select semester\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"1\">Semester 1</SelectItem>\n                        <SelectItem value=\"2\">Semester 2</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n              </>\n            )}\n\n            {formData.role === \"teacher\" && (\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"department\">Department</Label>\n                <Input\n                  id=\"department\"\n                  placeholder=\"Computer Science\"\n                  value={formData.department}\n                  onChange={(e) => setFormData({ ...formData, department: e.target.value })}\n                />\n              </div>\n            )}\n\n            <div className=\"grid md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"password\">Password</Label>\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  placeholder=\"Enter password\"\n                  value={formData.password}\n                  onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                  required\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"confirmPassword\">Confirm Password</Label>\n                <Input\n                  id=\"confirmPassword\"\n                  type=\"password\"\n                  placeholder=\"Confirm password\"\n                  value={formData.confirmPassword}\n                  onChange={(e) => setFormData({ ...formData, confirmPassword: e.target.value })}\n                  required\n                />\n              </div>\n            </div>\n\n            <Button type=\"submit\" className=\"w-full\" disabled={loading}>\n              {loading ? \"Creating Account...\" : \"Create Account\"}\n            </Button>\n          </form>\n          <div className=\"mt-4 text-center text-sm text-muted-foreground\">\n            Already have an account?{\" \"}\n            <Link href=\"/login\" className=\"text-primary hover:underline\">\n              Login here\n            </Link>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n","size_bytes":8947},"app/api/users/route.ts":{"content":"import { type NextRequest, NextResponse } from \"next/server\"\nimport { getDatabase } from \"@/lib/mongodb\"\nimport { getSession, hashPassword } from \"@/lib/auth\"\nimport type { User } from \"@/lib/models\"\n\nexport async function GET(request: NextRequest) {\n  try {\n    const session = await getSession()\n    if (!session || session.role !== \"admin\") {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const { searchParams } = new URL(request.url)\n    const role = searchParams.get(\"role\")\n\n    const db = await getDatabase()\n    const usersCollection = db.collection<User>(\"users\")\n\n    const query: any = {}\n    if (role) {\n      query.role = role\n    }\n\n    const users = await usersCollection\n      .find(query, { projection: { password: 0 } })\n      .sort({ createdAt: -1 })\n      .toArray()\n\n    return NextResponse.json({ users })\n  } catch (error) {\n    console.error(\"[v0] Get users error:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await getSession()\n    if (!session || session.role !== \"admin\") {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const body = await request.json()\n    const { email, password, role, firstName, lastName, department, year, semester } = body\n\n    if (!email || !password || !role || !firstName || !lastName) {\n      return NextResponse.json({ error: \"Missing required fields\" }, { status: 400 })\n    }\n\n    const db = await getDatabase()\n    const usersCollection = db.collection<User>(\"users\")\n\n    // Check if user already exists\n    const existingUser = await usersCollection.findOne({ email })\n    if (existingUser) {\n      return NextResponse.json({ error: \"User already exists\" }, { status: 400 })\n    }\n\n    // Hash password\n    const hashedPassword = await hashPassword(password)\n\n    // Create user\n    const newUser: User = {\n      email,\n      password: hashedPassword,\n      role,\n      firstName,\n      lastName,\n      department,\n      year,\n      semester,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    }\n\n    const result = await usersCollection.insertOne(newUser)\n\n    return NextResponse.json({ message: \"User created successfully\", userId: result.insertedId }, { status: 201 })\n  } catch (error) {\n    console.error(\"[v0] Create user error:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n","size_bytes":2516},"components/admin-nav.tsx":{"content":"\"use client\"\n\nimport Link from \"next/link\"\nimport { usePathname } from \"next/navigation\"\nimport { useAuth } from \"@/components/auth-provider\"\nimport { Button } from \"@/components/ui/button\"\nimport { GraduationCap, Users, Newspaper, MessageSquare, BarChart, User, LogOut } from \"lucide-react\"\nimport { ThemeToggle } from \"@/components/theme-toggle\"\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\"\n\nexport function AdminNav() {\n  const pathname = usePathname()\n  const { user, logout } = useAuth()\n\n  const navItems = [\n    { href: \"/admin\", label: \"Dashboard\", icon: BarChart },\n    { href: \"/admin/users\", label: \"User Management\", icon: Users },\n    { href: \"/admin/news\", label: \"News\", icon: Newspaper },\n    { href: \"/admin/messages\", label: \"Messages\", icon: MessageSquare },\n  ]\n\n  return (\n    <nav className=\"bg-white dark:bg-slate-950 border-b border-border\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"flex items-center justify-between h-16\">\n          <div className=\"flex items-center gap-8\">\n            <Link href=\"/admin\" className=\"flex items-center gap-2\">\n              <GraduationCap className=\"h-6 w-6 text-primary\" />\n              <span className=\"font-bold text-lg\">WDU ELS Admin</span>\n            </Link>\n            <div className=\"hidden md:flex items-center gap-1\">\n              {navItems.map((item) => {\n                const Icon = item.icon\n                const isActive = pathname === item.href\n                return (\n                  <Link key={item.href} href={item.href}>\n                    <Button variant={isActive ? \"default\" : \"ghost\"} size=\"sm\" className=\"gap-2\">\n                      <Icon className=\"h-4 w-4\" />\n                      {item.label}\n                    </Button>\n                  </Link>\n                )\n              })}\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <ThemeToggle />\n            <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"ghost\" size=\"sm\" className=\"gap-2\">\n                <User className=\"h-4 w-4\" />\n                <span className=\"hidden md:inline\">{user?.firstName}</span>\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\" className=\"w-56\">\n              <DropdownMenuLabel>\n                <div className=\"flex flex-col\">\n                  <span className=\"font-medium\">\n                    {user?.firstName} {user?.lastName}\n                  </span>\n                  <span className=\"text-xs text-muted-foreground\">{user?.email}</span>\n                </div>\n              </DropdownMenuLabel>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem onClick={() => logout()} className=\"text-destructive\">\n                <LogOut className=\"h-4 w-4 mr-2\" />\n                Logout\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n          </div>\n        </div>\n      </div>\n    </nav>\n  )\n}\n","size_bytes":3156},"components/ui/input-group.tsx":{"content":"'use client'\n\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Textarea } from '@/components/ui/textarea'\n\nfunction InputGroup({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"input-group\"\n      role=\"group\"\n      className={cn(\n        'group/input-group border-input dark:bg-input/30 relative flex w-full items-center rounded-md border shadow-xs transition-[color,box-shadow] outline-none',\n        'h-9 has-[>textarea]:h-auto',\n\n        // Variants based on alignment.\n        'has-[>[data-align=inline-start]]:[&>input]:pl-2',\n        'has-[>[data-align=inline-end]]:[&>input]:pr-2',\n        'has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3',\n        'has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3',\n\n        // Focus state.\n        'has-[[data-slot=input-group-control]:focus-visible]:border-ring has-[[data-slot=input-group-control]:focus-visible]:ring-ring/50 has-[[data-slot=input-group-control]:focus-visible]:ring-[3px]',\n\n        // Error state.\n        'has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40',\n\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nconst inputGroupAddonVariants = cva(\n  \"text-muted-foreground flex h-auto cursor-text items-center justify-center gap-2 py-1.5 text-sm font-medium select-none [&>svg:not([class*='size-'])]:size-4 [&>kbd]:rounded-[calc(var(--radius)-5px)] group-data-[disabled=true]/input-group:opacity-50\",\n  {\n    variants: {\n      align: {\n        'inline-start':\n          'order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]',\n        'inline-end':\n          'order-last pr-3 has-[>button]:mr-[-0.4rem] has-[>kbd]:mr-[-0.35rem]',\n        'block-start':\n          'order-first w-full justify-start px-3 pt-3 [.border-b]:pb-3 group-has-[>input]/input-group:pt-2.5',\n        'block-end':\n          'order-last w-full justify-start px-3 pb-3 [.border-t]:pt-3 group-has-[>input]/input-group:pb-2.5',\n      },\n    },\n    defaultVariants: {\n      align: 'inline-start',\n    },\n  },\n)\n\nfunction InputGroupAddon({\n  className,\n  align = 'inline-start',\n  ...props\n}: React.ComponentProps<'div'> & VariantProps<typeof inputGroupAddonVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"input-group-addon\"\n      data-align={align}\n      className={cn(inputGroupAddonVariants({ align }), className)}\n      onClick={(e) => {\n        if ((e.target as HTMLElement).closest('button')) {\n          return\n        }\n        e.currentTarget.parentElement?.querySelector('input')?.focus()\n      }}\n      {...props}\n    />\n  )\n}\n\nconst inputGroupButtonVariants = cva(\n  'text-sm shadow-none flex gap-2 items-center',\n  {\n    variants: {\n      size: {\n        xs: \"h-6 gap-1 px-2 rounded-[calc(var(--radius)-5px)] [&>svg:not([class*='size-'])]:size-3.5 has-[>svg]:px-2\",\n        sm: 'h-8 px-2.5 gap-1.5 rounded-md has-[>svg]:px-2.5',\n        'icon-xs':\n          'size-6 rounded-[calc(var(--radius)-5px)] p-0 has-[>svg]:p-0',\n        'icon-sm': 'size-8 p-0 has-[>svg]:p-0',\n      },\n    },\n    defaultVariants: {\n      size: 'xs',\n    },\n  },\n)\n\nfunction InputGroupButton({\n  className,\n  type = 'button',\n  variant = 'ghost',\n  size = 'xs',\n  ...props\n}: Omit<React.ComponentProps<typeof Button>, 'size'> &\n  VariantProps<typeof inputGroupButtonVariants>) {\n  return (\n    <Button\n      type={type}\n      data-size={size}\n      variant={variant}\n      className={cn(inputGroupButtonVariants({ size }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupText({ className, ...props }: React.ComponentProps<'span'>) {\n  return (\n    <span\n      className={cn(\n        \"text-muted-foreground flex items-center gap-2 text-sm [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupInput({\n  className,\n  ...props\n}: React.ComponentProps<'input'>) {\n  return (\n    <Input\n      data-slot=\"input-group-control\"\n      className={cn(\n        'flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupTextarea({\n  className,\n  ...props\n}: React.ComponentProps<'textarea'>) {\n  return (\n    <Textarea\n      data-slot=\"input-group-control\"\n      className={cn(\n        'flex-1 resize-none rounded-none border-0 bg-transparent py-3 shadow-none focus-visible:ring-0 dark:bg-transparent',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  InputGroup,\n  InputGroupAddon,\n  InputGroupButton,\n  InputGroupText,\n  InputGroupInput,\n  InputGroupTextarea,\n}\n","size_bytes":5031},"components/ui/tabs.tsx":{"content":"'use client'\n\nimport * as React from 'react'\nimport * as TabsPrimitive from '@radix-ui/react-tabs'\n\nimport { cn } from '@/lib/utils'\n\nfunction Tabs({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\n  return (\n    <TabsPrimitive.Root\n      data-slot=\"tabs\"\n      className={cn('flex flex-col gap-2', className)}\n      {...props}\n    />\n  )\n}\n\nfunction TabsList({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\n  return (\n    <TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        'bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsTrigger({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\n  return (\n    <TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\n  return (\n    <TabsPrimitive.Content\n      data-slot=\"tabs-content\"\n      className={cn('flex-1 outline-none', className)}\n      {...props}\n    />\n  )\n}\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1971}},"version":2}